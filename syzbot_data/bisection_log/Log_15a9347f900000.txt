bisecting cause commit starting from 3dd0130f2430decf0cb001b452824515436986d2
building syzkaller on 4a77ae0bdc5cd75ebe88ce7c896aae6bbf457a29
testing commit 3dd0130f2430decf0cb001b452824515436986d2 with gcc (GCC) 8.1.0
kernel signature: 6dcc3a7df9791dc459583be91b7565ef215a2fb21567666a8d5e386f6aeff85a
all runs: crashed: possible deadlock in dev_uc_sync
testing release v5.8
testing commit bcf876870b95592b52519ed4aafcf9d95999bc9c with gcc (GCC) 8.1.0
kernel signature: c8e76bd576d17a3da7d4c04675d695d50c50a29d2841a6f17b484f81b639c306
all runs: crashed: WARNING in print_bfs_bug
testing release v5.7
testing commit 3d77e6a8804abcc0504c904bd6e5cdf3a5cf8162 with gcc (GCC) 8.1.0
kernel signature: 6c79a1274846e1dd35e051f11e5da60649d2f713717c461e4116c55f65b7924c
all runs: crashed: BUG: MAX_LOCKDEP_ENTRIES too low!
testing release v5.6
testing commit 7111951b8d4973bda27ff663f2cf18b663d15b48 with gcc (GCC) 8.1.0
kernel signature: 31cb6ec86e01e8d2d4c6c243fb9d4b5e3a51b51fb0a78db6365b00d2381e9dc2
all runs: crashed: BUG: MAX_LOCKDEP_ENTRIES too low!
testing release v5.5
testing commit d5226fa6dbae0569ee43ecfc08bdcd6770fc4755 with gcc (GCC) 8.1.0
kernel signature: ee6d31c410c6a9c95c364337774192866a3f8e6eb95d2e0a8e905e81ddddb9a3
all runs: crashed: BUG: MAX_LOCKDEP_ENTRIES too low!
testing release v5.4
testing commit 219d54332a09e8d8741c1e1982f5eae56099de85 with gcc (GCC) 8.1.0
kernel signature: c884ac6ac81875c7ea10781f22397d722e91708db5eed37129946e0cfe28bc72
all runs: crashed: BUG: MAX_LOCKDEP_ENTRIES too low!
testing release v5.3
testing commit 4d856f72c10ecb060868ed10ff1b1453943fc6c8 with gcc (GCC) 8.1.0
kernel signature: 65d2cbf91e25155d7a7b2b15f0c9e9a7fd39b232e78d8edb58ea3e8cc3e3d4c3
run #0: crashed: WARNING in rtnl_delete_link
run #1: crashed: WARNING in rtnl_delete_link
run #2: crashed: WARNING in rtnl_delete_link
run #3: crashed: WARNING in rtnl_delete_link
run #4: crashed: WARNING in rtnl_delete_link
run #5: crashed: WARNING in rtnl_delete_link
run #6: crashed: WARNING in rtnl_delete_link
run #7: crashed: WARNING in rtnl_delete_link
run #8: OK
run #9: OK
testing release v5.2
testing commit 0ecfebd2b52404ae0c54a878c872bb93363ada36 with gcc (GCC) 8.1.0
kernel signature: acfbe3f2a17e328a185a3e5d3df112e857a8808e3bd5bf95db1a2be729f32f18
run #0: crashed: WARNING in rtnl_delete_link
run #1: crashed: WARNING in rtnl_delete_link
run #2: crashed: WARNING in rtnl_delete_link
run #3: crashed: WARNING in rtnl_delete_link
run #4: crashed: WARNING in rtnl_delete_link
run #5: crashed: WARNING in rtnl_delete_link
run #6: crashed: WARNING in rtnl_delete_link
run #7: crashed: WARNING in rtnl_delete_link
run #8: crashed: BUG: MAX_STACK_TRACE_ENTRIES too low!
run #9: crashed: BUG: MAX_STACK_TRACE_ENTRIES too low!
testing release v5.1
testing commit e93c9c99a629c61837d5a7fc2120cd2b6c70dbdd with gcc (GCC) 8.1.0
kernel signature: 59332160b7da194918fe53ffdc2361c99cf48832e7ac230e54d6370c11f4172d
run #0: crashed: WARNING in rtnl_delete_link
run #1: crashed: WARNING in rtnl_delete_link
run #2: crashed: WARNING in rtnl_delete_link
run #3: crashed: WARNING in rtnl_delete_link
run #4: crashed: WARNING in rtnl_delete_link
run #5: crashed: WARNING in rtnl_delete_link
run #6: crashed: WARNING in rtnl_delete_link
run #7: crashed: WARNING in rtnl_delete_link
run #8: crashed: WARNING in rtnl_delete_link
run #9: crashed: BUG: MAX_STACK_TRACE_ENTRIES too low!
testing release v5.0
testing commit 1c163f4c7b3f621efff9b28a47abb36f7378d783 with gcc (GCC) 8.1.0
kernel signature: 4fc42aede2b52d2b5b0f69fbcc1068668bf2ad0a0a4f8856982df3c479026d9d
run #0: crashed: WARNING in rtnl_delete_link
run #1: crashed: WARNING in rtnl_delete_link
run #2: crashed: WARNING in rtnl_delete_link
run #3: crashed: general protection fault in batadv_iv_ogm_queue_add
run #4: crashed: WARNING in rtnl_delete_link
run #5: crashed: WARNING in rtnl_delete_link
run #6: crashed: WARNING in rtnl_delete_link
run #7: crashed: general protection fault in batadv_iv_ogm_queue_add
run #8: OK
run #9: OK
testing release v4.20
testing commit 8fe28cb58bcb235034b64cbbb7550a8a43fd88be with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.19
testing commit 84df9525b0c27f3ebc2ebb1864fa62a97fdedb7d with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.18
testing commit 94710cac0ef4ee177a63b5227664b38c95bbf703 with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.17
testing commit 29dcea88779c856c7dc92040a0c01233263101d4 with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.16
testing commit 0adb32858b0bddf4ada5f364a84ed60b196dbcda with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.15
testing commit d8a5b80568a9cb66810e75b182018e9edb68e8ff with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.14
testing commit bebc6082da0a9f5d47a1ea2edc099bf671058bd4 with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.13
testing commit 569dbb88e80deb68974ef6fdd6a13edb9d686261 with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.12
testing commit 6f7da290413ba713f0cdd9ff1a2a9bb129ef4f6c with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.11
testing commit a351e9b9fc24e982ec2f0e76379a49826036da12 with gcc (GCC) 7.3.0
certs/signing_key.pem: Permission denied
testing release v4.10
testing commit c470abd4fde40ea6a0846a2beab642a578c0b8cd with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
testing release v4.9
testing commit 69973b830859bc6529a7a0468ba0d80ee5117826 with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
testing release v4.8
testing commit c8d2bc9bc39ebea8437fd974fdbc21847bb897a3 with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
testing release v4.7
testing commit 523d939ef98fd712632d93a5a2b588e477a7565e with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
testing release v4.6
testing commit 2dcd0af568b0cf583645c8a317dd12e344b1c72a with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
revisions tested: 25, total time: 2h27m3.991338437s (build: 1h20m45.372521927s, test: 1h2m44.898337376s)
the crash already happened on the oldest tested release
commit msg: Linux 5.0
crash: general protection fault in batadv_iv_ogm_queue_add
batman_adv: batadv0: Interface deactivated: batadv_slave_0
batman_adv: batadv0: Removing interface: batadv_slave_0
kasan: CONFIG_KASAN_INLINE enabled
kasan: GPF could be caused by NULL-ptr deref or user memory access
general protection fault: 0000 [#1] PREEMPT SMP KASAN
CPU: 1 PID: 603 Comm: kworker/u4:3 Not tainted 5.0.0-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Workqueue: bat_events batadv_iv_send_outstanding_bat_ogm_packet
RIP: 0010:batadv_iv_ogm_queue_add+0x9b/0xe50 net/batman-adv/bat_iv_ogm.c:611
Code: 44 89 8d 64 ff ff ff c7 02 f1 f1 f1 f1 c7 42 04 04 f2 f2 f2 48 89 fa 65 48 8b 0c 25 28 00 00 00 48 89 4d d0 31 c9 48 c1 ea 03 <0f> b6 04 02 48 89 fa 83 e2 07 38 d0 7f 08 84 c0 0f 85 99 0b 00 00
RSP: 0018:ffff8880a8f27ac0 EFLAGS: 00010246
RAX: dffffc0000000000 RBX: ffff88808e54a1c0 RCX: 0000000000000000
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000003
RBP: ffff8880a8f27bd8 R08: ffff88808e870d40 R09: 0000000000000001
R10: ffffed1011ca943f R11: ffff88808e54a1fb R12: ffff88808e870d40
R13: 0000000000000400 R14: 0000000000000000 R15: 000000000000003c
FS:  0000000000000000(0000) GS:ffff8880ae900000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000016a4300 CR3: 000000008fd71000 CR4: 00000000001406e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
 batadv_iv_ogm_schedule+0x79e/0xe80 net/batman-adv/bat_iv_ogm.c:803
 batadv_iv_send_outstanding_bat_ogm_packet+0x4a2/0x790 net/batman-adv/bat_iv_ogm.c:1681
 process_one_work+0x7b9/0x15e0 kernel/workqueue.c:2173
 worker_thread+0x85/0xb60 kernel/workqueue.c:2319
 kthread+0x324/0x3e0 kernel/kthread.c:246
 ret_from_fork+0x24/0x30 arch/x86/entry/entry_64.S:352
Modules linked in:
---[ end trace 77f57548039a6edc ]---
RIP: 0010:batadv_iv_ogm_queue_add+0x9b/0xe50 net/batman-adv/bat_iv_ogm.c:611
Code: 44 89 8d 64 ff ff ff c7 02 f1 f1 f1 f1 c7 42 04 04 f2 f2 f2 48 89 fa 65 48 8b 0c 25 28 00 00 00 48 89 4d d0 31 c9 48 c1 ea 03 <0f> b6 04 02 48 89 fa 83 e2 07 38 d0 7f 08 84 c0 0f 85 99 0b 00 00
RSP: 0018:ffff8880a8f27ac0 EFLAGS: 00010246
RAX: dffffc0000000000 RBX: ffff88808e54a1c0 RCX: 0000000000000000
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000003
RBP: ffff8880a8f27bd8 R08: ffff88808e870d40 R09: 0000000000000001
R10: ffffed1011ca943f R11: ffff88808e54a1fb R12: ffff88808e870d40
R13: 0000000000000400 R14: 0000000000000000 R15: 000000000000003c
FS:  0000000000000000(0000) GS:ffff8880ae900000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00000000016a4300 CR3: 00000000a6776000 CR4: 00000000001406e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400

