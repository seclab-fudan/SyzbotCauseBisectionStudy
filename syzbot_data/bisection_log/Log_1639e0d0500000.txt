bisecting cause commit starting from c2568c8c9e636a56abf31da4b28b65d3ded02524
building syzkaller on 1880b4a9f394370a7d1fcb5c1cfca0fa1127b463
testing commit c2568c8c9e636a56abf31da4b28b65d3ded02524 with gcc (GCC) 8.1.0
kernel signature: fa71a96de861b1089637ffba202850f42288d8af91bd36772c2ee8c92cca1ede
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.8
testing commit bcf876870b95592b52519ed4aafcf9d95999bc9c with gcc (GCC) 8.1.0
kernel signature: 07017886e8be4f36b0de5ab1d88c375335f28f4fe6904e167bde01a18df22d95
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.7
testing commit 3d77e6a8804abcc0504c904bd6e5cdf3a5cf8162 with gcc (GCC) 8.1.0
kernel signature: 8e9f74e6eeef93f0a3bc4d055b516665f9fdf33043d9e88ab3ececcebf9039c4
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.6
testing commit 7111951b8d4973bda27ff663f2cf18b663d15b48 with gcc (GCC) 8.1.0
kernel signature: 977d0e077a8c704ff5fa742f9bce42c16599e307404d38f56f361614c6c6c910
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.5
testing commit d5226fa6dbae0569ee43ecfc08bdcd6770fc4755 with gcc (GCC) 8.1.0
kernel signature: 095689669176a9675cc32267a3a49c298ded5885bfc7c0b296160d2e3d889317
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.4
testing commit 219d54332a09e8d8741c1e1982f5eae56099de85 with gcc (GCC) 8.1.0
kernel signature: 91592c6bb6cc7aff27d1e3861a221d787f9ecd464afa5659ed35ad06d1c64128
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.3
testing commit 4d856f72c10ecb060868ed10ff1b1453943fc6c8 with gcc (GCC) 8.1.0
kernel signature: cd32215f4df3aa57442c820634a35962e0e6338753fe7b2383e996839aad4445
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.2
testing commit 0ecfebd2b52404ae0c54a878c872bb93363ada36 with gcc (GCC) 8.1.0
kernel signature: 5212aa33151621fd9072d6e8b792d31a31723f7d4d25d9828e62200a43d0720c
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.1
testing commit e93c9c99a629c61837d5a7fc2120cd2b6c70dbdd with gcc (GCC) 8.1.0
kernel signature: 92a7f31bdd4d69831c1af63a388418fa56f9e7b8bae3e4db100be3e61782c345
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v5.0
testing commit 1c163f4c7b3f621efff9b28a47abb36f7378d783 with gcc (GCC) 8.1.0
kernel signature: 0a99dc2a3c18a6890dd2e7de878f97b57e6b807d3ff365afede1f992e044c15f
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.20
testing commit 8fe28cb58bcb235034b64cbbb7550a8a43fd88be with gcc (GCC) 8.1.0
kernel signature: cde040825a835ece1ed47f488b3c80dedac3d695bfd2ad1f355a33302402c56d
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.19
testing commit 84df9525b0c27f3ebc2ebb1864fa62a97fdedb7d with gcc (GCC) 8.1.0
kernel signature: 8a27563deefa67e4bcd22f744ef273ca4e16d7ead7e611b73fd540a6807d9060
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.18
testing commit 94710cac0ef4ee177a63b5227664b38c95bbf703 with gcc (GCC) 8.1.0
kernel signature: 9dd4fddcf688185db57d33f72c9bed7df3c7b3feb68c8dd1a60ab5ddff871436
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.17
testing commit 29dcea88779c856c7dc92040a0c01233263101d4 with gcc (GCC) 8.1.0
kernel signature: fb7acfc59b565313707ba18fb86c990ad33b82d62f2cf425fc957dc43311a5ab
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.16
testing commit 0adb32858b0bddf4ada5f364a84ed60b196dbcda with gcc (GCC) 8.1.0
kernel signature: e7bcbdcba6fec7910ad516e810e013af9976589a4e5064ceab42000001f850c4
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.15
testing commit d8a5b80568a9cb66810e75b182018e9edb68e8ff with gcc (GCC) 8.1.0
kernel signature: 087a1d3645eb78606c17c2744536114e9b717c72ead5c03b4365c31ff09094a7
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.14
testing commit bebc6082da0a9f5d47a1ea2edc099bf671058bd4 with gcc (GCC) 8.1.0
kernel signature: 5000a4e0848cc285a50bb37ae090b5639968ba2088833a11751b973266a9117c
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.13
testing commit 569dbb88e80deb68974ef6fdd6a13edb9d686261 with gcc (GCC) 8.1.0
kernel signature: 7f3ac11ac96f2d24702fa08237365571bb3b25d8b423904b0173f9168b01a1a9
all runs: crashed: WARNING in ieee80211_check_rate_mask
testing release v4.12
testing commit 6f7da290413ba713f0cdd9ff1a2a9bb129ef4f6c with gcc (GCC) 8.1.0
kernel signature: a17c3302f088440322f0c106b79dab35c4bb7ff827bdc3cf40a9d32b79ec5dfb
all runs: crashed: BUG: sleeping function called from invalid context in tap_get_minor
testing release v4.11
testing commit a351e9b9fc24e982ec2f0e76379a49826036da12 with gcc (GCC) 7.3.0
kernel signature: 70c8cadb8261e2ecc4c17d92c0b04d43d5b65fdfbaaa1d024a62b2679631717a
all runs: crashed: BUG: sleeping function called from invalid context in tap_get_minor
testing release v4.10
testing commit c470abd4fde40ea6a0846a2beab642a578c0b8cd with gcc (GCC) 5.5.0
kernel signature: 3c28183876259bac8222a83f4faa7bfb59b81972955b1a4a9b221f9814e923b8
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
testing release v4.9
testing commit 69973b830859bc6529a7a0468ba0d80ee5117826 with gcc (GCC) 5.5.0
kernel signature: c406125b24181f079caa134b3eb22e1148a7e7fb93f4926ec3f8c5a812250e1a
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
testing release v4.8
testing commit c8d2bc9bc39ebea8437fd974fdbc21847bb897a3 with gcc (GCC) 5.5.0
kernel signature: 170b1a620d4e9a724dc6b86f53af74646a073e684eab367e75ff852691111045
all runs: OK
# git bisect start 69973b830859bc6529a7a0468ba0d80ee5117826 c8d2bc9bc39ebea8437fd974fdbc21847bb897a3
Bisecting: 8695 revisions left to test after this (roughly 13 steps)
[a5af7e1fc69a46f29b977fd4b570e0ac414c2338] rxrpc: Fix loss of PING RESPONSE ACK production due to PING ACKs
testing commit a5af7e1fc69a46f29b977fd4b570e0ac414c2338 with gcc (GCC) 5.5.0
kernel signature: 489adbf928dc7ae2f887716a56c7eb191d3660a22b4c15141e11ce82ad0c8f9b
all runs: OK
# git bisect good a5af7e1fc69a46f29b977fd4b570e0ac414c2338
Bisecting: 4759 revisions left to test after this (roughly 12 steps)
[a379f71a30dddbd2e7393624e455ce53c87965d1] Merge branch 'akpm' (patches from Andrew)
testing commit a379f71a30dddbd2e7393624e455ce53c87965d1 with gcc (GCC) 5.5.0
kernel signature: e54a4f4a2c33a0d6a0a30dd66bfb94072ae414b99c6f396fc6cbb89dbb20c2b4
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: general protection fault in batadv_iv_ogm_queue_add
# git bisect bad a379f71a30dddbd2e7393624e455ce53c87965d1
Bisecting: 2110 revisions left to test after this (roughly 11 steps)
[6afd563d4bbc1924b7de9e053324c007e0d36476] Merge tag 'armsoc-drivers' of git://git.kernel.org/pub/scm/linux/kernel/git/arm/arm-soc
testing commit 6afd563d4bbc1924b7de9e053324c007e0d36476 with gcc (GCC) 5.5.0
kernel signature: fb33db70900bb6d0e1bd5da789b9308d70ca62f9fc651413a7db26449a69f67e
all runs: OK
# git bisect good 6afd563d4bbc1924b7de9e053324c007e0d36476
Bisecting: 1055 revisions left to test after this (roughly 10 steps)
[abb5a14fa20fdd400995926134b7be9eb8ce6048] Merge branch 'work.misc' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/vfs
testing commit abb5a14fa20fdd400995926134b7be9eb8ce6048 with gcc (GCC) 5.5.0
kernel signature: 5921e78123eff0ca068018624200334aea188cae5fd5f7ed6f76ad369ebeec3c
all runs: OK
# git bisect good abb5a14fa20fdd400995926134b7be9eb8ce6048
Bisecting: 577 revisions left to test after this (roughly 9 steps)
[9fce0c226536fc36c7fb0a80000ca38a995be43e] Merge tag 'v4.8' into patchwork
testing commit 9fce0c226536fc36c7fb0a80000ca38a995be43e with gcc (GCC) 5.5.0
kernel signature: be378a8b764bb02db00bf4ce7091291e3f260ab428f47f611cdb0961fdc15436
all runs: OK
# git bisect good 9fce0c226536fc36c7fb0a80000ca38a995be43e
Bisecting: 256 revisions left to test after this (roughly 8 steps)
[6b5e09a748ad0a0b198d0e268c7e689044bfe48a] Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net
testing commit 6b5e09a748ad0a0b198d0e268c7e689044bfe48a with gcc (GCC) 5.5.0
kernel signature: 05dcea2e14b792dd4400da1ec98f0a6a96f278374925d620914462b6283a043e
run #0: crashed: WARNING in nf_unregister_net_hook
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: OK
# git bisect bad 6b5e09a748ad0a0b198d0e268c7e689044bfe48a
Bisecting: 182 revisions left to test after this (roughly 7 steps)
[c3afafa47898e34eb49828ec4ac92bcdc81c8f0c] Merge git://git.kernel.org/pub/scm/linux/kernel/git/herbert/crypto-2.6
testing commit c3afafa47898e34eb49828ec4ac92bcdc81c8f0c with gcc (GCC) 5.5.0
kernel signature: b0c9ecf2c7ffa0fa0a207eea03345093c2a3496c3b8da73ecb01f49abc477690
all runs: OK
# git bisect good c3afafa47898e34eb49828ec4ac92bcdc81c8f0c
Bisecting: 79 revisions left to test after this (roughly 7 steps)
[35ff96dfd3c9aaa921b3e8dcac76b7697f2dcec0] Merge tag 'for-linus-20161008' of git://git.infradead.org/linux-mtd
testing commit 35ff96dfd3c9aaa921b3e8dcac76b7697f2dcec0 with gcc (GCC) 5.5.0
kernel signature: 958bd95c7b570fd15d206b008c3492775c995043902bd12fa8999a5eebd6e956
all runs: OK
# git bisect good 35ff96dfd3c9aaa921b3e8dcac76b7697f2dcec0
Bisecting: 39 revisions left to test after this (roughly 5 steps)
[0d818c288974e6f80923775dbf6225e3cb66659c] Merge tag 'rxrpc-rewrite-20161004' of git://git.kernel.org/pub/scm/linux/kernel/git/dhowells/linux-fs
testing commit 0d818c288974e6f80923775dbf6225e3cb66659c with gcc (GCC) 5.5.0
kernel signature: f0727e9774ef132c9b7f9c6573831b66bb6b7339f5ca2e58ead03e8fd92730eb
all runs: OK
# git bisect good 0d818c288974e6f80923775dbf6225e3cb66659c
Bisecting: 19 revisions left to test after this (roughly 4 steps)
[f5ef017e1195d0a8c69a82bf95fea9c776b93ff0] be2net: NCSI FW section should be properly updated with ethtool for BE3
testing commit f5ef017e1195d0a8c69a82bf95fea9c776b93ff0 with gcc (GCC) 5.5.0
kernel signature: 772e45128237cbcc384b401acc89f3c82e467dee5563bc9eea96fefd414a6841
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: crashed: WARNING in nf_unregister_net_hook
run #9: OK
# git bisect bad f5ef017e1195d0a8c69a82bf95fea9c776b93ff0
Bisecting: 9 revisions left to test after this (roughly 3 steps)
[912e27e85e070596ed4964ebde29fa9781390f2a] xen-netback: make sure that hashes are not send to unaware frontends
testing commit 912e27e85e070596ed4964ebde29fa9781390f2a with gcc (GCC) 5.5.0
kernel signature: a3a3c618e7f4bdab2bdffb14442ccb88e173944c5912f44743a156700957f802
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: general protection fault in batadv_iv_ogm_queue_add
# git bisect bad 912e27e85e070596ed4964ebde29fa9781390f2a
Bisecting: 4 revisions left to test after this (roughly 2 steps)
[e5e0fbfc4e3b343ff985dd800f1ee31564793563] ethernet: qualcomm: QCOM_EMAC should depend on HAS_DMA and HAS_IOMEM
testing commit e5e0fbfc4e3b343ff985dd800f1ee31564793563 with gcc (GCC) 5.5.0
kernel signature: 20925b0a28e008cf15677d45627d02eb1d58586bc8eaa78edf160927196698d6
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad e5e0fbfc4e3b343ff985dd800f1ee31564793563
Bisecting: 2 revisions left to test after this (roughly 1 step)
[983e1a6c95abf8058d26149a928578b720c77bce] net: ethernet: mediatek: get hw lro capability by the chip id instead of by the dtsi
testing commit 983e1a6c95abf8058d26149a928578b720c77bce with gcc (GCC) 5.5.0
kernel signature: ffff94ff5345333af915257cdc0d665ce1c85b77efa3b3f7aa302f47a1c5d14b
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad 983e1a6c95abf8058d26149a928578b720c77bce
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[b95b6d99ce3673ca8d9f7c824d82ca7912d96b34] net: ethernet: mediatek: get the chip id by ETHDMASYS registers
testing commit b95b6d99ce3673ca8d9f7c824d82ca7912d96b34 with gcc (GCC) 5.5.0
kernel signature: 8125e276861a4486761132d13426f2ba4f097f663304512a5602f72f8f729330
all runs: OK
# git bisect good b95b6d99ce3673ca8d9f7c824d82ca7912d96b34
983e1a6c95abf8058d26149a928578b720c77bce is the first bad commit
commit 983e1a6c95abf8058d26149a928578b720c77bce
Author: Nelson Chang <nelson.chang@mediatek.com>
Date:   Thu Oct 6 19:44:02 2016 +0800

    net: ethernet: mediatek: get hw lro capability by the chip id instead of by the dtsi
    
    Because hw lro started to be supported from MT7623, the proper way to check if
    the feature is capable is to judge by the chip id instead of by the dtsi.
    
    Signed-off-by: Nelson Chang <nelson.chang@mediatek.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

 drivers/net/ethernet/mediatek/mtk_eth_soc.c | 14 ++++++++++++--
 drivers/net/ethernet/mediatek/mtk_eth_soc.h |  1 +
 2 files changed, 13 insertions(+), 2 deletions(-)
culprit signature: ffff94ff5345333af915257cdc0d665ce1c85b77efa3b3f7aa302f47a1c5d14b
parent  signature: 8125e276861a4486761132d13426f2ba4f097f663304512a5602f72f8f729330
revisions tested: 37, total time: 7h14m49.241822904s (build: 3h19m18.92247056s, test: 3h50m24.015665718s)
first bad commit: 983e1a6c95abf8058d26149a928578b720c77bce net: ethernet: mediatek: get hw lro capability by the chip id instead of by the dtsi
recipients (to): ["blogic@openwrt.org" "davem@davemloft.net" "linux-arm-kernel@lists.infradead.org" "linux-mediatek@lists.infradead.org" "matthias.bgg@gmail.com" "nbd@openwrt.org" "nelson.chang@mediatek.com" "netdev@vger.kernel.org"]
recipients (cc): ["linux-kernel@vger.kernel.org"]
crash: WARNING in nf_unregister_net_hook
team0 (unregistering): Port device team_slave_0 removed
bond0 (unregistering): Releasing backup interface bond_slave_1
bond0 (unregistering): Releasing backup interface bond_slave_0
bond0 (unregistering): Released all slaves
------------[ cut here ]------------
WARNING: CPU: 1 PID: 2287 at net/netfilter/core.c:193 nf_unregister_net_hook+0x2d0/0x5a0 net/netfilter/core.c:193
nf_unregister_net_hook: hook not found!
Kernel panic - not syncing: panic_on_warn set ...

CPU: 1 PID: 2287 Comm: kworker/u4:4 Not tainted 4.8.0-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Workqueue: netns cleanup_net
 ffff880123c2f890 ffffffff82ed65a2 ffffffff86285b80 ffff880123c2f968
 ffffffff86aebf00 ffffffff84ee1270 0000000000000009 ffff880123c2f958
 ffffffff8163dc22 0000000041b58ab3 ffffffff86fa7be0 ffffffff8163da6c
Call Trace:
 [<ffffffff82ed65a2>] __dump_stack lib/dump_stack.c:15 [inline]
 [<ffffffff82ed65a2>] dump_stack+0x136/0x1d4 lib/dump_stack.c:51
 [<ffffffff8163dc22>] panic+0x1b6/0x351 kernel/panic.c:153
 [<ffffffff81349edd>] __warn+0x18d/0x1b0 kernel/panic.c:509
 [<ffffffff81349f92>] warn_slowpath_fmt+0x92/0xb0 kernel/panic.c:532
 [<ffffffff84ee1270>] nf_unregister_net_hook+0x2d0/0x5a0 net/netfilter/core.c:193
 [<ffffffff84ee1666>] nf_unregister_hook_list net/netfilter/core.c:526 [inline]
 [<ffffffff84ee1666>] netfilter_net_exit+0x36/0xa0 net/netfilter/core.c:558
 [<ffffffff84cd7fce>] ops_exit_list.isra.0+0x8e/0x120 net/core/net_namespace.c:136
 [<ffffffff84cda2d0>] cleanup_net+0x2d0/0x570 net/core/net_namespace.c:449
 [<ffffffff8139b65d>] process_one_work+0x67d/0x14d0 kernel/workqueue.c:2096
 [<ffffffff8139c591>] worker_thread+0xe1/0x1050 kernel/workqueue.c:2230
 [<ffffffff813ad12e>] kthread+0x20e/0x2d0 kernel/kthread.c:209
 [<ffffffff8601e39a>] ret_from_fork+0x2a/0x40 arch/x86/entry/entry_64.S:432
Kernel Offset: disabled

