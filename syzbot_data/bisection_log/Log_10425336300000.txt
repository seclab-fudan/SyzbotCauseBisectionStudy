bisecting cause commit starting from f8e6dfc64f6135d1b6c5215c14cd30b9b60a0008
building syzkaller on 3fd2ea69e05557e7e0fef9b68263b4150670671c
testing commit f8e6dfc64f6135d1b6c5215c14cd30b9b60a0008
compiler: gcc (GCC) 10.2.1 20210217, GNU ld (GNU Binutils for Debian) 2.35.1
kernel signature: d7acd20e250d0cc860133798a99a9cd7396c1c1961306e794675fd531ee70707
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in drop_current_rng
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
run #10: crashed: INFO: task hung in drop_current_rng
run #11: crashed: INFO: task hung in drop_current_rng
run #12: crashed: INFO: task hung in drop_current_rng
run #13: crashed: INFO: task hung in drop_current_rng
run #14: crashed: INFO: task hung in hwrng_register
run #15: crashed: INFO: task hung in hwrng_register
run #16: crashed: INFO: task hung in drop_current_rng
run #17: crashed: INFO: task hung in hwrng_register
run #18: crashed: INFO: task hung in drop_current_rng
run #19: crashed: INFO: task hung in hwrng_register
testing release v5.13
testing commit 62fb9874f5da54fdb243003b386128037319b219
compiler: gcc (GCC) 10.2.1 20210217, GNU ld (GNU Binutils for Debian) 2.35.1
kernel signature: 160dd584d3041427002e5e881f98280ae9aebc819a2fa29b4bade4d15820e761
all runs: crashed: INFO: task hung in hwrng_register
testing release v5.12
testing commit 9f4ad9e425a1d3b6a34617b8ea226d56a119a717
compiler: gcc (GCC) 10.2.1 20210217, GNU ld (GNU Binutils for Debian) 2.35.1
kernel signature: b8cac70814a5fdbac7dbdd38e4214f03832ce2c4fc4b950864fc4c971afa2790
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in drop_current_rng
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
testing release v5.11
testing commit f40ddce88593482919761f74910f42f4b84c004b
compiler: gcc (GCC) 10.2.1 20210217, GNU ld (GNU Binutils for Debian) 2.35.1
kernel signature: f1d0cb916adcced6b6c9b2da961ed8830a0d6725dbc70234a7a33626cd76aafe
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in drop_current_rng
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
testing release v5.10
testing commit 2c85ebc57b3e1817b6ce1a6b703928e113a90442
compiler: gcc (GCC) 10.2.1 20210217, GNU ld (GNU Binutils for Debian) 2.35.1
kernel signature: 2a15a524b9eccf3c507e1d167d1c435a69c6d207f31bdd5162bf857cc86a1af3
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in drop_current_rng
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in drop_current_rng
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in drop_current_rng
testing release v5.9
testing commit bbf5c979011a099af5dc76498918ed7df445635b
compiler: gcc (GCC) 10.2.1 20210217, GNU ld (GNU Binutils for Debian) 2.35.1
kernel signature: fd0a4e27ddcd396e6415d61f52a4ec85945b9492ec87a9a09a1dc277dacafb15
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in drop_current_rng
run #3: crashed: INFO: task hung in drop_current_rng
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in drop_current_rng
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
testing release v5.8
testing commit bcf876870b95592b52519ed4aafcf9d95999bc9c
compiler: gcc (GCC) 8.4.1 20210217, GNU ld (GNU Binutils for Debian) 2.35.1
kernel signature: ecc34ef178adc7c0ca647a2fd494eeee0344ca866c6a5ab62d83419013222c3a
run #0: crashed: INFO: task hung in drop_current_rng
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in drop_current_rng
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in drop_current_rng
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
testing release v5.7
testing commit 3d77e6a8804abcc0504c904bd6e5cdf3a5cf8162
compiler: gcc version 8.4.1 20210217 (GCC), GNU ld (GNU Binutils for Debian) 2.35.1
kernel signature: 9b2bcabc91b7407d6b2c675a877e63ee5d45ce60cfeaa5d0ca1583b7952c51da
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in drop_current_rng
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
testing release v5.6
testing commit 7111951b8d4973bda27ff663f2cf18b663d15b48
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 9022ef7263f3ac71b54b2d8852435853b3fd50cf19c59acd4b3401ba939ff3bf
all runs: OK
# git bisect start 3d77e6a8804abcc0504c904bd6e5cdf3a5cf8162 7111951b8d4973bda27ff663f2cf18b663d15b48
Bisecting: 7542 revisions left to test after this (roughly 13 steps)
[50a5de895dbe5df947b3a695777db5b2c313e065] Merge tag 'for-linus-hmm' of git://git.kernel.org/pub/scm/linux/kernel/git/rdma/rdma

testing commit 50a5de895dbe5df947b3a695777db5b2c313e065
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 362e02883c9067e1bd7735f739adbc21a32deab643d9f461fe0483d1cb2f57f1
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in drop_current_rng
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in drop_current_rng
run #6: crashed: INFO: task hung in drop_current_rng
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in drop_current_rng
# git bisect bad 50a5de895dbe5df947b3a695777db5b2c313e065
Bisecting: 4204 revisions left to test after this (roughly 12 steps)
[56a451b780676bc1cdac011735fe2869fa2e9abf] Merge tag 'ntb-5.7' of git://github.com/jonmason/ntb

testing commit 56a451b780676bc1cdac011735fe2869fa2e9abf
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 346318984c573b425f17f097408d2b8285b80cfab2592d6bcdbd52559795cf35
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in drop_current_rng
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
# git bisect bad 56a451b780676bc1cdac011735fe2869fa2e9abf
Bisecting: 1643 revisions left to test after this (roughly 11 steps)
[49835c15a55225e9b3ff9cc9317135b334ea2d49] Merge tag 'pm-5.7-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm

testing commit 49835c15a55225e9b3ff9cc9317135b334ea2d49
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 73443d5697eb60046caa8a99f3abf6026b444a3659c07b13a293f71ee8619ffe
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in drop_current_rng
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
# git bisect bad 49835c15a55225e9b3ff9cc9317135b334ea2d49
Bisecting: 934 revisions left to test after this (roughly 10 steps)
[063d1942247668eb0bb800aef5afbbef337344be] Merge tag 'media/v5.7-1' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media

testing commit 063d1942247668eb0bb800aef5afbbef337344be
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: acb8cdd7f1e3d02e0f62dc01a862cc82d57f84dee0891f01c052e9b8d9bb1ee9
all runs: OK
# git bisect good 063d1942247668eb0bb800aef5afbbef337344be
Bisecting: 516 revisions left to test after this (roughly 9 steps)
[e681bb287f40e7a9dbcb04cef80fd87a2511ab86] staging: vt6656: Use DIV_ROUND_UP macro instead of specific code

testing commit e681bb287f40e7a9dbcb04cef80fd87a2511ab86
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: edc7a4fafd84c7ba4231acee75aefed2a306dee005c1f3bee15f71e964c9178d
all runs: OK
# git bisect good e681bb287f40e7a9dbcb04cef80fd87a2511ab86
Bisecting: 266 revisions left to test after this (roughly 8 steps)
[db34c5ffee649e2c4c870d1031a996398a187cf5] Merge tag 'usb-5.7-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/usb

testing commit db34c5ffee649e2c4c870d1031a996398a187cf5
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 972e9eec9631331c787feee9dfb6bf8829cfdee9444528dacbfd81e8e3b6ea41
run #0: crashed: INFO: task hung in drop_current_rng
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
# git bisect bad db34c5ffee649e2c4c870d1031a996398a187cf5
Bisecting: 121 revisions left to test after this (roughly 7 steps)
[a8ab3e76297ea85d92f4ee0833bd469816a13ccf] Merge tag 'usb-for-v5.7' of git://git.kernel.org/pub/scm/linux/kernel/git/balbi/usb into usb-next

testing commit a8ab3e76297ea85d92f4ee0833bd469816a13ccf
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 03ba6cce89ce58b3532f128e2ba1d65dc72666c7808282e77da3aa239c4230c8
all runs: crashed: INFO: task hung in hwrng_register
# git bisect bad a8ab3e76297ea85d92f4ee0833bd469816a13ccf
Bisecting: 63 revisions left to test after this (roughly 6 steps)
[d1c6a769cdf466053ae211789f2b0671c8a72331] usb: typec: mux: Allow the mux handles to be requested with fwnode

testing commit d1c6a769cdf466053ae211789f2b0671c8a72331
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: d8967c433a65c8ccefe0cde3c4677ed84351de9a6fe38efd890981c38964d3d9
all runs: OK
# git bisect good d1c6a769cdf466053ae211789f2b0671c8a72331
Bisecting: 31 revisions left to test after this (roughly 5 steps)
[eeead847487f726fa177d0f4060c4f0816ad9cd9] usb: gadget: amd5536udc: fix spelling mistake "reserverd" -> "reserved"

testing commit eeead847487f726fa177d0f4060c4f0816ad9cd9
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 67f8706f2568a5348f815619f22fe826a4ed1e65855c124ebba091875453ba92
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in drop_current_rng
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in drop_current_rng
run #8: crashed: INFO: task hung in drop_current_rng
run #9: crashed: INFO: task hung in hwrng_register
# git bisect bad eeead847487f726fa177d0f4060c4f0816ad9cd9
Bisecting: 15 revisions left to test after this (roughly 4 steps)
[3d157c28d2289edf0439e8308e8de3a06acaaf0e] doc: dt: bindings: usb: dwc3: Update entries for disabling SS instances in park mode

testing commit 3d157c28d2289edf0439e8308e8de3a06acaaf0e
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 6540f7e605d2a8fdd23469c3592e9adffb87e32faa1b12ff380ca214850f11fe
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: boot failed: can't ssh into the instance
# git bisect good 3d157c28d2289edf0439e8308e8de3a06acaaf0e
Bisecting: 7 revisions left to test after this (roughly 3 steps)
[0227cc84c44417a29c8102e41db8ec2c11ebc6b2] usb: dwc3: core: don't do suspend for device mode if already suspended

testing commit 0227cc84c44417a29c8102e41db8ec2c11ebc6b2
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 3b8ea8d2832b0eb5e232787f8c21c7376f1e9fe2e2512cd7dccbef04a7f1322e
all runs: OK
# git bisect good 0227cc84c44417a29c8102e41db8ec2c11ebc6b2
Bisecting: 3 revisions left to test after this (roughly 2 steps)
[95b18f28979e12539cc02f6ec4e2c776e8551f39] dt-bindings: usb: dwc2: add compatible property for rk3328 usb

testing commit 95b18f28979e12539cc02f6ec4e2c776e8551f39
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: e87bb3478cdc2d81109fe9ac6dda80e34ca3e20819b9308fe264607bd35c1743
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in hwrng_register
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in drop_current_rng
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: crashed: INFO: task hung in hwrng_register
# git bisect bad 95b18f28979e12539cc02f6ec4e2c776e8551f39
Bisecting: 1 revision left to test after this (roughly 1 step)
[1a0808cb9e417170ed6ab97254cf319dc3e3c310] usb: dwc2: Implement set_selfpowered()

testing commit 1a0808cb9e417170ed6ab97254cf319dc3e3c310
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: 3b8ea8d2832b0eb5e232787f8c21c7376f1e9fe2e2512cd7dccbef04a7f1322e
all runs: OK
# git bisect good 1a0808cb9e417170ed6ab97254cf319dc3e3c310
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[f2c2e717642c66f7fe7e5dd69b2e8ff5849f4d10] usb: gadget: add raw-gadget interface

testing commit f2c2e717642c66f7fe7e5dd69b2e8ff5849f4d10
compiler: gcc version 8.4.1 20210217 (GCC)
kernel signature: e87bb3478cdc2d81109fe9ac6dda80e34ca3e20819b9308fe264607bd35c1743
run #0: crashed: INFO: task hung in hwrng_register
run #1: crashed: INFO: task hung in hwrng_register
run #2: crashed: INFO: task hung in hwrng_register
run #3: crashed: INFO: task hung in hwrng_register
run #4: crashed: INFO: task hung in drop_current_rng
run #5: crashed: INFO: task hung in hwrng_register
run #6: crashed: INFO: task hung in hwrng_register
run #7: crashed: INFO: task hung in hwrng_register
run #8: crashed: INFO: task hung in hwrng_register
run #9: boot failed: can't ssh into the instance
# git bisect bad f2c2e717642c66f7fe7e5dd69b2e8ff5849f4d10
f2c2e717642c66f7fe7e5dd69b2e8ff5849f4d10 is the first bad commit
commit f2c2e717642c66f7fe7e5dd69b2e8ff5849f4d10
Author: Andrey Konovalov <andreyknvl@google.com>
Date:   Mon Feb 24 17:13:03 2020 +0100

    usb: gadget: add raw-gadget interface
    
    USB Raw Gadget is a kernel module that provides a userspace interface for
    the USB Gadget subsystem. Essentially it allows to emulate USB devices
    from userspace. Enabled with CONFIG_USB_RAW_GADGET. Raw Gadget is
    currently a strictly debugging feature and shouldn't be used in
    production.
    
    Raw Gadget is similar to GadgetFS, but provides a more low-level and
    direct access to the USB Gadget layer for the userspace. The key
    differences are:
    
    1. Every USB request is passed to the userspace to get a response, while
       GadgetFS responds to some USB requests internally based on the provided
       descriptors. However note, that the UDC driver might respond to some
       requests on its own and never forward them to the Gadget layer.
    
    2. GadgetFS performs some sanity checks on the provided USB descriptors,
       while Raw Gadget allows you to provide arbitrary data as responses to
       USB requests.
    
    3. Raw Gadget provides a way to select a UDC device/driver to bind to,
       while GadgetFS currently binds to the first available UDC.
    
    4. Raw Gadget uses predictable endpoint names (handles) across different
       UDCs (as long as UDCs have enough endpoints of each required transfer
       type).
    
    5. Raw Gadget has ioctl-based interface instead of a filesystem-based one.
    
    Reviewed-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
    Signed-off-by: Andrey Konovalov <andreyknvl@google.com>
    Signed-off-by: Felipe Balbi <balbi@kernel.org>

 Documentation/usb/index.rst            |    1 +
 Documentation/usb/raw-gadget.rst       |   61 ++
 drivers/usb/gadget/legacy/Kconfig      |   11 +
 drivers/usb/gadget/legacy/Makefile     |    1 +
 drivers/usb/gadget/legacy/raw_gadget.c | 1078 ++++++++++++++++++++++++++++++++
 include/uapi/linux/usb/raw_gadget.h    |  167 +++++
 6 files changed, 1319 insertions(+)
 create mode 100644 Documentation/usb/raw-gadget.rst
 create mode 100644 drivers/usb/gadget/legacy/raw_gadget.c
 create mode 100644 include/uapi/linux/usb/raw_gadget.h

culprit signature: e87bb3478cdc2d81109fe9ac6dda80e34ca3e20819b9308fe264607bd35c1743
parent  signature: 3b8ea8d2832b0eb5e232787f8c21c7376f1e9fe2e2512cd7dccbef04a7f1322e
revisions tested: 23, total time: 5h12m33.196417363s (build: 2h28m9.144237813s, test: 2h41m49.404051087s)
first bad commit: f2c2e717642c66f7fe7e5dd69b2e8ff5849f4d10 usb: gadget: add raw-gadget interface
recipients (to): ["andreyknvl@google.com" "balbi@kernel.org" "gregkh@linuxfoundation.org"]
recipients (cc): []
crash: INFO: task hung in hwrng_register
INFO: task kworker/0:0:5 blocked for more than 143 seconds.
      Not tainted 5.6.0-rc5-syzkaller #0
"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
kworker/0:0     D25320     5      2 0x80084000
Workqueue: usb_hub_wq hub_event
Call Trace:
 schedule+0xc4/0x2b0 kernel/sched/core.c:4154
 schedule_preempt_disabled+0xf/0x20 kernel/sched/core.c:4213
 __mutex_lock_common kernel/locking/mutex.c:1033 [inline]
 __mutex_lock+0x8db/0x1400 kernel/locking/mutex.c:1103
 hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
 chaoskey_probe+0x6c8/0xb27 drivers/usb/misc/chaoskey.c:205
 usb_probe_interface+0x277/0x840 drivers/usb/core/driver.c:361
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_set_configuration+0xc81/0x1940 drivers/usb/core/message.c:2023
 generic_probe+0x61/0x8a drivers/usb/core/generic.c:210
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_new_device+0x866/0x14e0 drivers/usb/core/hub.c:2548
 hub_port_connect drivers/usb/core/hub.c:5195 [inline]
 hub_port_connect_change drivers/usb/core/hub.c:5335 [inline]
 port_event drivers/usb/core/hub.c:5481 [inline]
 hub_event+0x1079/0x3240 drivers/usb/core/hub.c:5563
 process_one_work+0x8ff/0x1690 kernel/workqueue.c:2264
 worker_thread+0x82/0xb50 kernel/workqueue.c:2410
 kthread+0x31d/0x3e0 kernel/kthread.c:255
 ret_from_fork+0x24/0x30 arch/x86/entry/entry_64.S:352
INFO: task kworker/0:1:7 blocked for more than 143 seconds.
      Not tainted 5.6.0-rc5-syzkaller #0
"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
kworker/0:1     D25344     7      2 0x80084000
Workqueue: usb_hub_wq hub_event
Call Trace:
 schedule+0xc4/0x2b0 kernel/sched/core.c:4154
 schedule_preempt_disabled+0xf/0x20 kernel/sched/core.c:4213
 __mutex_lock_common kernel/locking/mutex.c:1033 [inline]
 __mutex_lock+0x8db/0x1400 kernel/locking/mutex.c:1103
 hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
 chaoskey_probe+0x6c8/0xb27 drivers/usb/misc/chaoskey.c:205
 usb_probe_interface+0x277/0x840 drivers/usb/core/driver.c:361
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_set_configuration+0xc81/0x1940 drivers/usb/core/message.c:2023
 generic_probe+0x61/0x8a drivers/usb/core/generic.c:210
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_new_device+0x866/0x14e0 drivers/usb/core/hub.c:2548
 hub_port_connect drivers/usb/core/hub.c:5195 [inline]
 hub_port_connect_change drivers/usb/core/hub.c:5335 [inline]
 port_event drivers/usb/core/hub.c:5481 [inline]
 hub_event+0x1079/0x3240 drivers/usb/core/hub.c:5563
 process_one_work+0x8ff/0x1690 kernel/workqueue.c:2264
 worker_thread+0x82/0xb50 kernel/workqueue.c:2410
 kthread+0x31d/0x3e0 kernel/kthread.c:255
 ret_from_fork+0x24/0x30 arch/x86/entry/entry_64.S:352
INFO: task kworker/1:4:3141 blocked for more than 144 seconds.
      Not tainted 5.6.0-rc5-syzkaller #0
"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
kworker/1:4     D25576  3141      2 0x80084000
Workqueue: usb_hub_wq hub_event
Call Trace:
 schedule+0xc4/0x2b0 kernel/sched/core.c:4154
 schedule_preempt_disabled+0xf/0x20 kernel/sched/core.c:4213
 __mutex_lock_common kernel/locking/mutex.c:1033 [inline]
 __mutex_lock+0x8db/0x1400 kernel/locking/mutex.c:1103
 hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
 chaoskey_probe+0x6c8/0xb27 drivers/usb/misc/chaoskey.c:205
 usb_probe_interface+0x277/0x840 drivers/usb/core/driver.c:361
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_set_configuration+0xc81/0x1940 drivers/usb/core/message.c:2023
 generic_probe+0x61/0x8a drivers/usb/core/generic.c:210
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_new_device+0x866/0x14e0 drivers/usb/core/hub.c:2548
 hub_port_connect drivers/usb/core/hub.c:5195 [inline]
 hub_port_connect_change drivers/usb/core/hub.c:5335 [inline]
 port_event drivers/usb/core/hub.c:5481 [inline]
 hub_event+0x1079/0x3240 drivers/usb/core/hub.c:5563
 process_one_work+0x8ff/0x1690 kernel/workqueue.c:2264
 worker_thread+0x82/0xb50 kernel/workqueue.c:2410
 kthread+0x31d/0x3e0 kernel/kthread.c:255
 ret_from_fork+0x24/0x30 arch/x86/entry/entry_64.S:352
INFO: task kworker/0:3:3147 blocked for more than 144 seconds.
      Not tainted 5.6.0-rc5-syzkaller #0
"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
kworker/0:3     D25208  3147      2 0x80084000
Workqueue: usb_hub_wq hub_event
Call Trace:
 schedule+0xc4/0x2b0 kernel/sched/core.c:4154
 schedule_timeout+0x6b5/0xe80 kernel/time/timer.c:1871
 do_wait_for_common kernel/sched/completion.c:83 [inline]
 __wait_for_common kernel/sched/completion.c:104 [inline]
 wait_for_common kernel/sched/completion.c:115 [inline]
 wait_for_completion+0x25f/0x3c0 kernel/sched/completion.c:136
 cleanup_rng drivers/char/hw_random/core.c:81 [inline]
 kref_put include/linux/kref.h:65 [inline]
 drop_current_rng+0x79/0xb0 drivers/char/hw_random/core.c:109
 set_current_rng+0x1fc/0x360 drivers/char/hw_random/core.c:96
 hwrng_register+0x358/0x530 drivers/char/hw_random/core.c:505
 chaoskey_probe+0x6c8/0xb27 drivers/usb/misc/chaoskey.c:205
 usb_probe_interface+0x277/0x840 drivers/usb/core/driver.c:361
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_set_configuration+0xc81/0x1940 drivers/usb/core/message.c:2023
 generic_probe+0x61/0x8a drivers/usb/core/generic.c:210
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_new_device+0x866/0x14e0 drivers/usb/core/hub.c:2548
 hub_port_connect drivers/usb/core/hub.c:5195 [inline]
 hub_port_connect_change drivers/usb/core/hub.c:5335 [inline]
 port_event drivers/usb/core/hub.c:5481 [inline]
 hub_event+0x1079/0x3240 drivers/usb/core/hub.c:5563
 process_one_work+0x8ff/0x1690 kernel/workqueue.c:2264
 worker_thread+0x82/0xb50 kernel/workqueue.c:2410
 kthread+0x31d/0x3e0 kernel/kthread.c:255
 ret_from_fork+0x24/0x30 arch/x86/entry/entry_64.S:352
INFO: task kworker/0:4:8715 blocked for more than 145 seconds.
      Not tainted 5.6.0-rc5-syzkaller #0
"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
kworker/0:4     D25528  8715      2 0x80084000
Workqueue: usb_hub_wq hub_event
Call Trace:
 schedule+0xc4/0x2b0 kernel/sched/core.c:4154
 schedule_preempt_disabled+0xf/0x20 kernel/sched/core.c:4213
 __mutex_lock_common kernel/locking/mutex.c:1033 [inline]
 __mutex_lock+0x8db/0x1400 kernel/locking/mutex.c:1103
 hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
 chaoskey_probe+0x6c8/0xb27 drivers/usb/misc/chaoskey.c:205
 usb_probe_interface+0x277/0x840 drivers/usb/core/driver.c:361
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_set_configuration+0xc81/0x1940 drivers/usb/core/message.c:2023
 generic_probe+0x61/0x8a drivers/usb/core/generic.c:210
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_new_device+0x866/0x14e0 drivers/usb/core/hub.c:2548
 hub_port_connect drivers/usb/core/hub.c:5195 [inline]
 hub_port_connect_change drivers/usb/core/hub.c:5335 [inline]
 port_event drivers/usb/core/hub.c:5481 [inline]
 hub_event+0x1079/0x3240 drivers/usb/core/hub.c:5563
 process_one_work+0x8ff/0x1690 kernel/workqueue.c:2264
 worker_thread+0x82/0xb50 kernel/workqueue.c:2410
 kthread+0x31d/0x3e0 kernel/kthread.c:255
 ret_from_fork+0x24/0x30 arch/x86/entry/entry_64.S:352
INFO: task kworker/0:5:10175 blocked for more than 145 seconds.
      Not tainted 5.6.0-rc5-syzkaller #0
"echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
kworker/0:5     D24144 10175      2 0x80084000
Workqueue: usb_hub_wq hub_event
Call Trace:
 schedule+0xc4/0x2b0 kernel/sched/core.c:4154
 schedule_preempt_disabled+0xf/0x20 kernel/sched/core.c:4213
 __mutex_lock_common kernel/locking/mutex.c:1033 [inline]
 __mutex_lock+0x8db/0x1400 kernel/locking/mutex.c:1103
 hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
 chaoskey_probe+0x6c8/0xb27 drivers/usb/misc/chaoskey.c:205
 usb_probe_interface+0x277/0x840 drivers/usb/core/driver.c:361
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_set_configuration+0xc81/0x1940 drivers/usb/core/message.c:2023
 generic_probe+0x61/0x8a drivers/usb/core/generic.c:210
 really_probe+0x20b/0xb00 drivers/base/dd.c:551
 driver_probe_device+0x259/0x370 drivers/base/dd.c:724
 bus_for_each_drv+0x118/0x1b0 drivers/base/bus.c:431
 __device_attach+0x1be/0x2e0 drivers/base/dd.c:897
 bus_probe_device+0x19e/0x250 drivers/base/bus.c:491
 device_add+0x10f7/0x1920 drivers/base/core.c:2500
 usb_new_device+0x866/0x14e0 drivers/usb/core/hub.c:2548
 hub_port_connect drivers/usb/core/hub.c:5195 [inline]
 hub_port_connect_change drivers/usb/core/hub.c:5335 [inline]
 port_event drivers/usb/core/hub.c:5481 [inline]
 hub_event+0x1079/0x3240 drivers/usb/core/hub.c:5563
 process_one_work+0x8ff/0x1690 kernel/workqueue.c:2264
 worker_thread+0x82/0xb50 kernel/workqueue.c:2410
 kthread+0x31d/0x3e0 kernel/kthread.c:255
 ret_from_fork+0x24/0x30 arch/x86/entry/entry_64.S:352

Showing all locks held in the system:
6 locks held by kworker/0:0/5:
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: __write_once_size include/linux/compiler.h:226 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: arch_atomic64_set arch/x86/include/asm/atomic64_64.h:34 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic64_set include/asm-generic/atomic-instrumented.h:855 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic_long_set include/asm-generic/atomic-long.h:40 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_data kernel/workqueue.c:615 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_pool_and_clear_pending kernel/workqueue.c:642 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: process_one_work+0x80b/0x1690 kernel/workqueue.c:2235
 #1: ffffc90000cbfe00 ((work_completion)(&hub->events)){+.+.}, at: process_one_work+0x840/0x1690 kernel/workqueue.c:2239
 #2: ffff8880a7fa0200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #2: ffff8880a7fa0200 (&dev->mutex){....}, at: hub_event+0x143/0x3240 drivers/usb/core/hub.c:5509
 #3: ffff8880980b2200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #3: ffff8880980b2200 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #4: ffff8880ab83f190 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #4: ffff8880ab83f190 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #5: ffffffff8afebda0 (rng_mutex){+.+.}, at: hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
6 locks held by kworker/0:1/7:
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: __write_once_size include/linux/compiler.h:226 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: arch_atomic64_set arch/x86/include/asm/atomic64_64.h:34 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic64_set include/asm-generic/atomic-instrumented.h:855 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic_long_set include/asm-generic/atomic-long.h:40 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_data kernel/workqueue.c:615 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_pool_and_clear_pending kernel/workqueue.c:642 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: process_one_work+0x80b/0x1690 kernel/workqueue.c:2235
 #1: ffffc90000cdfe00 ((work_completion)(&hub->events)){+.+.}, at: process_one_work+0x840/0x1690 kernel/workqueue.c:2239
 #2: ffff88823606d200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #2: ffff88823606d200 (&dev->mutex){....}, at: hub_event+0x143/0x3240 drivers/usb/core/hub.c:5509
 #3: ffff8880af4de200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #3: ffff8880af4de200 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #4: ffff8880a8e5a190 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #4: ffff8880a8e5a190 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #5: ffffffff8afebda0 (rng_mutex){+.+.}, at: hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
1 lock held by khungtaskd/1556:
 #0: ffffffff8a2e1100 (rcu_read_lock){....}, at: debug_show_all_locks+0x52/0x2b9 kernel/locking/lockdep.c:5331
6 locks held by kworker/1:4/3141:
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: __write_once_size include/linux/compiler.h:226 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: arch_atomic64_set arch/x86/include/asm/atomic64_64.h:34 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic64_set include/asm-generic/atomic-instrumented.h:855 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic_long_set include/asm-generic/atomic-long.h:40 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_data kernel/workqueue.c:615 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_pool_and_clear_pending kernel/workqueue.c:642 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: process_one_work+0x80b/0x1690 kernel/workqueue.c:2235
 #1: ffffc90001a37e00 ((work_completion)(&hub->events)){+.+.}, at: process_one_work+0x840/0x1690 kernel/workqueue.c:2239
 #2: ffff8880a7f93200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #2: ffff8880a7f93200 (&dev->mutex){....}, at: hub_event+0x143/0x3240 drivers/usb/core/hub.c:5509
 #3: ffff8880ac26f200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #3: ffff8880ac26f200 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #4: ffff88809d3b8190 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #4: ffff88809d3b8190 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #5: ffffffff8afebda0 (rng_mutex){+.+.}, at: hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
6 locks held by kworker/0:3/3147:
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: __write_once_size include/linux/compiler.h:226 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: arch_atomic64_set arch/x86/include/asm/atomic64_64.h:34 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic64_set include/asm-generic/atomic-instrumented.h:855 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic_long_set include/asm-generic/atomic-long.h:40 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_data kernel/workqueue.c:615 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_pool_and_clear_pending kernel/workqueue.c:642 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: process_one_work+0x80b/0x1690 kernel/workqueue.c:2235
 #1: ffffc900010d7e00 ((work_completion)(&hub->events)){+.+.}, at: process_one_work+0x840/0x1690 kernel/workqueue.c:2239
 #2: ffff8880a7e1a200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #2: ffff8880a7e1a200 (&dev->mutex){....}, at: hub_event+0x143/0x3240 drivers/usb/core/hub.c:5509
 #3: ffff888096a7d200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #3: ffff888096a7d200 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #4: ffff8880abaaf190 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #4: ffff8880abaaf190 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #5: ffffffff8afebda0 (rng_mutex){+.+.}, at: hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
1 lock held by in:imklog/8073:
 #0: ffff8880ac21ee20 (&f->f_pos_lock){+.+.}, at: __fdget_pos+0x96/0xb0 fs/file.c:821
3 locks held by rs:main Q:Reg/8075:
 #0: ffff8880b9e522d8 (&rq->lock){-.-.}, at: rq_lock kernel/sched/sched.h:1215 [inline]
 #0: ffff8880b9e522d8 (&rq->lock){-.-.}, at: __schedule+0x2b5/0x1f90 kernel/sched/core.c:4028
 #1: ffffffff8a2e1100 (rcu_read_lock){....}, at: trace_sched_stat_runtime include/trace/events/sched.h:435 [inline]
 #1: ffffffff8a2e1100 (rcu_read_lock){....}, at: update_curr+0x2ec/0x860 kernel/sched/fair.c:859
 #2: ffff888091ea67c8 (&sb->s_type->i_mutex_key#10){+.+.}, at: inode_lock include/linux/fs.h:791 [inline]
 #2: ffff888091ea67c8 (&sb->s_type->i_mutex_key#10){+.+.}, at: ext4_buffered_write_iter+0x94/0x3d0 fs/ext4/file.c:264
6 locks held by kworker/0:4/8715:
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: __write_once_size include/linux/compiler.h:226 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: arch_atomic64_set arch/x86/include/asm/atomic64_64.h:34 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic64_set include/asm-generic/atomic-instrumented.h:855 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic_long_set include/asm-generic/atomic-long.h:40 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_data kernel/workqueue.c:615 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_pool_and_clear_pending kernel/workqueue.c:642 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: process_one_work+0x80b/0x1690 kernel/workqueue.c:2235
 #1: ffffc90001f17e00 ((work_completion)(&hub->events)){+.+.}, at: process_one_work+0x840/0x1690 kernel/workqueue.c:2239
 #2: ffff8882360c2200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #2: ffff8882360c2200 (&dev->mutex){....}, at: hub_event+0x143/0x3240 drivers/usb/core/hub.c:5509
 #3: ffff8880b0578200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #3: ffff8880b0578200 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #4: ffff8880a88e0190 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #4: ffff8880a88e0190 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #5: ffffffff8afebda0 (rng_mutex){+.+.}, at: hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478
6 locks held by kworker/0:5/10175:
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: __write_once_size include/linux/compiler.h:226 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: arch_atomic64_set arch/x86/include/asm/atomic64_64.h:34 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic64_set include/asm-generic/atomic-instrumented.h:855 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: atomic_long_set include/asm-generic/atomic-long.h:40 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_data kernel/workqueue.c:615 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: set_work_pool_and_clear_pending kernel/workqueue.c:642 [inline]
 #0: ffff8880af6ec528 ((wq_completion)usb_hub_wq){+.+.}, at: process_one_work+0x80b/0x1690 kernel/workqueue.c:2235
 #1: ffffc9000a107e00 ((work_completion)(&hub->events)){+.+.}, at: process_one_work+0x840/0x1690 kernel/workqueue.c:2239
 #2: ffff888236042200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #2: ffff888236042200 (&dev->mutex){....}, at: hub_event+0x143/0x3240 drivers/usb/core/hub.c:5509
 #3: ffff8880b1fe8200 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #3: ffff8880b1fe8200 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #4: ffff8880afc8c190 (&dev->mutex){....}, at: device_lock include/linux/device.h:771 [inline]
 #4: ffff8880afc8c190 (&dev->mutex){....}, at: __device_attach+0x76/0x2e0 drivers/base/dd.c:874
 #5: ffffffff8afebda0 (rng_mutex){+.+.}, at: hwrng_register+0x6b/0x530 drivers/char/hw_random/core.c:478

=============================================

NMI backtrace for cpu 1
CPU: 1 PID: 1556 Comm: khungtaskd Not tainted 5.6.0-rc5-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x96/0xe0 lib/dump_stack.c:118
 nmi_cpu_backtrace.cold.6+0x2e/0x33 lib/nmi_backtrace.c:101
 nmi_trigger_cpumask_backtrace+0x183/0x1ac lib/nmi_backtrace.c:62
 trigger_all_cpu_backtrace include/linux/nmi.h:146 [inline]
 check_hung_uninterruptible_tasks kernel/hung_task.c:205 [inline]
 watchdog+0x69d/0xd50 kernel/hung_task.c:289
 kthread+0x31d/0x3e0 kernel/kthread.c:255
 ret_from_fork+0x24/0x30 arch/x86/entry/entry_64.S:352
Sending NMI from CPU 1 to CPUs 0:
NMI backtrace for cpu 0 skipped: idling at native_safe_halt arch/x86/include/asm/irqflags.h:60 [inline]
NMI backtrace for cpu 0 skipped: idling at arch_safe_halt arch/x86/include/asm/irqflags.h:103 [inline]
NMI backtrace for cpu 0 skipped: idling at default_idle+0x25/0x310 arch/x86/kernel/process.c:695

