bisecting cause commit starting from bed3c0d84e7e25c8e0964d297794f4c215b01f33
building syzkaller on 34bf9440bd06034f86b5d9ac8afbf078129cbdae
testing commit bed3c0d84e7e25c8e0964d297794f4c215b01f33 with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in vprintk_emit
run #1: crashed: possible deadlock in console_unlock
run #2: crashed: possible deadlock in console_unlock
run #3: crashed: possible deadlock in console_unlock
run #4: crashed: possible deadlock in vprintk_emit
run #5: crashed: possible deadlock in vprintk_emit
run #6: crashed: possible deadlock in vprintk_emit
run #7: crashed: possible deadlock in console_unlock
run #8: crashed: possible deadlock in console_unlock
run #9: crashed: possible deadlock in console_unlock
testing release v5.1
testing commit e93c9c99a629c61837d5a7fc2120cd2b6c70dbdd with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in console_unlock
run #1: crashed: possible deadlock in vprintk_emit
run #2: crashed: possible deadlock in vprintk_emit
run #3: crashed: possible deadlock in vprintk_emit
run #4: crashed: possible deadlock in console_unlock
run #5: crashed: possible deadlock in console_unlock
run #6: crashed: possible deadlock in vprintk_emit
run #7: crashed: possible deadlock in console_unlock
run #8: crashed: possible deadlock in vprintk_emit
run #9: crashed: possible deadlock in console_unlock
testing release v5.0
testing commit 1c163f4c7b3f621efff9b28a47abb36f7378d783 with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in vprintk_emit
run #1: crashed: possible deadlock in vprintk_emit
run #2: crashed: possible deadlock in console_unlock
run #3: crashed: possible deadlock in vprintk_emit
run #4: crashed: possible deadlock in console_unlock
run #5: crashed: possible deadlock in console_unlock
run #6: crashed: possible deadlock in console_unlock
run #7: crashed: possible deadlock in vprintk_emit
run #8: crashed: possible deadlock in vprintk_emit
run #9: crashed: possible deadlock in vprintk_emit
testing release v4.20
testing commit 8fe28cb58bcb235034b64cbbb7550a8a43fd88be with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in console_unlock
run #1: crashed: possible deadlock in vprintk_emit
run #2: crashed: possible deadlock in vprintk_emit
run #3: crashed: possible deadlock in vprintk_emit
run #4: crashed: possible deadlock in vprintk_emit
run #5: crashed: possible deadlock in vprintk_emit
run #6: crashed: possible deadlock in console_unlock
run #7: crashed: possible deadlock in console_unlock
run #8: crashed: possible deadlock in console_unlock
run #9: crashed: possible deadlock in vprintk_emit
testing release v4.19
testing commit 84df9525b0c27f3ebc2ebb1864fa62a97fdedb7d with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in console_unlock
run #1: crashed: possible deadlock in console_unlock
run #2: crashed: possible deadlock in console_unlock
run #3: crashed: possible deadlock in vprintk_emit
run #4: crashed: possible deadlock in vprintk_emit
run #5: crashed: possible deadlock in console_unlock
run #6: crashed: possible deadlock in console_unlock
run #7: crashed: possible deadlock in vprintk_emit
run #8: crashed: possible deadlock in vprintk_emit
run #9: crashed: possible deadlock in console_unlock
testing release v4.18
testing commit 94710cac0ef4ee177a63b5227664b38c95bbf703 with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in console_unlock
run #1: crashed: possible deadlock in console_unlock
run #2: crashed: possible deadlock in vprintk_emit
run #3: crashed: possible deadlock in vprintk_emit
run #4: crashed: possible deadlock in vprintk_emit
run #5: crashed: possible deadlock in console_unlock
run #6: crashed: possible deadlock in console_unlock
run #7: crashed: possible deadlock in console_unlock
run #8: crashed: possible deadlock in vprintk_emit
run #9: crashed: possible deadlock in console_unlock
testing release v4.17
testing commit 29dcea88779c856c7dc92040a0c01233263101d4 with gcc (GCC) 8.1.0
all runs: OK
# git bisect start v4.18 v4.17
Bisecting: 7032 revisions left to test after this (roughly 13 steps)
[3036bc45364f98515a2c446d7fac2c34dcfbeff4] Merge tag 'media/v4.18-2' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media
testing commit 3036bc45364f98515a2c446d7fac2c34dcfbeff4 with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in console_unlock
run #1: crashed: possible deadlock in vprintk_emit
run #2: crashed: possible deadlock in console_unlock
run #3: crashed: possible deadlock in console_unlock
run #4: crashed: possible deadlock in console_unlock
run #5: boot failed: KASAN: use-after-free Write in call_usermodehelper_exec_work
run #6: boot failed: KASAN: use-after-free Write in call_usermodehelper_exec_work
run #7: boot failed: KASAN: use-after-free Write in call_usermodehelper_exec_work
run #8: boot failed: KASAN: use-after-free Write in call_usermodehelper_exec_work
run #9: boot failed: KASAN: use-after-free Write in call_usermodehelper_exec_work
# git bisect bad 3036bc45364f98515a2c446d7fac2c34dcfbeff4
Bisecting: 3644 revisions left to test after this (roughly 12 steps)
[135c5504a600ff9b06e321694fbcac78a9530cd4] Merge tag 'drm-next-2018-06-06-1' of git://anongit.freedesktop.org/drm/drm
testing commit 135c5504a600ff9b06e321694fbcac78a9530cd4 with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in console_unlock
run #1: crashed: possible deadlock in console_unlock
run #2: crashed: possible deadlock in console_unlock
run #3: crashed: possible deadlock in vprintk_emit
run #4: crashed: possible deadlock in console_unlock
run #5: crashed: possible deadlock in vprintk_emit
run #6: crashed: possible deadlock in vprintk_emit
run #7: crashed: possible deadlock in console_unlock
run #8: crashed: possible deadlock in console_unlock
run #9: crashed: possible deadlock in console_unlock
# git bisect bad 135c5504a600ff9b06e321694fbcac78a9530cd4
Bisecting: 1901 revisions left to test after this (roughly 11 steps)
[5231804cf9e584f3e7e763a0d6d2fffe011c1bce] Merge tag 'leds_for_4.18-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/j.anaszewski/linux-leds
testing commit 5231804cf9e584f3e7e763a0d6d2fffe011c1bce with gcc (GCC) 8.1.0
all runs: OK
# git bisect good 5231804cf9e584f3e7e763a0d6d2fffe011c1bce
Bisecting: 950 revisions left to test after this (roughly 10 steps)
[315852b422972e6ebb1dfddaadada09e46a2681a] drm: rcar-du: Fix build failure
testing commit 315852b422972e6ebb1dfddaadada09e46a2681a with gcc (GCC) 8.1.0
all runs: OK
# git bisect good 315852b422972e6ebb1dfddaadada09e46a2681a
Bisecting: 464 revisions left to test after this (roughly 9 steps)
[ec064d3c6b40697fd72f4b1eeabbf293b7947a04] Merge tag 'driver-core-4.18-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/driver-core
testing commit ec064d3c6b40697fd72f4b1eeabbf293b7947a04 with gcc (GCC) 8.1.0
all runs: OK
# git bisect good ec064d3c6b40697fd72f4b1eeabbf293b7947a04
Bisecting: 242 revisions left to test after this (roughly 8 steps)
[ce234ccc03cfee004e168a1ae4b9d0cfb1974a32] Merge tag 'drm/tegra/for-4.18-rc1' of git://anongit.freedesktop.org/tegra/linux into drm-next
testing commit ce234ccc03cfee004e168a1ae4b9d0cfb1974a32 with gcc (GCC) 8.1.0
all runs: OK
# git bisect good ce234ccc03cfee004e168a1ae4b9d0cfb1974a32
Bisecting: 121 revisions left to test after this (roughly 7 steps)
[789f3317ed33e34fa97c8918c075c68a62e51a4d] drm/amdgpu: further optimize amdgpu_vm_handle_moved
testing commit 789f3317ed33e34fa97c8918c075c68a62e51a4d with gcc (GCC) 8.1.0
all runs: OK
# git bisect good 789f3317ed33e34fa97c8918c075c68a62e51a4d
Bisecting: 61 revisions left to test after this (roughly 6 steps)
[476d9ff653b3b2d7f3140c56da771f2b4a3d1c0a] Merge branch 'for-4.17-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/tj/libata
testing commit 476d9ff653b3b2d7f3140c56da771f2b4a3d1c0a with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in console_unlock
run #1: crashed: possible deadlock in console_unlock
run #2: crashed: possible deadlock in console_unlock
run #3: crashed: possible deadlock in vprintk_emit
run #4: crashed: possible deadlock in vprintk_emit
run #5: crashed: possible deadlock in console_unlock
run #6: crashed: possible deadlock in vprintk_emit
run #7: crashed: possible deadlock in console_unlock
run #8: crashed: possible deadlock in vprintk_emit
run #9: crashed: possible deadlock in vprintk_emit
# git bisect bad 476d9ff653b3b2d7f3140c56da771f2b4a3d1c0a
Bisecting: 29 revisions left to test after this (roughly 5 steps)
[2ccdb55e52a126aa51a64a2244d8b60c16f370cc] tty: serial: msm_serial: Add __maybe_unused to suspend/resume callbacks
testing commit 2ccdb55e52a126aa51a64a2244d8b60c16f370cc with gcc (GCC) 8.1.0
all runs: OK
# git bisect good 2ccdb55e52a126aa51a64a2244d8b60c16f370cc
Bisecting: 14 revisions left to test after this (roughly 4 steps)
[a451debb4173bfe3b06d2ac926c4903eadc236d4] serial/aspeed-vuart: fix a couple mod_timer() calls
testing commit a451debb4173bfe3b06d2ac926c4903eadc236d4 with gcc (GCC) 8.1.0
all runs: OK
# git bisect good a451debb4173bfe3b06d2ac926c4903eadc236d4
Bisecting: 7 revisions left to test after this (roughly 3 steps)
[d8db840dcb9e6d9d7f3d2527a3f96c6bb07414f7] serial: samsung: check DMA engine capabilities before using DMA mode
testing commit d8db840dcb9e6d9d7f3d2527a3f96c6bb07414f7 with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in console_unlock
run #1: crashed: possible deadlock in vprintk_emit
run #2: crashed: possible deadlock in vprintk_emit
run #3: crashed: possible deadlock in console_unlock
run #4: crashed: possible deadlock in console_unlock
run #5: crashed: possible deadlock in console_unlock
run #6: crashed: possible deadlock in console_unlock
run #7: crashed: possible deadlock in vprintk_emit
run #8: crashed: possible deadlock in vprintk_emit
run #9: crashed: possible deadlock in console_unlock
# git bisect bad d8db840dcb9e6d9d7f3d2527a3f96c6bb07414f7
Bisecting: 3 revisions left to test after this (roughly 2 steps)
[13dc04d0e5fdc25c8f713ad23fdce51cf2bf96ba] serial: 8250: omap: Fix idling of clocks for unused uarts
testing commit 13dc04d0e5fdc25c8f713ad23fdce51cf2bf96ba with gcc (GCC) 8.1.0
all runs: OK
# git bisect good 13dc04d0e5fdc25c8f713ad23fdce51cf2bf96ba
Bisecting: 1 revision left to test after this (roughly 1 step)
[638a6f4ebeba82ad098fdfa4449011074d3e2673] tty: serial: msm_geni_serial: Fix TX infinite loop
testing commit 638a6f4ebeba82ad098fdfa4449011074d3e2673 with gcc (GCC) 8.1.0
all runs: OK
# git bisect good 638a6f4ebeba82ad098fdfa4449011074d3e2673
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[b6da31b2c07c46f2dcad1d86caa835227a16d9ff] tty: Fix data race in tty_insert_flip_string_fixed_flag
testing commit b6da31b2c07c46f2dcad1d86caa835227a16d9ff with gcc (GCC) 8.1.0
run #0: crashed: possible deadlock in vprintk_emit
run #1: crashed: possible deadlock in console_unlock
run #2: crashed: possible deadlock in console_unlock
run #3: crashed: possible deadlock in vprintk_emit
run #4: crashed: possible deadlock in vprintk_emit
run #5: crashed: possible deadlock in console_unlock
run #6: crashed: possible deadlock in vprintk_emit
run #7: crashed: possible deadlock in vprintk_emit
run #8: crashed: possible deadlock in vprintk_emit
run #9: crashed: possible deadlock in console_unlock
# git bisect bad b6da31b2c07c46f2dcad1d86caa835227a16d9ff
b6da31b2c07c46f2dcad1d86caa835227a16d9ff is the first bad commit
commit b6da31b2c07c46f2dcad1d86caa835227a16d9ff
Author: DaeRyong Jeong <threeearcat@gmail.com>
Date:   Tue May 1 00:27:04 2018 +0900

    tty: Fix data race in tty_insert_flip_string_fixed_flag
    
    Unlike normal serials, in pty layer, there is no guarantee that multiple
    threads don't insert input characters at the same time. If it is happened,
    tty_insert_flip_string_fixed_flag can be executed concurrently. This can
    lead slab out-of-bounds write in tty_insert_flip_string_fixed_flag.
    
    Call sequences are as follows.
    CPU0                                    CPU1
    n_tty_ioctl_helper                      n_tty_ioctl_helper
    __start_tty                             tty_send_xchar
    tty_wakeup                              pty_write
    n_hdlc_tty_wakeup                       tty_insert_flip_string
    n_hdlc_send_frames                      tty_insert_flip_string_fixed_flag
    pty_write
    tty_insert_flip_string
    tty_insert_flip_string_fixed_flag
    
    To fix the race, acquire port->lock in pty_write() before it inserts input
    characters to tty buffer. It prevents multiple threads from inserting
    input characters concurrently.
    
    The crash log is as follows:
    BUG: KASAN: slab-out-of-bounds in tty_insert_flip_string_fixed_flag+0xb5/
    0x130 drivers/tty/tty_buffer.c:316 at addr ffff880114fcc121
    Write of size 1792 by task syz-executor0/30017
    CPU: 1 PID: 30017 Comm: syz-executor0 Not tainted 4.8.0 #1
    Hardware name: QEMU Standard PC (i440FX + PIIX, 1996),
    BIOS rel-1.8.2-0-g33fbe13 by qemu-project.org 04/01/2014
     0000000000000000 ffff88011638f888 ffffffff81694cc3 ffff88007d802140
     ffff880114fcb300 ffff880114fcc300 ffff880114fcb300 ffff88011638f8b0
     ffffffff8130075c ffff88011638f940 ffff88007d802140 ffff880194fcc121
    Call Trace:
     __dump_stack lib/dump_stack.c:15 [inline]
     dump_stack+0xb3/0x110 lib/dump_stack.c:51
     kasan_object_err+0x1c/0x70 mm/kasan/report.c:156
     print_address_description mm/kasan/report.c:194 [inline]
     kasan_report_error+0x1f7/0x4e0 mm/kasan/report.c:283
     kasan_report+0x36/0x40 mm/kasan/report.c:303
     check_memory_region_inline mm/kasan/kasan.c:292 [inline]
     check_memory_region+0x13e/0x1a0 mm/kasan/kasan.c:299
     memcpy+0x37/0x50 mm/kasan/kasan.c:335
     tty_insert_flip_string_fixed_flag+0xb5/0x130 drivers/tty/tty_buffer.c:316
     tty_insert_flip_string include/linux/tty_flip.h:35 [inline]
     pty_write+0x7f/0xc0 drivers/tty/pty.c:115
     n_hdlc_send_frames+0x1d4/0x3b0 drivers/tty/n_hdlc.c:419
     n_hdlc_tty_wakeup+0x73/0xa0 drivers/tty/n_hdlc.c:496
     tty_wakeup+0x92/0xb0 drivers/tty/tty_io.c:601
     __start_tty.part.26+0x66/0x70 drivers/tty/tty_io.c:1018
     __start_tty+0x34/0x40 drivers/tty/tty_io.c:1013
     n_tty_ioctl_helper+0x146/0x1e0 drivers/tty/tty_ioctl.c:1138
     n_hdlc_tty_ioctl+0xb3/0x2b0 drivers/tty/n_hdlc.c:794
     tty_ioctl+0xa85/0x16d0 drivers/tty/tty_io.c:2992
     vfs_ioctl fs/ioctl.c:43 [inline]
     do_vfs_ioctl+0x13e/0xba0 fs/ioctl.c:679
     SYSC_ioctl fs/ioctl.c:694 [inline]
     SyS_ioctl+0x8f/0xc0 fs/ioctl.c:685
     entry_SYSCALL_64_fastpath+0x1f/0xbd
    
    Signed-off-by: DaeRyong Jeong <threeearcat@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

:040000 040000 f05f38bf40a62a8555e15f3c2a9ab6a01fca19fe 8972675be62c0612095063e67d5dbd3b0b96624b M	drivers
revisions tested: 21, total time: 5h50m7.530097728s (build: 1h50m5.173975837s, test: 3h54m36.488373136s)
first bad commit: b6da31b2c07c46f2dcad1d86caa835227a16d9ff tty: Fix data race in tty_insert_flip_string_fixed_flag
cc: ["gregkh@linuxfoundation.org" "jslaby@suse.com" "linux-kernel@vger.kernel.org" "threeearcat@gmail.com"]
crash: possible deadlock in console_unlock
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32fc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6746 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
======================================================
WARNING: possible circular locking dependency detected
4.17.0-rc3+ #1 Not tainted
------------------------------------------------------
syz-executor.3/6744 is trying to acquire lock:
        (ptrval) (console_owner){-...}, at: log_next kernel/printk/printk.c:492 [inline]
        (ptrval) (console_owner){-...}, at: console_unlock+0x390/0xe10 kernel/printk/printk.c:2382

but task is already holding lock:
        (ptrval) (&(&port->lock)->rlock){-.-.}, at: pty_write+0xbf/0x200 drivers/tty/pty.c:119

which lock already depends on the new lock.


the existing dependency chain (in reverse order) is:

-> #2 (&(&port->lock)->rlock){-.-.}:
       __raw_spin_lock_irqsave include/linux/spinlock_api_smp.h:110 [inline]
       _raw_spin_lock_irqsave+0x99/0xd0 kernel/locking/spinlock.c:152
       tty_port_tty_get+0x1b/0x70 drivers/tty/tty_port.c:288
       tty_port_default_wakeup+0xa/0x30 drivers/tty/tty_port.c:47
       tty_port_tty_wakeup+0x53/0x70 drivers/tty/tty_port.c:390
       uart_write_wakeup+0x37/0x50 drivers/tty/serial/serial_core.c:103
       serial8250_tx_chars+0x3dc/0x9d0 drivers/tty/serial/8250/8250_port.c:1808
       serial8250_handle_irq.part.25+0x151/0x1d0 drivers/tty/serial/8250/8250_port.c:1881
       serial8250_handle_irq drivers/tty/serial/8250/8250_port.c:1867 [inline]
       serial8250_default_handle_irq+0x7c/0xe0 drivers/tty/serial/8250/8250_port.c:1897
       serial8250_interrupt+0xd3/0x170 drivers/tty/serial/8250/8250_core.c:125
       __handle_irq_event_percpu+0xff/0x700 kernel/irq/handle.c:149
       handle_irq_event_percpu+0x6c/0x140 kernel/irq/handle.c:189
       handle_irq_event+0xa2/0x130 kernel/irq/handle.c:206
       handle_edge_irq+0x1d6/0x740 kernel/irq/chip.c:791
       generic_handle_irq_desc include/linux/irqdesc.h:159 [inline]
       handle_irq+0x37/0x50 arch/x86/kernel/irq_64.c:77
       do_IRQ+0x84/0x1a0 arch/x86/kernel/irq.c:245
       ret_from_intr+0x0/0x1e
       native_safe_halt+0x6/0x10 arch/x86/include/asm/irqflags.h:54
       arch_safe_halt arch/x86/include/asm/paravirt.h:94 [inline]
       default_idle+0x4f/0x350 arch/x86/kernel/process.c:354
       arch_cpu_idle+0xa/0x10 arch/x86/kernel/process.c:345
       default_idle_call+0x6d/0x90 kernel/sched/idle.c:93
       cpuidle_idle_call kernel/sched/idle.c:153 [inline]
       do_idle+0x3f1/0x5a0 kernel/sched/idle.c:262
       cpu_startup_entry+0xc8/0xe0 kernel/sched/idle.c:368
       rest_init+0xdd/0xe0 init/main.c:441
       start_kernel+0x70d/0x746 init/main.c:737
       x86_64_start_reservations+0x29/0x2b arch/x86/kernel/head64.c:445
       x86_64_start_kernel+0x76/0x79 arch/x86/kernel/head64.c:426
       secondary_startup_64+0xa5/0xb0 arch/x86/kernel/head_64.S:242

-> #1 (&port_lock_key){-.-.}:
       __raw_spin_lock_irqsave include/linux/spinlock_api_smp.h:110 [inline]
       _raw_spin_lock_irqsave+0x99/0xd0 kernel/locking/spinlock.c:152
       serial8250_console_write+0x6b9/0x880 drivers/tty/serial/8250/8250_port.c:3230
       univ8250_console_write+0x4e/0x70 drivers/tty/serial/8250/8250_core.c:590
       call_console_drivers kernel/printk/printk.c:1718 [inline]
       console_unlock+0x8b2/0xe10 kernel/printk/printk.c:2395
       vprintk_emit+0x2a3/0x7e0 kernel/printk/printk.c:1907
       vprintk_default+0x1a/0x20 kernel/printk/printk.c:1947
       vprintk_func+0x2c/0xf2 kernel/printk/printk_safe.c:379
       printk+0x9a/0xc0 kernel/printk/printk.c:1980
       register_console+0x5c7/0x970 kernel/printk/printk.c:2714
       univ8250_console_init+0x1e/0x28 drivers/tty/serial/8250/8250_core.c:685
       console_init+0x38d/0x552 kernel/printk/printk.c:2798
       start_kernel+0x4b4/0x746 init/main.c:660
       x86_64_start_reservations+0x29/0x2b arch/x86/kernel/head64.c:445
       x86_64_start_kernel+0x76/0x79 arch/x86/kernel/head64.c:426
       secondary_startup_64+0xa5/0xb0 arch/x86/kernel/head_64.S:242

-> #0 (console_owner){-...}:
       lock_acquire+0x173/0x400 kernel/locking/lockdep.c:3920
       console_lock_spinning_enable kernel/printk/printk.c:1581 [inline]
       console_unlock+0x3f2/0xe10 kernel/printk/printk.c:2392
       vprintk_emit+0x2a3/0x7e0 kernel/printk/printk.c:1907
       vprintk_default+0x1a/0x20 kernel/printk/printk.c:1947
       vprintk_func+0x2c/0xf2 kernel/printk/printk_safe.c:379
       printk+0x9a/0xc0 kernel/printk/printk.c:1980
       fail_dump lib/fault-inject.c:44 [inline]
       should_fail+0x478/0x599 lib/fault-inject.c:149
       __should_failslab+0xba/0xf0 mm/failslab.c:32
       should_failslab+0x9/0x14 mm/slab_common.c:1522
       slab_pre_alloc_hook mm/slab.h:423 [inline]
       slab_alloc mm/slab.c:3378 [inline]
       __do_kmalloc mm/slab.c:3716 [inline]
       __kmalloc+0x63/0x7a0 mm/slab.c:3727
       kmalloc include/linux/slab.h:517 [inline]
       tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
       __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
       tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
       tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
       pty_write+0xf3/0x200 drivers/tty/pty.c:121
       n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
       do_tty_write drivers/tty/tty_io.c:958 [inline]
       tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
       __vfs_write+0xe3/0x860 fs/read_write.c:485
       vfs_write+0x150/0x4f0 fs/read_write.c:549
       ksys_write+0xcd/0x1b0 fs/read_write.c:598
       __do_sys_write fs/read_write.c:610 [inline]
       __se_sys_write fs/read_write.c:607 [inline]
       __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
       do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
       entry_SYSCALL_64_after_hwframe+0x49/0xbe

other info that might help us debug this:

Chain exists of:
  console_owner --> &port_lock_key --> &(&port->lock)->rlock

 Possible unsafe locking scenario:

       CPU0                    CPU1
       ----                    ----
  lock(&(&port->lock)->rlock);
                               lock(&port_lock_key);
                               lock(&(&port->lock)->rlock);
  lock(console_owner);

 *** DEADLOCK ***

6 locks held by syz-executor.3/6744:
 #0:         (ptrval) (&tty->ldisc_sem){++++}, at: ldsem_down_read+0x2d/0x40 drivers/tty/tty_ldsem.c:365
 #1:         (ptrval) (&tty->atomic_write_lock){+.+.}, at: tty_write_lock+0x19/0x50 drivers/tty/tty_io.c:884
 #2:         (ptrval) (&tty->termios_rwsem){++++}, at: n_tty_write+0x170/0x1030 drivers/tty/n_tty.c:2291
 #3:         (ptrval) (&ldata->output_lock){+.+.}, at: n_tty_write+0x89c/0x1030 drivers/tty/n_tty.c:2330
 #4:         (ptrval) (&(&port->lock)->rlock){-.-.}, at: pty_write+0xbf/0x200 drivers/tty/pty.c:119
 #5:         (ptrval) (console_lock){+.+.}, at: console_trylock_spinning kernel/printk/printk.c:1643 [inline]
 #5:         (ptrval) (console_lock){+.+.}, at: vprintk_emit+0x296/0x7e0 kernel/printk/printk.c:1906

stack backtrace:
CPU: 0 PID: 6744 Comm: syz-executor.3 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 print_circular_bug.isra.37.cold.55+0x1bd/0x27d kernel/locking/lockdep.c:1223
 check_prev_add kernel/locking/lockdep.c:1863 [inline]
 check_prevs_add kernel/locking/lockdep.c:1976 [inline]
 validate_chain kernel/locking/lockdep.c:2417 [inline]
 __lock_acquire+0x30ca/0x4950 kernel/locking/lockdep.c:3431
 lock_acquire+0x173/0x400 kernel/locking/lockdep.c:3920
 console_lock_spinning_enable kernel/printk/printk.c:1581 [inline]
 console_unlock+0x3f2/0xe10 kernel/printk/printk.c:2392
 vprintk_emit+0x2a3/0x7e0 kernel/printk/printk.c:1907
 vprintk_default+0x1a/0x20 kernel/printk/printk.c:1947
 vprintk_func+0x2c/0xf2 kernel/printk/printk_safe.c:379
 printk+0x9a/0xc0 kernel/printk/printk.c:1980
 fail_dump lib/fault-inject.c:44 [inline]
 should_fail+0x478/0x599 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007ff4e32fbc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007ff4e32fbc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32fc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
IPv6: ADDRCONF(NETDEV_UP): veth1_to_hsr: link is not ready
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
hsr0: Slave B (hsr_slave_1) is not up; please bring it up to get a fully working HSR network
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
IPv6: ADDRCONF(NETDEV_UP): hsr0: link is not ready
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
IPv6: ADDRCONF(NETDEV_CHANGE): hsr0: link becomes ready
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
IPv6: ADDRCONF(NETDEV_UP): hsr0: link is not ready
IPv6: ADDRCONF(NETDEV_CHANGE): hsr0: link becomes ready
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
IPv6: ADDRCONF(NETDEV_UP): vxcan1: link is not ready
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f3a3739fc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f3a3739fc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f3a373a06d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
kobject: 'loop3' (        (ptrval)): kobject_uevent_env
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
kobject: 'loop3' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop3'
CPU: 0 PID: 6748 Comm: syz-executor.3 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007ff4e32fbc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007ff4e32fbc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32fc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
8021q: adding VLAN 0 to HW filter on device batadv0
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
kobject: 'vlan0' (        (ptrval)): kobject_add_internal: parent: 'mesh', set: '<NULL>'
CPU: 1 PID: 6750 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
kobject: 'loop1' (        (ptrval)): kobject_uevent_env
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f3a3739fc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f3a3739fc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f3a373a06d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
IPv6: ADDRCONF(NETDEV_CHANGE): veth1_to_hsr: link becomes ready
CPU: 1 PID: 6758 Comm: syz-executor.2 Not tainted 4.17.0-rc3+ #1
IPv6: ADDRCONF(NETDEV_CHANGE): hsr_slave_1: link becomes ready
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
IPv6: ADDRCONF(NETDEV_UP): vxcan1: link is not ready
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
8021q: adding VLAN 0 to HW filter on device batadv0
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
kobject: 'vlan0' (        (ptrval)): kobject_add_internal: parent: 'mesh', set: '<NULL>'
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
IPv6: ADDRCONF(NETDEV_UP): vxcan1: link is not ready
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 1
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007fb1c46fcc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007fb1c46fcc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007fb1c46fd6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6760 Comm: syz-executor.4 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f4857159c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f4857159c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bfc8 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f485715a6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
kobject: 'loop1' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop1'
CPU: 1 PID: 6763 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
kobject: 'loop4' (        (ptrval)): kobject_uevent_env
 should_failslab+0x9/0x14 mm/slab_common.c:1522
kobject: 'loop4' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop4'
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f3a3739fc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f3a3739fc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f3a373a06d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6765 Comm: syz-executor.3 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007ff4e32dac78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007ff4e32dac90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bfc8 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32db6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
8021q: adding VLAN 0 to HW filter on device batadv0
kobject: 'vlan0' (        (ptrval)): kobject_add_internal: parent: 'mesh', set: '<NULL>'
kobject: 'loop2' (        (ptrval)): kobject_uevent_env
kobject: 'loop2' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop2'
kobject: 'loop3' (        (ptrval)): kobject_uevent_env
kobject: 'loop3' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop3'
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
kobject: 'loop0' (        (ptrval)): kobject_uevent_env
CPU: 0 PID: 6773 Comm: syz-executor.0 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
kobject: 'loop0' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop0'
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
kobject: 'loop5' (        (ptrval)): kobject_uevent_env
 __vfs_write+0xe3/0x860 fs/read_write.c:485
kobject: 'loop5' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop5'
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f0fbf2d0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f0fbf2d0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f0fbf2d16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6782 Comm: syz-executor.5 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
kobject: 'loop1' (        (ptrval)): kobject_uevent_env
 __vfs_write+0xe3/0x860 fs/read_write.c:485
kobject: 'loop1' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop1'
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
kobject: 'loop2' (        (ptrval)): kobject_uevent_env
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f1a6aab0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f1a6aab0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f1a6aab16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
kobject: 'loop2' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop2'
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
kobject: 'loop3' (        (ptrval)): kobject_uevent_env
CPU: 1 PID: 6790 Comm: syz-executor.3 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007ff4e32fbc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007ff4e32fbc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32fc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6789 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f3a3739fc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f3a3739fc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f3a373a06d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6791 Comm: syz-executor.2 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
kobject: 'loop3' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop3'
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
kobject: 'loop0' (        (ptrval)): kobject_uevent_env
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
kobject: 'loop0' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop0'
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007fb1c46fcc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007fb1c46fcc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007fb1c46fd6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6788 Comm: syz-executor.4 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f485717ac78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f485717ac90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f485717b6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6799 Comm: syz-executor.5 Not tainted 4.17.0-rc3+ #1
kobject: 'loop5' (        (ptrval)): kobject_uevent_env
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
kobject: 'loop5' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop5'
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f1a6aab0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f1a6aab0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f1a6aab16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6795 Comm: syz-executor.0 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f0fbf2d0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f0fbf2d0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f0fbf2d16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6802 Comm: syz-executor.3 Not tainted 4.17.0-rc3+ #1
kobject: 'loop3' (        (ptrval)): kobject_uevent_env
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
kobject: 'loop3' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop3'
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
kobject: 'loop4' (        (ptrval)): kobject_uevent_env
kobject: 'loop4' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop4'
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
RSP: 002b:00007ff4e32fbc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007ff4e32fbc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32fc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6807 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f3a3737ec78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f3a3737ec90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bfc8 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f3a3737f6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
CPU: 0 PID: 6810 Comm: syz-executor.4 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f485717ac78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f485717ac90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f485717b6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6811 Comm: syz-executor.2 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
kobject: 'loop0' (        (ptrval)): kobject_uevent_env
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
kobject: 'loop0' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop0'
kobject: 'loop5' (        (ptrval)): kobject_uevent_env
kobject: 'loop5' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop5'
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007fb1c46fcc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007fb1c46fcc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007fb1c46fd6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6815 Comm: syz-executor.0 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f0fbf2d0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f0fbf2d0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f0fbf2d16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
kobject: 'loop3' (        (ptrval)): kobject_uevent_env
CPU: 0 PID: 6816 Comm: syz-executor.5 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f1a6aab0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f1a6aab0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f1a6aab16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6820 Comm: syz-executor.3 Not tainted 4.17.0-rc3+ #1
kobject: 'loop3' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop3'
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
kobject: 'loop1' (        (ptrval)): kobject_uevent_env
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
kobject: 'loop1' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop1'
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
RSP: 002b:00007ff4e32fbc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007ff4e32fbc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32fc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6823 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f3a3737ec78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f3a3737ec90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bfc8 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f3a3737f6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
CPU: 1 PID: 6826 Comm: syz-executor.4 Not tainted 4.17.0-rc3+ #1
kobject: 'loop4' (        (ptrval)): kobject_uevent_env
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
kobject: 'loop4' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop4'
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
kobject: 'loop2' (        (ptrval)): kobject_uevent_env
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
kobject: 'loop2' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop2'
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f485717ac78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f485717ac90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f485717b6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
kobject: 'loop5' (        (ptrval)): kobject_uevent_env
CPU: 1 PID: 6830 Comm: syz-executor.5 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
kobject: 'loop5' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop5'
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f1a6aab0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f1a6aab0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f1a6aab16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6828 Comm: syz-executor.2 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007fb1c46fcc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007fb1c46fcc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007fb1c46fd6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6835 Comm: syz-executor.0 Not tainted 4.17.0-rc3+ #1
kobject: 'loop0' (        (ptrval)): kobject_uevent_env
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
kobject: 'loop0' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop0'
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
kobject: 'loop1' (        (ptrval)): kobject_uevent_env
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
kobject: 'loop1' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop1'
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
kobject: 'loop4' (        (ptrval)): kobject_uevent_env
kobject: 'loop4' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop4'
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f0fbf2d0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f0fbf2d0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f0fbf2d16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
CPU: 1 PID: 6840 Comm: syz-executor.4 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f485717ac78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f485717ac90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f485717b6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6843 Comm: syz-executor.3 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007ff4e32fbc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007ff4e32fbc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32fc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6845 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f3a3737ec78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f3a3737ec90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bfc8 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f3a3737f6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
CPU: 1 PID: 6847 Comm: syz-executor.5 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
kobject: 'loop3' (        (ptrval)): kobject_uevent_env
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
kobject: 'loop3' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop3'
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
kobject: 'loop5' (        (ptrval)): kobject_uevent_env
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
kobject: 'loop5' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop5'
 __vfs_write+0xe3/0x860 fs/read_write.c:485
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f1a6aab0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f1a6aab0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f1a6aab16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6855 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
kobject: 'loop2' (        (ptrval)): kobject_uevent_env
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
kobject: 'loop2' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop2'
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
kobject: 'loop0' (        (ptrval)): kobject_uevent_env
 __vfs_write+0xe3/0x860 fs/read_write.c:485
kobject: 'loop0' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop0'
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f3a3739fc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
RAX: ffffffffffffffda RBX: 00007f3a3739fc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f3a373a06d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6858 Comm: syz-executor.2 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007fb1c46dbc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007fb1c46dbc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bfc8 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007fb1c46dc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
CPU: 0 PID: 6863 Comm: syz-executor.5 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f1a6aab0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f1a6aab0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f1a6aab16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6853 Comm: syz-executor.4 Not tainted 4.17.0-rc3+ #1
kobject: 'loop1' (        (ptrval)): kobject_uevent_env
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
kobject: 'loop1' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop1'
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
kobject: 'loop3' (        (ptrval)): kobject_uevent_env
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
kobject: 'loop3' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop3'
kobject: 'loop5' (        (ptrval)): kobject_uevent_env
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
kobject: 'loop5' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop5'
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
kobject: 'loop0' (        (ptrval)): kobject_uevent_env
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
kobject: 'loop0' (        (ptrval)): fill_kobj_path: path = '/devices/virtual/block/loop0'
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f485717ac78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f485717ac90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f485717b6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
FAULT_INJECTION: forcing a failure.
name failslab, interval 1, probability 0, space 0, times 0
CPU: 1 PID: 6861 Comm: syz-executor.3 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007ff4e32fbc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007ff4e32fbc90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007ff4e32fc6d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 0 PID: 6864 Comm: syz-executor.0 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
FAULT_INJECTION: forcing a failure.
name fail_page_alloc, interval 1, probability 0, space 0, times 0
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 __should_failslab+0xba/0xf0 mm/failslab.c:32
 should_failslab+0x9/0x14 mm/slab_common.c:1522
 slab_pre_alloc_hook mm/slab.h:423 [inline]
 slab_alloc mm/slab.c:3378 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x63/0x7a0 mm/slab.c:3727
 kmalloc include/linux/slab.h:517 [inline]
 tty_buffer_alloc drivers/tty/tty_buffer.c:170 [inline]
 __tty_buffer_request_room+0x1b3/0x550 drivers/tty/tty_buffer.c:268
 tty_insert_flip_string_fixed_flag+0x77/0x1a0 drivers/tty/tty_buffer.c:313
 tty_insert_flip_string include/linux/tty_flip.h:37 [inline]
 pty_write+0xf3/0x200 drivers/tty/pty.c:121
 n_tty_write+0x8d2/0x1030 drivers/tty/n_tty.c:2331
 do_tty_write drivers/tty/tty_io.c:958 [inline]
 tty_write+0x346/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485
 vfs_write+0x150/0x4f0 fs/read_write.c:549
 ksys_write+0xcd/0x1b0 fs/read_write.c:598
 __do_sys_write fs/read_write.c:610 [inline]
 __se_sys_write fs/read_write.c:607 [inline]
 __x64_sys_write+0x6e/0xb0 fs/read_write.c:607
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:287
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x4592c9
RSP: 002b:00007f0fbf2d0c78 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
RAX: ffffffffffffffda RBX: 00007f0fbf2d0c90 RCX: 00000000004592c9
RDX: 00000000ffffff78 RSI: 00000000200000c0 RDI: 0000000000000003
RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f0fbf2d16d4
R13: 00000000004c9106 R14: 00000000004e0070 R15: 0000000000000004
CPU: 1 PID: 6872 Comm: syz-executor.1 Not tainted 4.17.0-rc3+ #1
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x109/0x15a lib/dump_stack.c:113
 fail_dump lib/fault-inject.c:51 [inline]
 should_fail.cold.4+0x5/0x14 lib/fault-inject.c:149
 should_fail_alloc_page mm/page_alloc.c:3082 [inline]
 prepare_alloc_pages mm/page_alloc.c:4322 [inline]
 __alloc_pages_nodemask+0x1b5/0x730 mm/page_alloc.c:4358
 __alloc_pages include/linux/gfp.h:456 [inline]
 __alloc_pages_node include/linux/gfp.h:469 [inline]
 kmem_getpages mm/slab.c:1411 [inline]
 cache_grow_begin+0x81/0x890 mm/slab.c:2678
 cache_alloc_refill mm/slab.c:3045 [inline]
 ____cache_alloc mm/slab.c:3127 [inline]
 __do_cache_alloc mm/slab.c:3349 [inline]
 slab_alloc mm/slab.c:3384 [inline]
 __do_kmalloc mm/slab.c:3716 [inline]
 __kmalloc+0x6d2/0x7a0 mm/slab.c:3727
kobject: 'loop3' (        (ptrval)): kobject_uevent_env
 kmalloc include/linux/slab.h:517 [inline]
 do_tty_write drivers/tty/tty_io.c:940 [inline]
 tty_write+0x52b/0x770 drivers/tty/tty_io.c:1042
 __vfs_write+0xe3/0x860 fs/read_write.c:485

