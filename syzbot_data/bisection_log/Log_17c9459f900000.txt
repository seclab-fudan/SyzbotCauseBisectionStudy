bisecting cause commit starting from 874fb9e2ca949b443cc419a4f2227cafd4381d39
building syzkaller on 4a77ae0bdc5cd75ebe88ce7c896aae6bbf457a29
testing commit 874fb9e2ca949b443cc419a4f2227cafd4381d39 with gcc (GCC) 8.1.0
kernel signature: 692a20c74c8b23693fdf2454451b03a173a7991e4f4209127d6161b01d42722f
all runs: crashed: WARNING in drv_remove_interface
testing release v5.8
testing commit bcf876870b95592b52519ed4aafcf9d95999bc9c with gcc (GCC) 8.1.0
kernel signature: c8e76bd576d17a3da7d4c04675d695d50c50a29d2841a6f17b484f81b639c306
all runs: crashed: WARNING in drv_remove_interface
testing release v5.7
testing commit 3d77e6a8804abcc0504c904bd6e5cdf3a5cf8162 with gcc (GCC) 8.1.0
kernel signature: 6c79a1274846e1dd35e051f11e5da60649d2f713717c461e4116c55f65b7924c
all runs: crashed: WARNING in drv_remove_interface
testing release v5.6
testing commit 7111951b8d4973bda27ff663f2cf18b663d15b48 with gcc (GCC) 8.1.0
kernel signature: 31cb6ec86e01e8d2d4c6c243fb9d4b5e3a51b51fb0a78db6365b00d2381e9dc2
all runs: crashed: WARNING in drv_remove_interface
testing release v5.5
testing commit d5226fa6dbae0569ee43ecfc08bdcd6770fc4755 with gcc (GCC) 8.1.0
kernel signature: ee6d31c410c6a9c95c364337774192866a3f8e6eb95d2e0a8e905e81ddddb9a3
all runs: crashed: WARNING in drv_remove_interface
testing release v5.4
testing commit 219d54332a09e8d8741c1e1982f5eae56099de85 with gcc (GCC) 8.1.0
kernel signature: c884ac6ac81875c7ea10781f22397d722e91708db5eed37129946e0cfe28bc72
all runs: crashed: WARNING in drv_remove_interface
testing release v5.3
testing commit 4d856f72c10ecb060868ed10ff1b1453943fc6c8 with gcc (GCC) 8.1.0
kernel signature: 65d2cbf91e25155d7a7b2b15f0c9e9a7fd39b232e78d8edb58ea3e8cc3e3d4c3
all runs: crashed: WARNING in drv_remove_interface
testing release v5.2
testing commit 0ecfebd2b52404ae0c54a878c872bb93363ada36 with gcc (GCC) 8.1.0
kernel signature: acfbe3f2a17e328a185a3e5d3df112e857a8808e3bd5bf95db1a2be729f32f18
all runs: crashed: WARNING in drv_remove_interface
testing release v5.1
testing commit e93c9c99a629c61837d5a7fc2120cd2b6c70dbdd with gcc (GCC) 8.1.0
kernel signature: 59332160b7da194918fe53ffdc2361c99cf48832e7ac230e54d6370c11f4172d
all runs: crashed: WARNING in drv_remove_interface
testing release v5.0
testing commit 1c163f4c7b3f621efff9b28a47abb36f7378d783 with gcc (GCC) 8.1.0
kernel signature: 4fc42aede2b52d2b5b0f69fbcc1068668bf2ad0a0a4f8856982df3c479026d9d
all runs: crashed: WARNING in drv_remove_interface
testing release v4.20
testing commit 8fe28cb58bcb235034b64cbbb7550a8a43fd88be with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.19
testing commit 84df9525b0c27f3ebc2ebb1864fa62a97fdedb7d with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.18
testing commit 94710cac0ef4ee177a63b5227664b38c95bbf703 with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.17
testing commit 29dcea88779c856c7dc92040a0c01233263101d4 with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.16
testing commit 0adb32858b0bddf4ada5f364a84ed60b196dbcda with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.15
testing commit d8a5b80568a9cb66810e75b182018e9edb68e8ff with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.14
testing commit bebc6082da0a9f5d47a1ea2edc099bf671058bd4 with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.13
testing commit 569dbb88e80deb68974ef6fdd6a13edb9d686261 with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.12
testing commit 6f7da290413ba713f0cdd9ff1a2a9bb129ef4f6c with gcc (GCC) 8.1.0
certs/signing_key.pem: Permission denied
testing release v4.11
testing commit a351e9b9fc24e982ec2f0e76379a49826036da12 with gcc (GCC) 7.3.0
certs/signing_key.pem: Permission denied
testing release v4.10
testing commit c470abd4fde40ea6a0846a2beab642a578c0b8cd with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
testing release v4.9
testing commit 69973b830859bc6529a7a0468ba0d80ee5117826 with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
testing release v4.8
testing commit c8d2bc9bc39ebea8437fd974fdbc21847bb897a3 with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
testing release v4.7
testing commit 523d939ef98fd712632d93a5a2b588e477a7565e with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
testing release v4.6
testing commit 2dcd0af568b0cf583645c8a317dd12e344b1c72a with gcc (GCC) 5.5.0
certs/signing_key.pem: Permission denied
revisions tested: 25, total time: 1h59m3.21388291s (build: 1h23m42.011506405s, test: 31m46.011824717s)
the crash already happened on the oldest tested release
commit msg: Linux 5.0
crash: WARNING in drv_remove_interface
Bluetooth: hci0: command 0x0419 tx timeout
Bluetooth: hci5: command 0x0419 tx timeout
Bluetooth: hci4: command 0x0419 tx timeout
------------[ cut here ]------------
wlan0:  Failed check-sdata-in-driver check, flags: 0x4
WARNING: CPU: 0 PID: 8644 at net/mac80211/driver-ops.h:19 check_sdata_in_driver net/mac80211/driver-ops.h:17 [inline]
WARNING: CPU: 0 PID: 8644 at net/mac80211/driver-ops.h:19 drv_remove_interface+0x3e9/0x530 net/mac80211/driver-ops.c:100
Kernel panic - not syncing: panic_on_warn set ...
CPU: 0 PID: 8644 Comm: syz-executor.3 Not tainted 5.0.0-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Call Trace:
 __dump_stack lib/dump_stack.c:77 [inline]
 dump_stack+0x165/0x21a lib/dump_stack.c:113
 panic+0x212/0x40b kernel/panic.c:214
 __warn.cold.7+0x1b/0x38 kernel/panic.c:571
 report_bug+0x1a4/0x200 lib/bug.c:186
 fixup_bug arch/x86/kernel/traps.c:178 [inline]
 do_error_trap+0x11b/0x200 arch/x86/kernel/traps.c:271
 do_invalid_op+0x36/0x40 arch/x86/kernel/traps.c:290
 invalid_op+0x14/0x20 arch/x86/entry/entry_64.S:973
RIP: 0010:check_sdata_in_driver net/mac80211/driver-ops.h:17 [inline]
RIP: 0010:drv_remove_interface+0x3e9/0x530 net/mac80211/driver-ops.c:100
Code: 01 00 0f 85 4d 01 00 00 49 8b b4 24 b0 05 00 00 49 81 c4 d0 05 00 00 48 c7 c7 e0 ed 17 88 48 85 f6 49 0f 44 f4 e8 aa 07 97 fa <0f> 0b e9 3e fd ff ff 0f 0b e9 82 fc ff ff 0f 0b e9 20 fd ff ff 4c
RSP: 0018:ffff888076a7f528 EFLAGS: 00010282
RAX: 0000000000000000 RBX: ffff88808c8cab18 RCX: 0000000000000000
RDX: 0000000000000004 RSI: ffffffff87ab46a0 RDI: ffffffff8a5a4de0
RBP: ffff888076a7f558 R08: ffffed1015d05029 R09: ffffed1015d05028
R10: ffffed1015d05028 R11: ffff8880ae828147 R12: ffff88808ea51190
R13: ffff88808c8c9b40 R14: dffffc0000000000 R15: ffff88808ea51180
 ieee80211_do_stop+0xf1a/0x1ce0 net/mac80211/iface.c:1053
 ieee80211_stop+0x15/0x20 net/mac80211/iface.c:1080
 __dev_close_many+0x196/0x2b0 net/core/dev.c:1479
 __dev_close net/core/dev.c:1491 [inline]
 __dev_change_flags+0x21b/0x5a0 net/core/dev.c:7565
 dev_change_flags+0x7b/0x160 net/core/dev.c:7638
 devinet_ioctl+0xf87/0x1730 net/ipv4/devinet.c:1104
 inet_ioctl+0x14f/0x2b0 net/ipv4/af_inet.c:954
 packet_ioctl+0xdc/0x280 net/packet/af_packet.c:4101
 sock_do_ioctl+0xd9/0x230 net/socket.c:950
 sock_ioctl+0x281/0x500 net/socket.c:1074
 vfs_ioctl fs/ioctl.c:46 [inline]
 file_ioctl fs/ioctl.c:509 [inline]
 do_vfs_ioctl+0x196/0x10c0 fs/ioctl.c:696
 ksys_ioctl+0x62/0x90 fs/ioctl.c:713
 __do_sys_ioctl fs/ioctl.c:720 [inline]
 __se_sys_ioctl fs/ioctl.c:718 [inline]
 __x64_sys_ioctl+0x6e/0xb0 fs/ioctl.c:718
 do_syscall_64+0xd0/0x4d0 arch/x86/entry/common.c:290
 entry_SYSCALL_64_after_hwframe+0x49/0xbe
RIP: 0033:0x45de59
Code: 0d b4 fb ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 0f 83 db b3 fb ff c3 66 2e 0f 1f 84 00 00 00 00
RSP: 002b:00007f510629dc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000010
RAX: ffffffffffffffda RBX: 000000000001dbc0 RCX: 000000000045de59
RDX: 0000000020001000 RSI: 0000000000008914 RDI: 0000000000000003
RBP: 000000000118bf60 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000000 R11: 0000000000000246 R12: 000000000118bf2c
R13: 00007fff3e2eabef R14: 00007f510629e9c0 R15: 000000000118bf2c
Kernel Offset: disabled
Rebooting in 86400 seconds..

