bisecting cause commit starting from cd796ed3345030aa1bb332fe5c793b3dddaf56e7
building syzkaller on 51a9082e064119316893e12187cab2843283ed4d
testing commit cd796ed3345030aa1bb332fe5c793b3dddaf56e7 with gcc (GCC) 8.1.0
kernel signature: 670bbe31e425c841fae88629581cdc82b03099e0312a5ba2be8771e9e24121b7
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.9
testing commit bbf5c979011a099af5dc76498918ed7df445635b with gcc (GCC) 8.1.0
kernel signature: 515f03a0aeeb133aa2b2f66b7fe0a9c57066848d91e7279ea1677c9a1e253520
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.8
testing commit bcf876870b95592b52519ed4aafcf9d95999bc9c with gcc (GCC) 8.1.0
kernel signature: 0261a6cb35e3849e99b6fb76bc5f35549f662b9bca66de0c03696d60dfe31b27
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.7
testing commit 3d77e6a8804abcc0504c904bd6e5cdf3a5cf8162 with gcc (GCC) 8.1.0
kernel signature: f3397b652782618d9d3eb5d87f95da90d42790679e4cc2e4c0f8d9679708157b
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.6
testing commit 7111951b8d4973bda27ff663f2cf18b663d15b48 with gcc (GCC) 8.1.0
kernel signature: 699d7c9d5cada8a1e74a63c5498753e89bb4dfa242ab0232c18db348469f0ff3
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.5
testing commit d5226fa6dbae0569ee43ecfc08bdcd6770fc4755 with gcc (GCC) 8.1.0
kernel signature: f6a07960c19bd7cff424f18cefe29d03a264037c16eb561e084814a963611835
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.4
testing commit 219d54332a09e8d8741c1e1982f5eae56099de85 with gcc (GCC) 8.1.0
kernel signature: c0830d035a572aeeee865ff079e6a5b6b7992fe3e7b1ff162518c074ce6ecfd7
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.3
testing commit 4d856f72c10ecb060868ed10ff1b1453943fc6c8 with gcc (GCC) 8.1.0
kernel signature: 23cacfd634f8db51b97c2d204b661c1fc6f5787c270bcab3d30375ced88d8ed1
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.2
testing commit 0ecfebd2b52404ae0c54a878c872bb93363ada36 with gcc (GCC) 8.1.0
kernel signature: 0e40c4f275f3b9698e2bebb49f83aaf2f2c861c682793205d3a552e2cbcbda00
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.1
testing commit e93c9c99a629c61837d5a7fc2120cd2b6c70dbdd with gcc (GCC) 8.1.0
kernel signature: 58e80b83d6ea9dae79440eb5e76bf1e2ce108bcae4d7138b8b6e124c87b8fc44
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v5.0
testing commit 1c163f4c7b3f621efff9b28a47abb36f7378d783 with gcc (GCC) 8.1.0
kernel signature: 9d56232dc6778736bc383ca32f8eb988284d6c41153fe5b264f87a801a393062
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.20
testing commit 8fe28cb58bcb235034b64cbbb7550a8a43fd88be with gcc (GCC) 8.1.0
kernel signature: 6d44c6b8bae44e2d84053090b1587b0e3cb0fdec4b65755814e7dc998d9902cd
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.19
testing commit 84df9525b0c27f3ebc2ebb1864fa62a97fdedb7d with gcc (GCC) 8.1.0
kernel signature: 76733e2a789b976b11ed0faa492020316c75b1290b753c92c328e275164cd9ac
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.18
testing commit 94710cac0ef4ee177a63b5227664b38c95bbf703 with gcc (GCC) 8.1.0
kernel signature: d0b068347fbf0a8004912e537639224f3419afe9718e5e44f5f386e894bf4a0a
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.17
testing commit 29dcea88779c856c7dc92040a0c01233263101d4 with gcc (GCC) 8.1.0
kernel signature: 4723cd3650ad5caeeda508cd07805d5355e3bc97a26ed284c221a833e72c2815
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.16
testing commit 0adb32858b0bddf4ada5f364a84ed60b196dbcda with gcc (GCC) 8.1.0
kernel signature: ffca1888b5f2a1f96c43dcd1a5fa14d87787d0d07851d3f3ae592314f8f3ab1a
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.15
testing commit d8a5b80568a9cb66810e75b182018e9edb68e8ff with gcc (GCC) 8.1.0
kernel signature: 9199522e43feb455858d2d9699b5c7eea3fe8fc5fe706eec5c4dc7dcfdc71420
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.14
testing commit bebc6082da0a9f5d47a1ea2edc099bf671058bd4 with gcc (GCC) 8.1.0
kernel signature: 088b87ce7daaff5ac1b3041704ba550bf9063dd3d3404b6e56e028282a6248a2
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.13
testing commit 569dbb88e80deb68974ef6fdd6a13edb9d686261 with gcc (GCC) 8.1.0
kernel signature: ab31d4e6ef7524ec652064a20990366e8bde377d486975cae99a6327888da5da
all runs: crashed: WARNING in ext4_xattr_set_entry
testing release v4.12
testing commit 6f7da290413ba713f0cdd9ff1a2a9bb129ef4f6c with gcc (GCC) 8.1.0
kernel signature: 56c8155bfaec42000a9958217fc7c23ba6cca8c9d43396e5eba421d296801117
all runs: basic kernel testing failed: BUG: sleeping function called from invalid context in tap_get_minor
testing release v4.11
testing commit a351e9b9fc24e982ec2f0e76379a49826036da12 with gcc (GCC) 7.3.0
kernel signature: 1cdc67aa96f8b753e1d7d6dc289c8abf340dfb3c8d8c2de55afc5f6f201280c1
all runs: basic kernel testing failed: BUG: sleeping function called from invalid context in tap_get_minor
testing release v4.10
testing commit c470abd4fde40ea6a0846a2beab642a578c0b8cd with gcc (GCC) 5.5.0
kernel signature: 3699c64e687fb3b2470c607254261b1789156bb355c088e8d47f383656685dd6
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: crashed: WARNING in nf_unregister_net_hook
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
reproducer seems to be flaky
testing release v4.9
testing commit 69973b830859bc6529a7a0468ba0d80ee5117826 with gcc (GCC) 5.5.0
kernel signature: 583724fb0c2f87a4aff652ea8d951be946409b9ebec458b32f88fdf22f4e84cc
all runs: OK
# git bisect start c470abd4fde40ea6a0846a2beab642a578c0b8cd 69973b830859bc6529a7a0468ba0d80ee5117826
Bisecting: 7099 revisions left to test after this (roughly 13 steps)
[f4000cd99750065d5177555c0a805c97174d1b9f] Merge tag 'arm64-upstream' of git://git.kernel.org/pub/scm/linux/kernel/git/arm64/linux
testing commit f4000cd99750065d5177555c0a805c97174d1b9f with gcc (GCC) 5.5.0
kernel signature: 7a033c0d182521a306dc7881b455e4e868b17235e34ef781bd9e578ff1697928
run #0: basic kernel testing failed: failed to copy test binary to VM: timedout ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/syzkaller/jobs/linux/gopath/src/github.com/google/syzkaller/bin/linux_amd64/syz-fuzzer" "root@10.128.0.132:./syz-fuzzer"]
run #1: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/syzkaller/jobs/linux/gopath/src/github.com/google/syzkaller/bin/linux_amd64/syz-fuzzer" "root@10.128.0.245:./syz-fuzzer"]: exit status 1
Connection timed out during banner exchange
lost connection

run #2: basic kernel testing failed: failed to copy test binary to VM: timedout ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/syzkaller/jobs/linux/gopath/src/github.com/google/syzkaller/bin/linux_amd64/syz-fuzzer" "root@10.128.0.213:./syz-fuzzer"]
run #3: basic kernel testing failed: failed to copy test binary to VM: timedout ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/syzkaller/jobs/linux/gopath/src/github.com/google/syzkaller/bin/linux_amd64/syz-fuzzer" "root@10.128.0.239:./syz-fuzzer"]
run #4: boot failed: can't ssh into the instance
run #5: boot failed: WARNING: unrecognized kernel stack return address ADDR at ADDR in systemd-udevd:LINE
run #6: boot failed: can't ssh into the instance
run #7: boot failed: can't ssh into the instance
run #8: boot failed: can't ssh into the instance
run #9: boot failed: can't ssh into the instance
# git bisect skip f4000cd99750065d5177555c0a805c97174d1b9f
Bisecting: 7099 revisions left to test after this (roughly 13 steps)
[ab1effc09519f3bb4b84dd6d8276cedf07b17a1b] staging: ks7010: Add blank line after declarations
testing commit ab1effc09519f3bb4b84dd6d8276cedf07b17a1b with gcc (GCC) 5.5.0
kernel signature: b30061e38b3d9006a23de4268e8d3e97cec8a1903565c56741fe01f77ce06208
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad ab1effc09519f3bb4b84dd6d8276cedf07b17a1b
Bisecting: 141 revisions left to test after this (roughly 7 steps)
[d70c509152292cd4cc741f97ce043e0f65f72689] staging:r8188eu: remove precv_frame_buf member of recv_priv structure
testing commit d70c509152292cd4cc741f97ce043e0f65f72689 with gcc (GCC) 5.5.0
kernel signature: 32a7a629f9eb7b4f5ca9467e2549760be52c23fd40d8a711edf380ccfed64dd7
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: crashed: WARNING in nf_unregister_net_hook
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad d70c509152292cd4cc741f97ce043e0f65f72689
Bisecting: 71 revisions left to test after this (roughly 6 steps)
[c10364e1f4f6cc7e8c3f2e6a3ecb96da8769f10b] staging: rtl8188eu: core: removes unecessary parenthesis
testing commit c10364e1f4f6cc7e8c3f2e6a3ecb96da8769f10b with gcc (GCC) 5.5.0
kernel signature: 7c7e4acbe7627f983c9853de9f054152c9ccf0c07184d9014f2485c75ad6a200
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad c10364e1f4f6cc7e8c3f2e6a3ecb96da8769f10b
Bisecting: 34 revisions left to test after this (roughly 5 steps)
[55554f31e97878133d8b2bdf495504e1c557081c] staging: lustre: lov: add cl_object_layout_get()
testing commit 55554f31e97878133d8b2bdf495504e1c557081c with gcc (GCC) 5.5.0
kernel signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
run #0: OK
run #1: OK
run #2: OK
run #3: crashed: WARNING in nf_unregister_net_hook
run #4: OK
run #5: OK
run #6: crashed: WARNING in nf_unregister_net_hook
run #7: OK
run #8: crashed: WARNING in nf_unregister_net_hook
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad 55554f31e97878133d8b2bdf495504e1c557081c
Bisecting: 17 revisions left to test after this (roughly 4 steps)
[cbd4d4a8e319050100db4e05d896cee65f011d25] staging: lustre: llite: remove duplicate fiemap defines
testing commit cbd4d4a8e319050100db4e05d896cee65f011d25 with gcc (GCC) 5.5.0
kernel signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: crashed: WARNING in nf_unregister_net_hook
run #9: OK
# git bisect bad cbd4d4a8e319050100db4e05d896cee65f011d25
Bisecting: 8 revisions left to test after this (roughly 3 steps)
[a2a87b224b33f30ca5172945c132e39260e95403] staging: greybus: Add blank line after declaration
testing commit a2a87b224b33f30ca5172945c132e39260e95403 with gcc (GCC) 5.5.0
kernel signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: crashed: WARNING in nf_unregister_net_hook
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad a2a87b224b33f30ca5172945c132e39260e95403
Bisecting: 3 revisions left to test after this (roughly 2 steps)
[14c681ea83adcbb33ed31c50cda1a2297bbade7e] Staging: sm750fb: use unsigned int instead unsigned
testing commit 14c681ea83adcbb33ed31c50cda1a2297bbade7e with gcc (GCC) 5.5.0
kernel signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: crashed: WARNING in nf_unregister_net_hook
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad 14c681ea83adcbb33ed31c50cda1a2297bbade7e
Bisecting: 2 revisions left to test after this (roughly 1 step)
[232664b386e125962682165353971fba5cb13527] staging/vchi: Update for rename of page_cache_release() to put_page().
testing commit 232664b386e125962682165353971fba5cb13527 with gcc (GCC) 5.5.0
kernel signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
all runs: OK
# git bisect good 232664b386e125962682165353971fba5cb13527
Bisecting: 0 revisions left to test after this (roughly 1 step)
[9872fa751e0bad862161c442d44b7ea597e23676] Staging: sm750fb: fix do not add new typedefs warning
testing commit 9872fa751e0bad862161c442d44b7ea597e23676 with gcc (GCC) 5.5.0
kernel signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: crashed: WARNING in nf_unregister_net_hook
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: OK
# git bisect bad 9872fa751e0bad862161c442d44b7ea597e23676
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[e0cb35095753c038f42d1b6bf68c4cd063b3fd21] ARM: bcm2835: Add #define for VCHIQ property message.
testing commit e0cb35095753c038f42d1b6bf68c4cd063b3fd21 with gcc (GCC) 5.5.0
kernel signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: crashed: WARNING in nf_unregister_net_hook
run #7: OK
run #8: crashed: WARNING in nf_unregister_net_hook
run #9: OK
# git bisect bad e0cb35095753c038f42d1b6bf68c4cd063b3fd21
e0cb35095753c038f42d1b6bf68c4cd063b3fd21 is the first bad commit
commit e0cb35095753c038f42d1b6bf68c4cd063b3fd21
Author: Eric Anholt <eric@anholt.net>
Date:   Mon Oct 3 11:52:08 2016 -0700

    ARM: bcm2835: Add #define for VCHIQ property message.
    
    This comes from the downstream tree and is needed for the new VCHIQ
    driver in staging.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

 include/soc/bcm2835/raspberrypi-firmware.h | 2 ++
 1 file changed, 2 insertions(+)
culprit signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
parent  signature: f0b23a343af9c5ca7efd58771800cf4d9ffd967381678bcf5037f7d17278768f
Reproducer flagged being flaky
revisions tested: 34, total time: 5h43m51.877777289s (build: 2h34m44.875711276s, test: 3h4m48.781470303s)
first bad commit: e0cb35095753c038f42d1b6bf68c4cd063b3fd21 ARM: bcm2835: Add #define for VCHIQ property message.
recipients (to): ["bcm-kernel-feedback-list@broadcom.com" "eric@anholt.net" "eric@anholt.net" "f.fainelli@gmail.com" "gregkh@linuxfoundation.org" "lee@kernel.org" "linux-arm-kernel@lists.infradead.org" "linux-rpi-kernel@lists.infradead.org" "rjui@broadcom.com" "sbranden@broadcom.com" "swarren@wwwdotorg.org"]
recipients (cc): ["linux-kernel@vger.kernel.org"]
crash: WARNING in nf_unregister_net_hook
bond0 (unregistering): Releasing backup interface bond_slave_1
bond0 (unregistering): Releasing backup interface bond_slave_0
bond0 (unregistering): Released all slaves
------------[ cut here ]------------
WARNING: CPU: 1 PID: 3078 at net/netfilter/core.c:151 nf_unregister_net_hook+0x28a/0x3c0 net/netfilter/core.c:151
nf_unregister_net_hook: hook not found!
Kernel panic - not syncing: panic_on_warn set ...

CPU: 1 PID: 3078 Comm: kworker/u4:4 Not tainted 4.9.0-rc1-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Workqueue: netns cleanup_net
 ffff880132bdf890 ffffffff82eb2882 ffffffff86a7ff00 ffff880132bdf968
 ffffffff87689a00 ffffffff857fb47a 0000000000000009 ffff880132bdf958
 ffffffff815f8cb2 0000000041b58ab3 ffffffff87c387e8 ffffffff815f8afc
Call Trace:
 [<ffffffff82eb2882>] __dump_stack lib/dump_stack.c:15 [inline]
 [<ffffffff82eb2882>] dump_stack+0x136/0x1d4 lib/dump_stack.c:51
 [<ffffffff815f8cb2>] panic+0x1b6/0x358 kernel/panic.c:179
 [<ffffffff81301a6d>] __warn+0x18d/0x1b0 kernel/panic.c:542
 [<ffffffff81301b22>] warn_slowpath_fmt+0x92/0xb0 kernel/panic.c:565
 [<ffffffff857fb47a>] nf_unregister_net_hook+0x28a/0x3c0 net/netfilter/core.c:151
 [<ffffffff857fb876>] nf_unregister_hook_list net/netfilter/core.c:484 [inline]
 [<ffffffff857fb876>] netfilter_net_exit+0x36/0xa0 net/netfilter/core.c:516
 [<ffffffff855f0ffe>] ops_exit_list.isra.0+0x8e/0x120 net/core/net_namespace.c:136
 [<ffffffff855f3300>] cleanup_net+0x2d0/0x570 net/core/net_namespace.c:449
 [<ffffffff8135315d>] process_one_work+0x67d/0x14d0 kernel/workqueue.c:2096
 [<ffffffff81354091>] worker_thread+0xe1/0x1050 kernel/workqueue.c:2230
 [<ffffffff81364d3e>] kthread+0x20e/0x2d0 kernel/kthread.c:209
 [<ffffffff8693aeda>] ret_from_fork+0x2a/0x40 arch/x86/entry/entry_64.S:433
Kernel Offset: disabled

