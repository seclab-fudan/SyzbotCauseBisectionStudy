bisecting cause commit starting from 87d5034d0758d4490c6524445774d89e318a6383
building syzkaller on 9602ddf403bdf3cfd87efef14becc76f9a38b81d
testing commit 87d5034d0758d4490c6524445774d89e318a6383 with gcc (GCC) 8.1.0
kernel signature: 2e8badb8f8a31baba9bf3aee24e51ae2d913c73b3f3b4648180c3e80a99cc0c2
all runs: crashed: WARNING in cfg80211_connect
testing release v5.8
testing commit bcf876870b95592b52519ed4aafcf9d95999bc9c with gcc (GCC) 8.1.0
kernel signature: 041a079d85313d2b1bfa9c78f00c7a5af526f073284b76685b416c598988971a
all runs: crashed: WARNING in cfg80211_connect
testing release v5.7
testing commit 3d77e6a8804abcc0504c904bd6e5cdf3a5cf8162 with gcc (GCC) 8.1.0
kernel signature: 813450ff81ce015367147b39c724316d5d9e836806ff9d81684e62bf710c73e3
all runs: crashed: WARNING in cfg80211_connect
testing release v5.6
testing commit 7111951b8d4973bda27ff663f2cf18b663d15b48 with gcc (GCC) 8.1.0
kernel signature: c2939cbb10177011d315a6817dd810be8f31ba2054a4407b18ed3d085393779a
all runs: crashed: WARNING in cfg80211_connect
testing release v5.5
testing commit d5226fa6dbae0569ee43ecfc08bdcd6770fc4755 with gcc (GCC) 8.1.0
kernel signature: 8e68ca45286fbcc58c1dc5a59ece955053702e00d5a5fb4671f28219c58c2e05
all runs: crashed: WARNING in cfg80211_connect
testing release v5.4
testing commit 219d54332a09e8d8741c1e1982f5eae56099de85 with gcc (GCC) 8.1.0
kernel signature: fb4fedd0089e6e939bc258e0199cd2a781e0bf2a7b3af1be27d561e629816f90
all runs: crashed: WARNING in cfg80211_connect
testing release v5.3
testing commit 4d856f72c10ecb060868ed10ff1b1453943fc6c8 with gcc (GCC) 8.1.0
kernel signature: c95115db1f168599e9b0fe84e325647475122e64cb613f9e1e1dd61cf8459693
all runs: crashed: WARNING in cfg80211_connect
testing release v5.2
testing commit 0ecfebd2b52404ae0c54a878c872bb93363ada36 with gcc (GCC) 8.1.0
kernel signature: c6b0291d28777f9a9e4ef72643dfcdbab23d9d931d2314bb9faf01513bb77603
all runs: crashed: WARNING in cfg80211_connect
testing release v5.1
testing commit e93c9c99a629c61837d5a7fc2120cd2b6c70dbdd with gcc (GCC) 8.1.0
kernel signature: 2d7eb3dffd2e9d7eada359ae802a2077b56bf3e444c29deef74bedcc935c4957
all runs: crashed: WARNING in cfg80211_connect
testing release v5.0
testing commit 1c163f4c7b3f621efff9b28a47abb36f7378d783 with gcc (GCC) 8.1.0
kernel signature: ca656136ff623d6cfba405623b5798a1d6e175ecbdc3af1f0ff8ce4894d9f934
all runs: crashed: WARNING in cfg80211_connect
testing release v4.20
testing commit 8fe28cb58bcb235034b64cbbb7550a8a43fd88be with gcc (GCC) 8.1.0
kernel signature: 941161e699d866fc638db48ff73e3e69cdad26fb78eaac6043a2792d3ff1d918
all runs: crashed: WARNING in cfg80211_connect
testing release v4.19
testing commit 84df9525b0c27f3ebc2ebb1864fa62a97fdedb7d with gcc (GCC) 8.1.0
kernel signature: 68ca612725c06bac8cb91c34e2e2fd12e76d4a3323add11e52a79613f69bb9b9
all runs: crashed: WARNING in cfg80211_connect
testing release v4.18
testing commit 94710cac0ef4ee177a63b5227664b38c95bbf703 with gcc (GCC) 8.1.0
kernel signature: 41eda208d6c6aa410d63472e7e506b73d978d82b2fe08e0874a3406c1c6f0ae1
all runs: crashed: WARNING in cfg80211_connect
testing release v4.17
testing commit 29dcea88779c856c7dc92040a0c01233263101d4 with gcc (GCC) 8.1.0
kernel signature: f0293747d2ffde73088e96c1657f17c9581a4e4fa016eb654220c30cb37e676f
all runs: crashed: WARNING in cfg80211_connect
testing release v4.16
testing commit 0adb32858b0bddf4ada5f364a84ed60b196dbcda with gcc (GCC) 8.1.0
kernel signature: ce28feffba97a697c3669759f3f2970908fde153eec688852a13c6116dde0aea
all runs: crashed: WARNING in cfg80211_connect
testing release v4.15
testing commit d8a5b80568a9cb66810e75b182018e9edb68e8ff with gcc (GCC) 8.1.0
kernel signature: 0f45f9235c65faff51806c2492d208aa428b256be4e392882229bf0f8fc59fbc
all runs: crashed: WARNING in cfg80211_connect
testing release v4.14
testing commit bebc6082da0a9f5d47a1ea2edc099bf671058bd4 with gcc (GCC) 8.1.0
kernel signature: a247358595582835af4dc07b8af1e45bc33f2817db5f0d958378cc6efcc1b68a
all runs: crashed: WARNING in cfg80211_connect
testing release v4.13
testing commit 569dbb88e80deb68974ef6fdd6a13edb9d686261 with gcc (GCC) 8.1.0
kernel signature: 5490c8163cda5c59bcd8c4e86c9ce58717dcd674e09dc072ee5837125b23d489
all runs: crashed: WARNING in cfg80211_connect
testing release v4.12
testing commit 6f7da290413ba713f0cdd9ff1a2a9bb129ef4f6c with gcc (GCC) 8.1.0
kernel signature: cb0deb3301bb99ddca58ece7ee78b8a18b9355659bb75e3a506bf9abc3d0035d
all runs: crashed: BUG: sleeping function called from invalid context in tap_get_minor
testing release v4.11
testing commit a351e9b9fc24e982ec2f0e76379a49826036da12 with gcc (GCC) 7.3.0
kernel signature: 54c32f10325eda951c0e1627edad2c5170c08f01bcedbcdc18223a2b0c4593b8
all runs: crashed: BUG: sleeping function called from invalid context in tap_get_minor
testing release v4.10
testing commit c470abd4fde40ea6a0846a2beab642a578c0b8cd with gcc (GCC) 5.5.0
kernel signature: 44891047d4161edecf556b146a5979a8869ead8edd5d0bbf697682da35f675a2
all runs: crashed: WARNING in cfg80211_connect
testing release v4.9
testing commit 69973b830859bc6529a7a0468ba0d80ee5117826 with gcc (GCC) 5.5.0
kernel signature: 77ea8de0a45a6f4b86408089c7c90a978c087837003660198f53ce1d763127bd
all runs: crashed: WARNING in cfg80211_connect
testing release v4.8
testing commit c8d2bc9bc39ebea8437fd974fdbc21847bb897a3 with gcc (GCC) 5.5.0
kernel signature: 52b1a3029926c6079b4a7db658b6931d9717359585e98c8bf54ef9e08b45d40b
all runs: crashed: WARNING in cfg80211_connect
testing release v4.7
testing commit 523d939ef98fd712632d93a5a2b588e477a7565e with gcc (GCC) 5.5.0
kernel signature: 1d8c3a33c3f9ffb9135be97fc1cd1716393037d41bbcbc1121a855592e3ab8c0
all runs: OK
# git bisect start c8d2bc9bc39ebea8437fd974fdbc21847bb897a3 523d939ef98fd712632d93a5a2b588e477a7565e
Bisecting: 7344 revisions left to test after this (roughly 13 steps)
[e61c10e468a42512f5fad74c00b62af5cc19f65f] sh: add device tree source for J2 FPGA on Mimas v2 board
testing commit e61c10e468a42512f5fad74c00b62af5cc19f65f with gcc (GCC) 5.5.0
kernel signature: 56e8caac4f5b4252be4d7b08e7b290cd3ea611dd8485339f8903e4dd0967e667
all runs: crashed: WARNING in cfg80211_connect
# git bisect bad e61c10e468a42512f5fad74c00b62af5cc19f65f
Bisecting: 3754 revisions left to test after this (roughly 12 steps)
[08fd8c17686c6b09fa410a26d516548dd80ff147] Merge tag 'for-linus-4.8-rc0-tag' of git://git.kernel.org/pub/scm/linux/kernel/git/xen/tip
testing commit 08fd8c17686c6b09fa410a26d516548dd80ff147 with gcc (GCC) 5.5.0
kernel signature: 55e9de07fc4bced80d55b8cb8fe80899cc98cc41ba72a7842257f91d51f970c1
run #0: crashed: general protection fault in br_multicast_group_expired
run #1: crashed: general protection fault in batadv_iv_ogm_queue_add
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: OK
# git bisect bad 08fd8c17686c6b09fa410a26d516548dd80ff147
Bisecting: 1725 revisions left to test after this (roughly 11 steps)
[17408d785a2eda374b7e673afe20309687a63f08] mm: memcontrol: remove BUG_ON in uncharge_list
testing commit 17408d785a2eda374b7e673afe20309687a63f08 with gcc (GCC) 5.5.0
kernel signature: 1fa19cd99f9a9f687ce3299587440c9a21faf1a749e2a07b1d56e1c4e01dd2a4
all runs: OK
# git bisect good 17408d785a2eda374b7e673afe20309687a63f08
Bisecting: 823 revisions left to test after this (roughly 10 steps)
[e663107fa1edda4d8a0d5b8ce704d71f8e27de43] Merge tag 'acpi-4.8-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm
testing commit e663107fa1edda4d8a0d5b8ce704d71f8e27de43 with gcc (GCC) 5.5.0
kernel signature: ed51b5b37dc4a010fc148e6ae283ed1280dbb2c49320a51f04c202795d74dcd4
all runs: OK
# git bisect good e663107fa1edda4d8a0d5b8ce704d71f8e27de43
Bisecting: 399 revisions left to test after this (roughly 9 steps)
[9c1958fc326a0a0a533ec8e86ea6fa30977207de] Merge tag 'media/v4.8-1' of git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/linux-media
testing commit 9c1958fc326a0a0a533ec8e86ea6fa30977207de with gcc (GCC) 5.5.0
kernel signature: 457879fd93701e6e0b94240854f8b7a3dcd5c348a2450e8ea9325b3cfe60fb4d
all runs: OK
# git bisect good 9c1958fc326a0a0a533ec8e86ea6fa30977207de
Bisecting: 190 revisions left to test after this (roughly 8 steps)
[0e6acf0204da5b8705722a5f6806a4f55ed379d6] Merge tag 'xfs-for-linus-4.8-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/dgc/linux-xfs
testing commit 0e6acf0204da5b8705722a5f6806a4f55ed379d6 with gcc (GCC) 5.5.0
kernel signature: 9ad0e5ab123952acfc75658912afc6d2be284d1ae4b65a69e6f898ae833c2302
run #0: crashed: general protection fault in br_multicast_group_expired
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: OK
# git bisect bad 0e6acf0204da5b8705722a5f6806a4f55ed379d6
Bisecting: 87 revisions left to test after this (roughly 7 steps)
[6097d55e10a7e190279e99318a0e075c8d1dce9e] Merge tag 'regulator-v4.8' of git://git.kernel.org/pub/scm/linux/kernel/git/broonie/regulator
testing commit 6097d55e10a7e190279e99318a0e075c8d1dce9e with gcc (GCC) 5.5.0
kernel signature: 51b7b78052ff4e6bfbac4f24b25f55ba03e7910a920890a20d0a97e3175061fc
all runs: OK
# git bisect good 6097d55e10a7e190279e99318a0e075c8d1dce9e
Bisecting: 45 revisions left to test after this (roughly 6 steps)
[bbfeb6141fcc8e2aea47b2f235cc8cc8ffb4a293] Merge branch 'xfs-4.8-buf-fixes' into for-next
testing commit bbfeb6141fcc8e2aea47b2f235cc8cc8ffb4a293 with gcc (GCC) 5.5.0
kernel signature: cfdd44efd99a42ee888aa4aeb49aadc0404f140f3f5fd2f2a91d50bb151d9a64
all runs: OK
# git bisect good bbfeb6141fcc8e2aea47b2f235cc8cc8ffb4a293
Bisecting: 24 revisions left to test after this (roughly 5 steps)
[f7816ad0f878dacd5f0120476f9b836ccf8699ea] Merge tag 'for-v4.8' of git://git.kernel.org/pub/scm/linux/kernel/git/sre/linux-power-supply
testing commit f7816ad0f878dacd5f0120476f9b836ccf8699ea with gcc (GCC) 5.5.0
kernel signature: 7f9d693244fd992e404e4304151c6af8e2f9cb1ea4aae5924a88892dcc64b14d
all runs: OK
# git bisect good f7816ad0f878dacd5f0120476f9b836ccf8699ea
Bisecting: 12 revisions left to test after this (roughly 4 steps)
[dc4113d2433e01b06685743552d99573c9d470f3] Merge branch 'xfs-4.8-dir2-sf-fixes' into for-next
testing commit dc4113d2433e01b06685743552d99573c9d470f3 with gcc (GCC) 5.5.0
kernel signature: a0ecf31975383563a6f89d70825407f1555ba01e6c947088fc26dc67105c855d
run #0: crashed: WARNING in insert_work
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: OK
# git bisect bad dc4113d2433e01b06685743552d99573c9d470f3
Bisecting: 5 revisions left to test after this (roughly 3 steps)
[fa8d972d055c723cc427e14d4d7919640f418730] xfs: direct calls in the direct I/O path
testing commit fa8d972d055c723cc427e14d4d7919640f418730 with gcc (GCC) 5.5.0
kernel signature: a89da3319d7b7f7444c47735c6f6f50476bf731297c232495cf4d2821754a37e
all runs: OK
# git bisect good fa8d972d055c723cc427e14d4d7919640f418730
Bisecting: 2 revisions left to test after this (roughly 2 steps)
[aa2dd0ad4d6d7dd85bb13ed64b872803be046f96] xfs: remove __arch_pack
testing commit aa2dd0ad4d6d7dd85bb13ed64b872803be046f96 with gcc (GCC) 5.5.0
kernel signature: 60999bc84930b4df106a7a615b79bf8b6d567c63af6ceda8c00ce7d62d65220d
all runs: OK
# git bisect good aa2dd0ad4d6d7dd85bb13ed64b872803be046f96
Bisecting: 0 revisions left to test after this (roughly 1 step)
[b47ec80bfe1eadd530a13522890d43d71eda10f8] Merge branch 'xfs-4.8-split-dax-dio' into for-next
testing commit b47ec80bfe1eadd530a13522890d43d71eda10f8 with gcc (GCC) 5.5.0
kernel signature: c80b1865dedac9bbc4632984303c98d948bd2de9ef13466862cafaeb54e9e746
run #0: crashed: KASAN: use-after-free Read in batadv_purge_outstanding_packets
run #1: crashed: KASAN: null-ptr-deref Read
run #2: crashed: general protection fault in batadv_iv_ogm_queue_add
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: OK
# git bisect bad b47ec80bfe1eadd530a13522890d43d71eda10f8
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[16d4d43595b4780daac8fcea6d042689124cb094] xfs: split direct I/O and DAX path
testing commit 16d4d43595b4780daac8fcea6d042689124cb094 with gcc (GCC) 5.5.0
kernel signature: 72ec4b869f642d93f3614a4d01e6095e97944373e7cc759ec24b41aae91a6652
run #0: crashed: KASAN: null-ptr-deref Read
run #1: crashed: KASAN: use-after-free Read in batadv_iv_ogm_queue_add
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: OK
# git bisect bad 16d4d43595b4780daac8fcea6d042689124cb094
16d4d43595b4780daac8fcea6d042689124cb094 is the first bad commit
commit 16d4d43595b4780daac8fcea6d042689124cb094
Author: Christoph Hellwig <hch@lst.de>
Date:   Wed Jul 20 11:38:55 2016 +1000

    xfs: split direct I/O and DAX path
    
    So far the DAX code overloaded the direct I/O code path.  There is very little
    in common between the two, and untangling them allows to clean up both variants.
    
    As a side effect we also get separate trace points for both I/O types.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Reviewed-by: Dave Chinner <dchinner@redhat.com>
    Signed-off-by: Dave Chinner <david@fromorbit.com>

 fs/xfs/xfs_file.c  | 139 ++++++++++++++++++++++++++++++++++++++++++-----------
 fs/xfs/xfs_trace.h |   2 +
 2 files changed, 112 insertions(+), 29 deletions(-)
culprit signature: 72ec4b869f642d93f3614a4d01e6095e97944373e7cc759ec24b41aae91a6652
parent  signature: a89da3319d7b7f7444c47735c6f6f50476bf731297c232495cf4d2821754a37e
revisions tested: 38, total time: 6h58m1.400302142s (build: 3h22m25.421488401s, test: 3h30m32.638974724s)
first bad commit: 16d4d43595b4780daac8fcea6d042689124cb094 xfs: split direct I/O and DAX path
recipients (to): ["david@fromorbit.com" "dchinner@redhat.com" "hch@lst.de"]
recipients (cc): []
crash: KASAN: use-after-free Read in batadv_iv_ogm_queue_add
batman_adv: batadv0: Removing interface: batadv_slave_1
==================================================================
device bridge_slave_1 left promiscuous mode
bridge0: port 2(bridge_slave_1) entered disabled state
BUG: KASAN: use-after-free in batadv_iv_ogm_aggregate_new net/batman-adv/bat_iv_ogm.c:711 [inline] at addr ffff8800b4d34100
BUG: KASAN: use-after-free in batadv_iv_ogm_queue_add+0x771/0x1150 net/batman-adv/bat_iv_ogm.c:828 at addr ffff8800b4d34100
Read of size 132 by task kworker/u4:5/2903
CPU: 0 PID: 2903 Comm: kworker/u4:5 Not tainted 4.7.0-rc1-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Workqueue: bat_events batadv_send_outstanding_bat_ogm_packet
 0000000000000000 ffff8800b236f998 ffffffff82e49e02 ffff8800b4d34183
 ffff8800b236fa28 ffff8800b4d34100 ffff88012bc00000 ffff8800b4d341c0
 ffff8800b236fa18 ffffffff81745c18 0000000000000286 0000000000000003
Call Trace:
 [<ffffffff82e49e02>] __dump_stack lib/dump_stack.c:15 [inline]
 [<ffffffff82e49e02>] dump_stack+0x136/0x1d4 lib/dump_stack.c:51
 [<ffffffff81745c18>] object_err mm/kasan/report.c:139 [inline]
 [<ffffffff81745c18>] print_address_description mm/kasan/report.c:180 [inline]
 [<ffffffff81745c18>] kasan_report_error+0x1e8/0x5b0 mm/kasan/report.c:276
 [<ffffffff81746314>] kasan_report+0x34/0x40 mm/kasan/report.c:298
 [<ffffffff81744ccd>] check_memory_region_inline mm/kasan/kasan.c:285 [inline]
 [<ffffffff81744ccd>] check_memory_region+0x13d/0x1a0 mm/kasan/kasan.c:299
 [<ffffffff81745143>] memcpy+0x23/0x50 mm/kasan/kasan.c:334
 [<ffffffff85cc0861>] batadv_iv_ogm_aggregate_new net/batman-adv/bat_iv_ogm.c:711 [inline]
 [<ffffffff85cc0861>] batadv_iv_ogm_queue_add+0x771/0x1150 net/batman-adv/bat_iv_ogm.c:828
 [<ffffffff85cc2fd2>] batadv_iv_ogm_schedule+0x912/0xc70 net/batman-adv/bat_iv_ogm.c:984
 [<ffffffff85d0f231>] batadv_schedule_bat_ogm net/batman-adv/send.c:448 [inline]
 [<ffffffff85d0f231>] batadv_send_outstanding_bat_ogm_packet+0x2f1/0x410 net/batman-adv/send.c:636
 [<ffffffff8138bf1c>] process_one_work+0x67c/0x14f0 kernel/workqueue.c:2096
 [<ffffffff8138ce6a>] worker_thread+0xda/0xf10 kernel/workqueue.c:2230
 [<ffffffff8139d919>] kthread+0x209/0x2d0 kernel/kthread.c:209
 [<ffffffff85dfe80f>] ret_from_fork+0x1f/0x40 arch/x86/entry/entry_64.S:389
Object at ffff8800b4d34100, in cache kmalloc-node
Object freed, allocated with size 132 bytes
Allocation:
PID = 2903
 [<ffffffff81208e26>] save_stack_trace+0x26/0x50 arch/x86/kernel/stacktrace.c:67
 [<ffffffff81744fbd>] save_stack mm/kasan/kasan.c:476 [inline]
 [<ffffffff81744fbd>] set_track mm/kasan/kasan.c:488 [inline]
 [<ffffffff81744fbd>] kasan_kmalloc+0x11d/0x1b0 mm/kasan/kasan.c:586
 [<ffffffff81740ed2>] __do_kmalloc mm/slab.c:3773 [inline]
 [<ffffffff81740ed2>] __kmalloc+0x162/0x470 mm/slab.c:3782
 [<ffffffff85cefae7>] kmalloc include/linux/slab.h:483 [inline]
 [<ffffffff85cefae7>] batadv_tvlv_realloc_packet_buff net/batman-adv/main.c:885 [inline]
 [<ffffffff85cefae7>] batadv_tvlv_container_ogm_append+0x117/0x470 net/batman-adv/main.c:926
 [<ffffffff85cc30aa>] batadv_iv_ogm_schedule+0x9ea/0xc70 net/batman-adv/bat_iv_ogm.c:947
 [<ffffffff85d0f231>] batadv_schedule_bat_ogm net/batman-adv/send.c:448 [inline]
 [<ffffffff85d0f231>] batadv_send_outstanding_bat_ogm_packet+0x2f1/0x410 net/batman-adv/send.c:636
 [<ffffffff8138bf1c>] process_one_work+0x67c/0x14f0 kernel/workqueue.c:2096
 [<ffffffff8138ce6a>] worker_thread+0xda/0xf10 kernel/workqueue.c:2230
 [<ffffffff8139d919>] kthread+0x209/0x2d0 kernel/kthread.c:209
 [<ffffffff85dfe80f>] ret_from_fork+0x1f/0x40 arch/x86/entry/entry_64.S:389
Deallocation:
PID = 21
 [<ffffffff81208e26>] save_stack_trace+0x26/0x50 arch/x86/kernel/stacktrace.c:67
 [<ffffffff817455f7>] save_stack mm/kasan/kasan.c:476 [inline]
 [<ffffffff817455f7>] set_track mm/kasan/kasan.c:488 [inline]
 [<ffffffff817455f7>] kasan_slab_free+0xd7/0x180 mm/kasan/kasan.c:540
 [<ffffffff81743443>] __cache_free mm/slab.c:3551 [inline]
 [<ffffffff81743443>] kfree+0xd3/0x2c0 mm/slab.c:3868
 [<ffffffff85cbe614>] batadv_iv_ogm_iface_disable+0x34/0x70 net/batman-adv/bat_iv_ogm.c:379
 [<ffffffff85ce96cc>] batadv_hardif_disable_interface+0x31c/0xbb0 net/batman-adv/hard-interface.c:602
 [<ffffffff85d11121>] batadv_softif_destroy_netlink+0xa1/0xc0 net/batman-adv/soft-interface.c:1040
 [<ffffffff84b9a741>] default_device_exit_batch+0x241/0x3d0 net/core/dev.c:8108
 [<ffffffff84b73fc6>] ops_exit_list.isra.0+0xd6/0x120 net/core/net_namespace.c:137
 [<ffffffff84b76380>] cleanup_net+0x2d0/0x540 net/core/net_namespace.c:431
 [<ffffffff8138bf1c>] process_one_work+0x67c/0x14f0 kernel/workqueue.c:2096
 [<ffffffff8138ce6a>] worker_thread+0xda/0xf10 kernel/workqueue.c:2230
 [<ffffffff8139d919>] kthread+0x209/0x2d0 kernel/kthread.c:209
 [<ffffffff85dfe80f>] ret_from_fork+0x1f/0x40 arch/x86/entry/entry_64.S:389
Memory state around the buggy address:
 ffff8800b4d34000: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
 ffff8800b4d34080: fb fb fb fb fb fb fb fb fc fc fc fc fc fc fc fc
>ffff8800b4d34100: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
                   ^
 ffff8800b4d34180: fb fb fb fb fb fb fb fb fc fc fc fc fc fc fc fc
 ffff8800b4d34200: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
==================================================================
kasan: CONFIG_KASAN_INLINE enabled
kasan: GPF could be caused by NULL-ptr deref or user memory access[  420.611717] general protection fault: 0000 [#1] PREEMPT SMP KASAN
Modules linked in:
CPU: 0 PID: 2903 Comm: kworker/u4:5 Tainted: G    B           4.7.0-rc1-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Workqueue: bat_events batadv_send_outstanding_bat_ogm_packet
task: ffff8800b2360640 ti: ffff8800b2368000 task.ti: ffff8800b2368000
RIP: 0010:[<ffffffff85cc011f>]  [<ffffffff85cc011f>] batadv_iv_ogm_queue_add+0x2f/0x1150 net/batman-adv/bat_iv_ogm.c:793
RSP: 0018:ffff8800b236faa8  EFLAGS: 00010292
RAX: dffffc0000000000 RBX: ffff8800a35a9280 RCX: ffff8800ba05e580
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000003
RBP: ffff8800b236fb48 R08: ffff8800a35a9280 R09: 0000000000000001
R10: 0000000000000007 R11: 0000000000000000 R12: 0000000000000084
R13: 0000000000000000 R14: ffff8800ba05e580 R15: ffff8800b54ad080
FS:  0000000000000000(0000) GS:ffff88012c000000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000562c1786dd28 CR3: 00000000aef00000 CR4: 00000000001406f0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Stack:
 0000000000000000 0000000000000000 0000000000000002 0000000000000000
 ffff8800b236fb48 0000000000000286 0000000000000000 ffffffff85cc2e41
 ffff880000000000 ffff8800ba05e580 ffff8800b54ad150 ffff8800ba05e580
Call Trace:
 [<ffffffff85cc2fd2>] batadv_iv_ogm_schedule+0x912/0xc70 net/batman-adv/bat_iv_ogm.c:984
 [<ffffffff85d0f231>] batadv_schedule_bat_ogm net/batman-adv/send.c:448 [inline]
 [<ffffffff85d0f231>] batadv_send_outstanding_bat_ogm_packet+0x2f1/0x410 net/batman-adv/send.c:636
 [<ffffffff8138bf1c>] process_one_work+0x67c/0x14f0 kernel/workqueue.c:2096
 [<ffffffff8138ce6a>] worker_thread+0xda/0xf10 kernel/workqueue.c:2230
 [<ffffffff8139d919>] kthread+0x209/0x2d0 kernel/kthread.c:209
 [<ffffffff85dfe80f>] ret_from_fork+0x1f/0x40 arch/x86/entry/entry_64.S:389
Code: 00 00 00 fc ff df 55 48 89 e5 41 57 49 89 ff 48 8d 7e 03 41 56 41 55 49 89 f5 41 54 41 89 d4 48 89 fa 48 c1 ea 03 53 48 83 ec 78 <0f> b6 04 02 48 89 fa 48 89 4d a8 83 e2 07 4c 89 45 b8 44 89 4d 
RIP  [<ffffffff85cc011f>] batadv_iv_ogm_queue_add+0x2f/0x1150 net/batman-adv/bat_iv_ogm.c:782
 RSP <ffff8800b236faa8>
---[ end trace f344a103df998cfd ]---

