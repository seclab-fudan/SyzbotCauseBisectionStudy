bisecting cause commit starting from 76bb8b05960c3d1668e6bee7624ed886cbd135ba
building syzkaller on ae13a849e613cd929bbcf98bec83e1bdb30a62b1
testing commit 76bb8b05960c3d1668e6bee7624ed886cbd135ba with gcc (GCC) 8.1.0
kernel signature: c7429145ce4d883f91983d105cd4eb8fee6a1734
run #0: crashed: KASAN: use-after-free Read in tty_open
run #1: crashed: KASAN: use-after-free Read in tty_open
run #2: crashed: KASAN: use-after-free Read in tty_open
run #3: crashed: KASAN: use-after-free Read in tty_open
run #4: crashed: KASAN: use-after-free Read in tty_open
run #5: crashed: KASAN: use-after-free Write in release_tty
run #6: crashed: KASAN: use-after-free Read in tty_open
run #7: crashed: KASAN: use-after-free Read in tty_open
run #8: crashed: KASAN: use-after-free Read in tty_open
run #9: crashed: KASAN: use-after-free Read in tty_open
testing release v5.4
testing commit 219d54332a09e8d8741c1e1982f5eae56099de85 with gcc (GCC) 8.1.0
kernel signature: b6acd16a48a746e4c9ee8a184bc83fc4ca195908
run #0: crashed: KASAN: use-after-free Read in tty_open
run #1: crashed: KASAN: use-after-free Write in release_tty
run #2: crashed: KASAN: use-after-free Read in tty_open
run #3: crashed: KASAN: use-after-free Write in release_tty
run #4: crashed: KASAN: use-after-free Read in tty_open
run #5: crashed: KASAN: use-after-free Read in tty_open
run #6: crashed: KASAN: use-after-free Write in release_tty
run #7: crashed: KASAN: use-after-free Read in tty_open
run #8: crashed: KASAN: use-after-free Write in release_tty
run #9: crashed: KASAN: use-after-free Read in tty_open
testing release v5.3
testing commit 4d856f72c10ecb060868ed10ff1b1453943fc6c8 with gcc (GCC) 8.1.0
kernel signature: 3d72b232ff777a6cdfd02c8bb6736d94c4749f9c
all runs: crashed: KASAN: use-after-free Read in tty_open
testing release v5.2
testing commit 0ecfebd2b52404ae0c54a878c872bb93363ada36 with gcc (GCC) 8.1.0
kernel signature: b833d7cbd187a019a2724c4795b40a2112598c0a
all runs: crashed: KASAN: use-after-free Read in tty_open
testing release v5.1
testing commit e93c9c99a629c61837d5a7fc2120cd2b6c70dbdd with gcc (GCC) 8.1.0
kernel signature: 460ef4d7b4698d32970fdefd5d7d27e383c5752c
run #0: crashed: KASAN: use-after-free Write in release_tty
run #1: crashed: KASAN: use-after-free Read in tty_open
run #2: crashed: KASAN: use-after-free Read in tty_open
run #3: crashed: KASAN: use-after-free Read in tty_open
run #4: crashed: KASAN: use-after-free Read in tty_open
run #5: crashed: KASAN: use-after-free Read in tty_open
run #6: crashed: KASAN: use-after-free Read in tty_open
run #7: crashed: KASAN: use-after-free Read in tty_open
run #8: crashed: KASAN: use-after-free Read in tty_open
run #9: crashed: KASAN: use-after-free Read in tty_open
testing release v5.0
testing commit 1c163f4c7b3f621efff9b28a47abb36f7378d783 with gcc (GCC) 8.1.0
kernel signature: 1251b4f26c2a0160ef88e4b76e8422a323f323fa
run #0: crashed: KASAN: use-after-free Read in tty_open
run #1: crashed: KASAN: use-after-free Read in tty_open
run #2: crashed: KASAN: use-after-free Read in tty_open
run #3: crashed: KASAN: use-after-free Read in tty_open
run #4: crashed: KASAN: use-after-free Read in tty_open
run #5: crashed: KASAN: use-after-free Read in tty_open
run #6: crashed: KASAN: use-after-free Read in tty_open
run #7: crashed: KASAN: use-after-free Write in release_tty
run #8: crashed: KASAN: use-after-free Read in tty_open
run #9: crashed: KASAN: use-after-free Read in tty_open
testing release v4.20
testing commit 8fe28cb58bcb235034b64cbbb7550a8a43fd88be with gcc (GCC) 8.1.0
kernel signature: c1f330f2128b9b61001f80dcce4d860b3736b2b4
run #0: crashed: KASAN: use-after-free Read in tty_open
run #1: crashed: KASAN: use-after-free Read in tty_open
run #2: crashed: KASAN: use-after-free Write in release_tty
run #3: crashed: KASAN: use-after-free Write in release_tty
run #4: crashed: KASAN: use-after-free Read in tty_open
run #5: crashed: KASAN: use-after-free Read in tty_open
run #6: crashed: KASAN: use-after-free Read in tty_open
run #7: crashed: KASAN: use-after-free Read in tty_open
run #8: crashed: KASAN: use-after-free Read in tty_open
run #9: crashed: KASAN: use-after-free Write in release_tty
testing release v4.19
testing commit 84df9525b0c27f3ebc2ebb1864fa62a97fdedb7d with gcc (GCC) 8.1.0
kernel signature: 09f676b5c416c8ca7c3a71ce3c3c2882ec834962
all runs: crashed: KASAN: use-after-free Read in tty_open
testing release v4.18
testing commit 94710cac0ef4ee177a63b5227664b38c95bbf703 with gcc (GCC) 8.1.0
kernel signature: 2840ec3e081b1570a24cc0f283a273cc02a245d6
run #0: crashed: KASAN: use-after-free Read in tty_open
run #1: crashed: KASAN: use-after-free Write in release_tty
run #2: crashed: KASAN: use-after-free Read in tty_open
run #3: crashed: KASAN: use-after-free Read in tty_open
run #4: crashed: KASAN: use-after-free Read in tty_open
run #5: crashed: KASAN: use-after-free Read in tty_open
run #6: crashed: KASAN: use-after-free Read in tty_open
run #7: crashed: KASAN: use-after-free Read in tty_open
run #8: crashed: KASAN: use-after-free Read in tty_open
run #9: crashed: KASAN: use-after-free Read in tty_open
testing release v4.17
testing commit 29dcea88779c856c7dc92040a0c01233263101d4 with gcc (GCC) 8.1.0
kernel signature: d3534702f0899b1c4eb65613699480efd57deb60
all runs: crashed: KASAN: use-after-free Read in tty_open
testing release v4.16
testing commit 0adb32858b0bddf4ada5f364a84ed60b196dbcda with gcc (GCC) 8.1.0
kernel signature: 88882511a43f7e7d2249b38c0f690c6959901f8f
run #0: crashed: KASAN: use-after-free Write in release_tty
run #1: crashed: KASAN: use-after-free Read in tty_open
run #2: crashed: KASAN: use-after-free Read in tty_open
run #3: crashed: KASAN: use-after-free Read in tty_open
run #4: crashed: KASAN: use-after-free Read in tty_open
run #5: crashed: KASAN: use-after-free Read in tty_open
run #6: crashed: KASAN: use-after-free Read in tty_open
run #7: crashed: KASAN: use-after-free Read in tty_open
run #8: crashed: KASAN: use-after-free Read in tty_open
run #9: crashed: KASAN: use-after-free Read in tty_open
testing release v4.15
testing commit d8a5b80568a9cb66810e75b182018e9edb68e8ff with gcc (GCC) 8.1.0
kernel signature: d50e1143c813099a9201b8ac8eebd9d790d690dc
all runs: crashed: KASAN: use-after-free Read in tty_open
testing release v4.14
testing commit bebc6082da0a9f5d47a1ea2edc099bf671058bd4 with gcc (GCC) 8.1.0
kernel signature: 4174e556f20824577aa90b1fa336a4a0e40d8979
run #0: crashed: KASAN: use-after-free Read in tty_open
run #1: crashed: KASAN: use-after-free Read in tty_open
run #2: crashed: KASAN: use-after-free Read in tty_open
run #3: crashed: KASAN: use-after-free Read in tty_open
run #4: crashed: KASAN: use-after-free Read in tty_open
run #5: crashed: KASAN: use-after-free Read in tty_open
run #6: crashed: KASAN: use-after-free Read in tty_open
run #7: crashed: KASAN: use-after-free Read in tty_open
run #8: crashed: KASAN: use-after-free Write in release_tty
run #9: crashed: KASAN: use-after-free Read in tty_open
testing release v4.13
testing commit 569dbb88e80deb68974ef6fdd6a13edb9d686261 with gcc (GCC) 8.1.0
kernel signature: 3b42da6b583fe36c93d9929f336ef6d312227274
all runs: crashed: KASAN: use-after-free Write in release_tty
testing release v4.12
testing commit 6f7da290413ba713f0cdd9ff1a2a9bb129ef4f6c with gcc (GCC) 8.1.0
kernel signature: 0a7372d945fff397946b143b1947d6f974ef871a
all runs: crashed: KASAN: use-after-free Write in release_tty
testing release v4.11
testing commit a351e9b9fc24e982ec2f0e76379a49826036da12 with gcc (GCC) 7.3.0
kernel signature: 46c6e6bff62a0c6ba9d867b4fb47c7579e4fac9f
all runs: crashed: KASAN: use-after-free Write in release_tty
testing release v4.10
testing commit c470abd4fde40ea6a0846a2beab642a578c0b8cd with gcc (GCC) 5.5.0
kernel signature: 2fd75667664b5c9ba8a311fa7966fb8d8a54a58e
all runs: crashed: KASAN: use-after-free Write in release_tty
testing release v4.9
testing commit 69973b830859bc6529a7a0468ba0d80ee5117826 with gcc (GCC) 5.5.0
kernel signature: d172b94588eeb52279f37f8b0092df763ad36a90
all runs: crashed: KASAN: use-after-free Write in release_tty
testing release v4.8
testing commit c8d2bc9bc39ebea8437fd974fdbc21847bb897a3 with gcc (GCC) 5.5.0
kernel signature: 769bc87046e7efa0eee79659ed26e46d74332b7d
all runs: crashed: KASAN: use-after-free Write in release_tty
testing release v4.7
testing commit 523d939ef98fd712632d93a5a2b588e477a7565e with gcc (GCC) 5.5.0
kernel signature: 2890d1679c9f20f765141b4781ee93c80576f52e
all runs: crashed: KASAN: use-after-free Write in release_tty
testing release v4.6
testing commit 2dcd0af568b0cf583645c8a317dd12e344b1c72a with gcc (GCC) 5.5.0
kernel signature: e6d3236f0eeafc20e031a2227df8afe63405fe87
run #0: crashed: KASAN: use-after-free Write in release_tty
run #1: crashed: general protection fault in tty_buffer_cancel_work
run #2: crashed: INFO: trying to register non-static key in tty_buffer_cancel_work
run #3: crashed: KASAN: use-after-free Write in release_tty
run #4: crashed: KASAN: use-after-free Write in release_tty
run #5: crashed: KASAN: use-after-free Write in release_tty
run #6: crashed: KASAN: use-after-free Write in release_tty
run #7: crashed: KASAN: use-after-free Write in release_tty
run #8: crashed: KASAN: use-after-free Write in release_tty
run #9: crashed: KASAN: use-after-free Write in release_tty
testing release v4.5
testing commit b562e44f507e863c6792946e4e1b1449fbbac85d with gcc (GCC) 5.5.0
kernel signature: 33f6fa20757dea2fbc250e88721bde1b01fef253
all runs: OK
# git bisect start 2dcd0af568b0cf583645c8a317dd12e344b1c72a b562e44f507e863c6792946e4e1b1449fbbac85d
Bisecting: 8131 revisions left to test after this (roughly 13 steps)
[6b5f04b6cf8ebab9a65d9c0026c650bb2538fd0f] Merge branch 'for-4.6' of git://git.kernel.org/pub/scm/linux/kernel/git/tj/cgroup
testing commit 6b5f04b6cf8ebab9a65d9c0026c650bb2538fd0f with gcc (GCC) 5.5.0
kernel signature: afb9a190a02c59cf6083c341a2956a782d1e0d77
all runs: OK
# git bisect good 6b5f04b6cf8ebab9a65d9c0026c650bb2538fd0f
Bisecting: 3735 revisions left to test after this (roughly 12 steps)
[266c73b77706f2d05b4a3e70a5bb702ed35431d6] Merge branch 'drm-next' of git://people.freedesktop.org/~airlied/linux
testing commit 266c73b77706f2d05b4a3e70a5bb702ed35431d6 with gcc (GCC) 5.5.0
/syzkaller/jobs/linux/kernel/net/openvswitch/conntrack.c:540: undefined reference to `nf_nat_icmp_reply_translation'
# git bisect skip 266c73b77706f2d05b4a3e70a5bb702ed35431d6
Bisecting: 3735 revisions left to test after this (roughly 12 steps)
[4cd05a74cc604ef1cc6ac37a25629e185bcd2cc5] drm/amd/powerplay: notify amdgpu whether dpm is enabled or not.
testing commit 4cd05a74cc604ef1cc6ac37a25629e185bcd2cc5 with gcc (GCC) 5.5.0
mm/kasan/kasan.c:501:3: error: too few arguments to function ‘set_track’
# git bisect skip 4cd05a74cc604ef1cc6ac37a25629e185bcd2cc5
Bisecting: 3735 revisions left to test after this (roughly 12 steps)
[51c0e87e9a48d081d7ccb40d7454a0fa2935a424] powerpc/eeh: Cache normal BARs, not windows or IOV BARs
testing commit 51c0e87e9a48d081d7ccb40d7454a0fa2935a424 with gcc (GCC) 5.5.0
kernel signature: de99241de5b7c82a2323f1429ba2f8d64c3efaf0
run #0: crashed: possible deadlock in nf_conntrack_lock
run #1: crashed: possible deadlock in nf_conntrack_lock
run #2: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor669201203" "root@10.128.10.58:./syz-executor669201203"]: exit status 1
ssh: connect to host 10.128.10.58 port 22: Connection timed out
lost connection

run #3: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor291677430" "root@10.128.10.62:./syz-executor291677430"]: exit status 1
ssh: connect to host 10.128.10.62 port 22: Connection timed out
lost connection

run #4: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor284935133" "root@10.128.10.63:./syz-executor284935133"]: exit status 1
ssh: connect to host 10.128.10.63 port 22: Connection timed out
lost connection

run #5: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor686599576" "root@10.128.15.192:./syz-executor686599576"]: exit status 1
ssh: connect to host 10.128.15.192 port 22: Connection timed out
lost connection

run #6: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor274951703" "root@10.128.10.42:./syz-executor274951703"]: exit status 1
ssh: connect to host 10.128.10.42 port 22: Connection timed out
lost connection

run #7: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor620280970" "root@10.128.15.197:./syz-executor620280970"]: exit status 1
ssh: connect to host 10.128.15.197 port 22: Connection timed out
lost connection

run #8: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #9: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
# git bisect bad 51c0e87e9a48d081d7ccb40d7454a0fa2935a424
Bisecting: 35 revisions left to test after this (roughly 5 steps)
[a9d4996df1f49dc7b45e55060436cace87f1e0d4] powerpc/mm/book3s-64: Move HPTE-related bits in PTE to upper end
testing commit a9d4996df1f49dc7b45e55060436cace87f1e0d4 with gcc (GCC) 5.5.0
kernel signature: 35bf2babce11c84f8369d8bed50b853dac808935
run #0: crashed: possible deadlock in nf_conntrack_lock
run #1: crashed: possible deadlock in nf_conntrack_lock
run #2: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor077978188" "root@10.128.10.35:./syz-executor077978188"]: exit status 1
ssh: connect to host 10.128.10.35 port 22: Connection timed out
lost connection

run #3: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor659167035" "root@10.128.10.15:./syz-executor659167035"]: exit status 1
ssh: connect to host 10.128.10.15 port 22: Connection timed out
lost connection

run #4: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor087466846" "root@10.128.0.3:./syz-executor087466846"]: exit status 1
ssh: connect to host 10.128.0.3 port 22: Connection timed out
lost connection

run #5: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor964342565" "root@10.128.15.219:./syz-executor964342565"]: exit status 1
ssh: connect to host 10.128.15.219 port 22: Connection timed out
lost connection

run #6: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor309474880" "root@10.128.10.61:./syz-executor309474880"]: exit status 1
ssh: connect to host 10.128.10.61 port 22: Connection timed out
lost connection

run #7: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #8: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #9: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
# git bisect bad a9d4996df1f49dc7b45e55060436cace87f1e0d4
Bisecting: 17 revisions left to test after this (roughly 4 steps)
[dc53617c4a3f6ca35641dfd4279720365ce9f4da] powerpc: atomic: Implement atomic{, 64}_*_return_* variants
testing commit dc53617c4a3f6ca35641dfd4279720365ce9f4da with gcc (GCC) 5.5.0
kernel signature: 02079e3344c8ca193929ce21d03cfa33b55b33c8
run #0: crashed: possible deadlock in nf_conntrack_lock
run #1: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor908649330" "root@10.128.0.219:./syz-executor908649330"]: exit status 1
ssh: connect to host 10.128.0.219 port 22: Connection timed out
lost connection

run #2: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor936103977" "root@10.128.10.2:./syz-executor936103977"]: exit status 1
ssh: connect to host 10.128.10.2 port 22: Connection timed out
lost connection

run #3: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor804406132" "root@10.128.0.239:./syz-executor804406132"]: exit status 1
ssh: connect to host 10.128.0.239 port 22: Connection timed out
lost connection

run #4: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor284778051" "root@10.128.0.214:./syz-executor284778051"]: exit status 1
ssh: connect to host 10.128.0.214 port 22: Connection timed out
lost connection

run #5: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor838654662" "root@10.128.10.31:./syz-executor838654662"]: exit status 1
ssh: connect to host 10.128.10.31 port 22: Connection timed out
lost connection

run #6: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor178723181" "root@10.128.10.59:./syz-executor178723181"]: exit status 1
ssh: connect to host 10.128.10.59 port 22: Connection timed out
lost connection

run #7: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #8: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #9: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
# git bisect bad dc53617c4a3f6ca35641dfd4279720365ce9f4da
Bisecting: 8 revisions left to test after this (roughly 3 steps)
[7fbe7a9374f8bb18db653f4693861c8625d01db1] powerpc/powernv: simplify the calculation of iov resource alignment
testing commit 7fbe7a9374f8bb18db653f4693861c8625d01db1 with gcc (GCC) 5.5.0
kernel signature: 93fd2222368c9ed6fe696c8aca971c8b5d733c65
run #0: crashed: possible deadlock in nf_conntrack_lock
run #1: crashed: possible deadlock in nf_conntrack_lock
run #2: crashed: possible deadlock in nf_conntrack_lock
run #3: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor888220711" "root@10.128.1.15:./syz-executor888220711"]: exit status 1
ssh: connect to host 10.128.1.15 port 22: Connection timed out
lost connection

run #4: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor410644826" "root@10.128.1.21:./syz-executor410644826"]: exit status 1
ssh: connect to host 10.128.1.21 port 22: Connection timed out
lost connection

run #5: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor267145969" "root@10.128.0.162:./syz-executor267145969"]: exit status 1
ssh: connect to host 10.128.0.162 port 22: Connection timed out
lost connection

run #6: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor308897180" "root@10.128.0.255:./syz-executor308897180"]: exit status 1
ssh: connect to host 10.128.0.255 port 22: Connection timed out
lost connection

run #7: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor212070987" "root@10.128.10.36:./syz-executor212070987"]: exit status 1
ssh: connect to host 10.128.10.36 port 22: Connection timed out
lost connection

run #8: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor075450670" "root@10.128.10.39:./syz-executor075450670"]: exit status 1
ssh: connect to host 10.128.10.39 port 22: Connection timed out
lost connection

run #9: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
# git bisect bad 7fbe7a9374f8bb18db653f4693861c8625d01db1
Bisecting: 4 revisions left to test after this (roughly 2 steps)
[9b4fffa14906fce7aabf1f032ddd7efc7a031bba] powerpc/powernv: new function to access OPAL msglog
testing commit 9b4fffa14906fce7aabf1f032ddd7efc7a031bba with gcc (GCC) 5.5.0
kernel signature: 74a72799f3d6d73c8219634b797af2456b3e7c4c
run #0: crashed: possible deadlock in nf_conntrack_lock
run #1: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor668236432" "root@10.128.1.23:./syz-executor668236432"]: exit status 1
ssh: connect to host 10.128.1.23 port 22: Connection timed out
lost connection

run #2: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor184464047" "root@10.128.1.27:./syz-executor184464047"]: exit status 1
ssh: connect to host 10.128.1.27 port 22: Connection timed out
lost connection

run #3: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor028280386" "root@10.128.0.180:./syz-executor028280386"]: exit status 1
ssh: connect to host 10.128.0.180 port 22: Connection timed out
lost connection

run #4: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor581846713" "root@10.128.0.120:./syz-executor581846713"]: exit status 1
ssh: connect to host 10.128.0.120 port 22: Connection timed out
lost connection

run #5: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #6: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #7: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #8: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #9: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor302982340" "root@10.128.0.121:./syz-executor302982340"]: exit status 1
ssh: connect to host 10.128.0.121 port 22: Connection timed out
lost connection

# git bisect bad 9b4fffa14906fce7aabf1f032ddd7efc7a031bba
Bisecting: 1 revision left to test after this (roughly 1 step)
[2e34057929cad8a90b775581216886d22b642e0a] powerpc/xmon: fix typo in usage message
testing commit 2e34057929cad8a90b775581216886d22b642e0a with gcc (GCC) 5.5.0
kernel signature: 7509b57f12e9a8e52b7a6434c3be363d37730f54
run #0: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor367758998" "root@10.128.10.11:./syz-executor367758998"]: exit status 1
ssh: connect to host 10.128.10.11 port 22: Connection timed out
lost connection

run #1: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor759755005" "root@10.128.10.12:./syz-executor759755005"]: exit status 1
ssh: connect to host 10.128.10.12 port 22: Connection timed out
lost connection

run #2: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor402631736" "root@10.128.10.22:./syz-executor402631736"]: exit status 1
ssh: connect to host 10.128.10.22 port 22: Connection timed out
lost connection

run #3: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor281435703" "root@10.128.10.26:./syz-executor281435703"]: exit status 1
ssh: connect to host 10.128.10.26 port 22: Connection timed out
lost connection

run #4: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #5: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #6: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #7: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #8: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #9: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
# git bisect bad 2e34057929cad8a90b775581216886d22b642e0a
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[2de50e9674fc4ca3c6174b04477f69eb26b4ee31] powerpc/powernv: Remove support for p5ioc2
testing commit 2de50e9674fc4ca3c6174b04477f69eb26b4ee31 with gcc (GCC) 5.5.0
kernel signature: 312890df427f958498d71a7eb164866c823742de
run #0: crashed: possible deadlock in nf_conntrack_lock
run #1: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor628435329" "root@10.128.15.220:./syz-executor628435329"]: exit status 1
ssh: connect to host 10.128.15.220 port 22: Connection timed out
lost connection

run #2: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor663567084" "root@10.128.15.221:./syz-executor663567084"]: exit status 1
ssh: connect to host 10.128.15.221 port 22: Connection timed out
lost connection

run #3: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor159788891" "root@10.128.0.76:./syz-executor159788891"]: exit status 1
ssh: connect to host 10.128.0.76 port 22: Connection timed out
lost connection

run #4: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor012457214" "root@10.128.15.224:./syz-executor012457214"]: exit status 1
ssh: connect to host 10.128.15.224 port 22: Connection timed out
lost connection

run #5: basic kernel testing failed: failed to copy test binary to VM: failed to run ["scp" "-P" "22" "-F" "/dev/null" "-o" "UserKnownHostsFile=/dev/null" "-o" "BatchMode=yes" "-o" "IdentitiesOnly=yes" "-o" "StrictHostKeyChecking=no" "-o" "ConnectTimeout=10" "-i" "/syzkaller/jobs/linux/workdir/image/key" "/tmp/syz-executor090433093" "root@10.128.15.225:./syz-executor090433093"]: exit status 1
ssh: connect to host 10.128.15.225 port 22: Connection timed out
lost connection

run #6: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #7: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #8: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
run #9: crashed: BUG: spinlock lockup suspected in nf_conntrack_lock
# git bisect bad 2de50e9674fc4ca3c6174b04477f69eb26b4ee31
2de50e9674fc4ca3c6174b04477f69eb26b4ee31 is the first bad commit
commit 2de50e9674fc4ca3c6174b04477f69eb26b4ee31
Author: Russell Currey <ruscur@russell.cc>
Date:   Mon Feb 8 15:08:20 2016 +1100

    powerpc/powernv: Remove support for p5ioc2
    
    "p5ioc2 is used by approximately 2 machines in the world, and has never
    ever been a supported configuration."
    
    The code for p5ioc2 is essentially unused and complicates what is already
    a very complicated codebase.  Its removal is essentially a "free win" in
    the effort to simplify the powernv PCI code.
    
    In addition, support for p5ioc2 has been dropped from skiboot.  There's no
    reason to keep it around in the kernel.
    
    Signed-off-by: Russell Currey <ruscur@russell.cc>
    Acked-by: Gavin Shan <gwshan@linux.vnet.ibm.com>
    Acked-by: Stewart Smith <stewart@linux.vnet.ibm.com>
    Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>

 arch/powerpc/platforms/powernv/Makefile     |   2 +-
 arch/powerpc/platforms/powernv/pci-p5ioc2.c | 271 ----------------------------
 arch/powerpc/platforms/powernv/pci.c        |  17 +-
 arch/powerpc/platforms/powernv/pci.h        | 152 ++++++++--------
 4 files changed, 74 insertions(+), 368 deletions(-)
 delete mode 100644 arch/powerpc/platforms/powernv/pci-p5ioc2.c
revisions tested: 32, total time: 5h21m52.712045958s (build: 2h20m32.310487014s, test: 2h58m22.592710881s)
first bad commit: 2de50e9674fc4ca3c6174b04477f69eb26b4ee31 powerpc/powernv: Remove support for p5ioc2
cc: ["gwshan@linux.vnet.ibm.com" "mpe@ellerman.id.au" "ruscur@russell.cc" "stewart@linux.vnet.ibm.com"]
crash: BUG: spinlock lockup suspected in nf_conntrack_lock
IPv6: ADDRCONF(NETDEV_CHANGE): nr1: link becomes ready
IPv6: ADDRCONF(NETDEV_CHANGE): nr4: link becomes ready
IPv6: ADDRCONF(NETDEV_CHANGE): nr3: link becomes ready
IPv6: ADDRCONF(NETDEV_CHANGE): nr5: link becomes ready
BUG: spinlock lockup suspected on CPU#1, kworker/u4:1/19
 lock: nf_conntrack_locks+0x0/0xe000, .magic: dead4ead, .owner: kworker/u4:1/19, .owner_cpu: 1
CPU: 1 PID: 19 Comm: kworker/u4:1 Not tainted 4.5.0-rc3-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Workqueue: netns cleanup_net
 0000000000000000 ffff88012b04bc18 ffffffff8195cc30 ffff88012b044500
 ffffffff8320a780 ffff88012b04bc38 ffffffff811c3753 ffffffff8320a780
 0000000089173700 ffff88012b04bc68 ffffffff811c3883 ffffffff8320a780
Call Trace:
 [<ffffffff8195cc30>] __dump_stack lib/dump_stack.c:15 [inline]
 [<ffffffff8195cc30>] dump_stack+0x99/0xd9 lib/dump_stack.c:51
 [<ffffffff811c3753>] spin_dump+0x73/0xc0 kernel/locking/spinlock_debug.c:67
 [<ffffffff811c3883>] __spin_lock_debug kernel/locking/spinlock_debug.c:117 [inline]
 [<ffffffff811c3883>] do_raw_spin_lock+0xa3/0x160 kernel/locking/spinlock_debug.c:137
 [<ffffffff826dc37e>] __raw_spin_lock include/linux/spinlock_api_smp.h:145 [inline]
 [<ffffffff826dc37e>] _raw_spin_lock+0x3e/0x50 kernel/locking/spinlock.c:151
 [<ffffffff8222f9fd>] spin_lock include/linux/spinlock.h:302 [inline]
 [<ffffffff8222f9fd>] nf_conntrack_lock+0xd/0x50 net/netfilter/nf_conntrack_core.c:74
 [<ffffffff822484cc>] ctnl_untimeout.isra.4+0xdc/0x110 net/netfilter/nfnetlink_cttimeout.c:315
 [<ffffffff82248528>] cttimeout_net_exit+0x28/0x80 net/netfilter/nfnetlink_cttimeout.c:581
 [<ffffffff8219d283>] ops_exit_list.isra.4+0x33/0x60 net/core/net_namespace.c:134
 [<ffffffff8219e4f9>] cleanup_net+0x1a9/0x270 net/core/net_namespace.c:431
 [<ffffffff811884db>] process_one_work+0x21b/0x690 kernel/workqueue.c:2036
 [<ffffffff81188999>] worker_thread+0x49/0x490 kernel/workqueue.c:2170
 [<ffffffff8118f67a>] kthread+0xea/0x100 drivers/block/aoe/aoecmd.c:1312
 [<ffffffff826dd52f>] ret_from_fork+0x3f/0x70 arch/x86/entry/entry_64.S:468
Sending NMI to all CPUs:
NMI backtrace for cpu 0
CPU: 0 PID: 0 Comm: swapper/0 Not tainted 4.5.0-rc3-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
task: ffffffff83221540 ti: ffffffff83200000 task.ti: ffffffff83200000
RIP: 0010:[<ffffffff810c8686>]  [<ffffffff810c8686>] native_safe_halt+0x6/0x10 arch/x86/include/asm/irqflags.h:50
RSP: 0018:ffffffff83203eb8  EFLAGS: 00000282
RAX: 0000000000000000 RBX: ffffffff83200000 RCX: 0000000000000000
RDX: 0000000000000000 RSI: ffffffff82f69d89 RDI: ffffffff81089bf6
RBP: ffffffff83203eb8 R08: 0000000000000000 R09: 0000000000000001
R10: 0000000000000000 R11: 0000000000000000 R12: ffffffff83204000
R13: 0000000000000000 R14: 0000000000000000 R15: ffffffff83200000
FS:  0000000000000000(0000) GS:ffff88012c000000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 000000c42004be80 CR3: 00000000b5414000 CR4: 00000000001406f0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Stack:
 ffffffff83203ed8 ffffffff81089c09 ffffffff83200000 ffffffff83204000
 ffffffff83203ee8 ffffffff8108a61a ffffffff83203ef8 ffffffff811b6f45
 ffffffff83203f40 ffffffff811b733f ffffffff835902e0 ffffffff83204000
Call Trace:
 [<ffffffff81089c09>] arch_safe_halt arch/x86/include/asm/paravirt.h:117 [inline]
 [<ffffffff81089c09>] default_idle+0x29/0x190 arch/x86/kernel/process.c:304
 [<ffffffff8108a61a>] arch_cpu_idle+0xa/0x10 arch/x86/kernel/process.c:295
 [<ffffffff811b6f45>] default_idle_call+0x25/0x50 kernel/sched/idle.c:92
 [<ffffffff811b733f>] cpuidle_idle_call kernel/sched/idle.c:150 [inline]
 [<ffffffff811b733f>] cpu_idle_loop kernel/sched/idle.c:246 [inline]
 [<ffffffff811b733f>] cpu_startup_entry+0x3cf/0x460 kernel/sched/idle.c:294
 [<ffffffff826cd951>] rest_init+0x131/0x140 init/main.c:412
 [<ffffffff834a2f94>] start_kernel+0x44a/0x457 init/main.c:683
 [<ffffffff834a2345>] x86_64_start_reservations+0x2a/0x2c arch/x86/kernel/head64.c:203
 [<ffffffff834a248c>] x86_64_start_kernel+0x145/0x152 arch/x86/kernel/head64.c:184
Code: 00 00 00 00 00 55 48 89 e5 fa 5d c3 66 0f 1f 84 00 00 00 00 00 55 48 89 e5 fb 5d c3 66 0f 1f 84 00 00 00 00 00 55 48 89 e5 fb f4 <5d> c3 0f 1f 84 00 00 00 00 00 55 48 89 e5 f4 5d c3 66 0f 1f 84 
NMI backtrace for cpu 1
CPU: 1 PID: 19 Comm: kworker/u4:1 Not tainted 4.5.0-rc3-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Workqueue: netns cleanup_net
task: ffff88012b044500 ti: ffff88012b048000 task.ti: ffff88012b048000
RIP: 0010:[<ffffffff810c8a66>]  [<ffffffff810c8a66>] native_write_msr_safe+0x6/0x40 arch/x86/include/asm/msr.h:132
RSP: 0018:ffff88012b04bb68  EFLAGS: 00000086
RAX: 0000000000000400 RBX: ffffffff83470880 RCX: 0000000000000830
RDX: 0000000000000001 RSI: 0000000000000400 RDI: 0000000000000830
RBP: ffff88012b04bb70 R08: 0000000000000400 R09: 0000000000000003
R10: ffff88012b044db0 R11: 0000000000000001 R12: 0000000000080000
R13: 0000000000000001 R14: 0000000000000002 R15: 000000000000a130
FS:  0000000000000000(0000) GS:ffff88012c100000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 000055a935989000 CR3: 000000000321a000 CR4: 00000000001406e0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Stack:
 ffffffff810c261a ffff88012b04bbb8 ffffffff810c2701 0000000000000282
 0000000000000001 00000000000114e0 0000000000000001 ffffffff810bf280
 0000000000000040 0000000000000001 ffff88012b04bbc8 ffffffff810c27ce
Call Trace:
 [<ffffffff810c2701>] __x2apic_send_IPI_mask+0xe1/0x150 arch/x86/kernel/apic/x2apic_phys.c:62
 [<ffffffff810c27ce>] x2apic_send_IPI_mask+0xe/0x10 arch/x86/kernel/apic/x2apic_cluster.c:87
 [<ffffffff810bf296>] nmi_raise_cpu_backtrace+0x16/0x20 arch/x86/kernel/apic/hw_nmi.c:33
 [<ffffffff819617e2>] nmi_trigger_all_cpu_backtrace+0x322/0x330 lib/nmi_backtrace.c:85
 [<ffffffff810bf2f4>] arch_trigger_all_cpu_backtrace+0x14/0x20 arch/x86/kernel/apic/hw_nmi.c:38
 [<ffffffff811c388d>] trigger_all_cpu_backtrace include/linux/nmi.h:41 [inline]
 [<ffffffff811c388d>] __spin_lock_debug kernel/locking/spinlock_debug.c:119 [inline]
 [<ffffffff811c388d>] do_raw_spin_lock+0xad/0x160 kernel/locking/spinlock_debug.c:137
 [<ffffffff826dc37e>] __raw_spin_lock include/linux/spinlock_api_smp.h:145 [inline]
 [<ffffffff826dc37e>] _raw_spin_lock+0x3e/0x50 kernel/locking/spinlock.c:151
 [<ffffffff8222f9fd>] spin_lock include/linux/spinlock.h:302 [inline]
 [<ffffffff8222f9fd>] nf_conntrack_lock+0xd/0x50 net/netfilter/nf_conntrack_core.c:74
 [<ffffffff822484cc>] ctnl_untimeout.isra.4+0xdc/0x110 net/netfilter/nfnetlink_cttimeout.c:315
 [<ffffffff82248528>] cttimeout_net_exit+0x28/0x80 net/netfilter/nfnetlink_cttimeout.c:581
 [<ffffffff8219d283>] ops_exit_list.isra.4+0x33/0x60 net/core/net_namespace.c:134
 [<ffffffff8219e4f9>] cleanup_net+0x1a9/0x270 net/core/net_namespace.c:431
 [<ffffffff811884db>] process_one_work+0x21b/0x690 kernel/workqueue.c:2036
 [<ffffffff81188999>] worker_thread+0x49/0x490 kernel/workqueue.c:2170
 [<ffffffff8118f67a>] kthread+0xea/0x100 drivers/block/aoe/aoecmd.c:1312
 [<ffffffff826dd52f>] ret_from_fork+0x3f/0x70 arch/x86/entry/entry_64.S:468
Code: 5b 5d c3 48 c1 e2 20 48 89 d3 31 d2 48 09 c3 48 89 de e8 3e f0 8c 00 48 89 d8 5b 5d c3 0f 1f 84 00 00 00 00 00 89 f0 89 f9 0f 30 <31> c0 0f 1f 44 00 00 c3 41 89 f0 48 89 d6 55 89 c2 48 c1 e6 20 
INFO: rcu_preempt self-detected stall on CPU
	1-...: (10452 ticks this GP) idle=9eb/140000000000001/0 softirq=6054/6054 fqs=10433 
	 (t=10500 jiffies g=451 c=450 q=973)
Task dump for CPU 1:
kworker/u4:1    R  running task    12480    19      2 0x00000008
Workqueue: netns cleanup_net
 ffff88012b044500 ffff88012c103da0 ffffffff8119ee63 0000000000000001
 ffffffff83272b00 0000000000000086 ffff88012c103db8 ffffffff811a1c42
 0000000000000002 ffff88012c103de8 ffffffff811db709 ffff88012c117dc0
Call Trace:
 <IRQ>  [<ffffffff8119ee63>] sched_show_task+0xe3/0x180 kernel/sched/core.c:5036
 [<ffffffff811a1c42>] dump_cpu_task+0x32/0x40 kernel/sched/core.c:8717
 [<ffffffff811db709>] rcu_dump_cpu_stacks+0x89/0xe0 kernel/rcu/tree.c:1247
 [<ffffffff811e08ed>] print_cpu_stall kernel/rcu/tree.c:1354 [inline]
 [<ffffffff811e08ed>] check_cpu_stall kernel/rcu/tree.c:1418 [inline]
 [<ffffffff811e08ed>] __rcu_pending kernel/rcu/tree.c:3906 [inline]
 [<ffffffff811e08ed>] rcu_pending kernel/rcu/tree.c:3970 [inline]
 [<ffffffff811e08ed>] rcu_check_callbacks+0x66d/0xa30 kernel/rcu/tree.c:2795
 [<ffffffff811e6f04>] update_process_times+0x34/0x60 kernel/time/timer.c:1420
 [<ffffffff811f79b0>] tick_sched_handle.isra.20+0x20/0x60 kernel/time/tick-sched.c:152
 [<ffffffff811f7ca8>] tick_sched_timer+0x38/0x70 kernel/time/tick-sched.c:1088
 [<ffffffff811e7b1d>] __run_hrtimer kernel/time/hrtimer.c:1248 [inline]
 [<ffffffff811e7b1d>] __hrtimer_run_queues+0x11d/0x4a0 kernel/time/hrtimer.c:1312
 [<ffffffff811e84da>] hrtimer_interrupt+0xaa/0x1b0 kernel/time/hrtimer.c:1346
 [<ffffffff810bbb71>] local_apic_timer_interrupt+0x31/0x50 arch/x86/kernel/apic/apic.c:907
 [<ffffffff810bc678>] smp_apic_timer_interrupt+0x38/0x50 arch/x86/kernel/apic/apic.c:931
 [<ffffffff826ddf7c>] apic_timer_interrupt+0x8c/0xa0 arch/x86/entry/entry_64.S:687
 <EOI>  [<ffffffff810c7c2b>] ? kvm_wait+0xbb/0xe0 arch/x86/kernel/kvm.c:612
 [<ffffffff810c7c3a>] arch_safe_halt arch/x86/include/asm/paravirt.h:117 [inline]
 [<ffffffff810c7c3a>] kvm_wait+0xca/0xe0 arch/x86/kernel/kvm.c:612
 [<ffffffff811c212a>] pv_wait arch/x86/include/asm/paravirt.h:680 [inline]
 [<ffffffff811c212a>] pv_wait_head_or_lock kernel/locking/qspinlock_paravirt.h:449 [inline]
 [<ffffffff811c212a>] __pv_queued_spin_lock_slowpath+0x26a/0x2d0 kernel/locking/qspinlock.c:446
 [<ffffffff811c3937>] pv_queued_spin_lock_slowpath arch/x86/include/asm/paravirt.h:670 [inline]
 [<ffffffff811c3937>] queued_spin_lock_slowpath arch/x86/include/asm/qspinlock.h:28 [inline]
 [<ffffffff811c3937>] queued_spin_lock include/asm-generic/qspinlock.h:84 [inline]
 [<ffffffff811c3937>] __spin_lock_debug kernel/locking/spinlock_debug.c:130 [inline]
 [<ffffffff811c3937>] do_raw_spin_lock+0x157/0x160 kernel/locking/spinlock_debug.c:137
 [<ffffffff826dc37e>] __raw_spin_lock include/linux/spinlock_api_smp.h:145 [inline]
 [<ffffffff826dc37e>] _raw_spin_lock+0x3e/0x50 kernel/locking/spinlock.c:151
 [<ffffffff8222f9fd>] spin_lock include/linux/spinlock.h:302 [inline]
 [<ffffffff8222f9fd>] nf_conntrack_lock+0xd/0x50 net/netfilter/nf_conntrack_core.c:74
 [<ffffffff822484cc>] ctnl_untimeout.isra.4+0xdc/0x110 net/netfilter/nfnetlink_cttimeout.c:315
 [<ffffffff82248528>] cttimeout_net_exit+0x28/0x80 net/netfilter/nfnetlink_cttimeout.c:581
 [<ffffffff8219d283>] ops_exit_list.isra.4+0x33/0x60 net/core/net_namespace.c:134
 [<ffffffff8219e4f9>] cleanup_net+0x1a9/0x270 net/core/net_namespace.c:431
 [<ffffffff811884db>] process_one_work+0x21b/0x690 kernel/workqueue.c:2036
 [<ffffffff81188999>] worker_thread+0x49/0x490 kernel/workqueue.c:2170
 [<ffffffff8118f67a>] kthread+0xea/0x100 drivers/block/aoe/aoecmd.c:1312
 [<ffffffff826dd52f>] ret_from_fork+0x3f/0x70 arch/x86/entry/entry_64.S:468

