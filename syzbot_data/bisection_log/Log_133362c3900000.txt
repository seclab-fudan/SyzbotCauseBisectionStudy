bisecting cause commit starting from 98477740630f270aecf648f1d6a9dbc6027d4ff1
building syzkaller on 3e8f6c27551f163a2fd2661e4b3cac126a5e7ef2
testing commit 98477740630f270aecf648f1d6a9dbc6027d4ff1 with gcc (GCC) 8.1.0
kernel signature: 92dabd41285b9c2a1708b83c17d2ee76ac5df29db115950676871d8aa05add51
all runs: crashed: BUG: unable to handle kernel paging request in dqput
testing release v5.8
testing commit bcf876870b95592b52519ed4aafcf9d95999bc9c with gcc (GCC) 8.1.0
kernel signature: 5cc3edc93cf0f0896d049488b34aa578cef489072b552ac84dc662ac93d25b26
all runs: crashed: BUG: unable to handle kernel paging request in dqput
testing release v5.7
testing commit 3d77e6a8804abcc0504c904bd6e5cdf3a5cf8162 with gcc (GCC) 8.1.0
kernel signature: 4e1fb4a5dbe407144840aa537c743a2fcc0f5ad0b52b6a8daca66840622e9635
all runs: crashed: BUG: unable to handle kernel paging request in dqput
testing release v5.6
testing commit 7111951b8d4973bda27ff663f2cf18b663d15b48 with gcc (GCC) 8.1.0
kernel signature: 52b8360e0900b2375b835aa0091016617a46825770539c80ebfb4adf0022a5c8
all runs: crashed: BUG: unable to handle kernel paging request in dqput
testing release v5.5
testing commit d5226fa6dbae0569ee43ecfc08bdcd6770fc4755 with gcc (GCC) 8.1.0
kernel signature: 98bc84bf7b3e5cd205756df05b7fd98f7434ad3829245d260b059e1e6b518b3f
all runs: crashed: BUG: unable to handle kernel paging request in dqput
testing release v5.4
testing commit 219d54332a09e8d8741c1e1982f5eae56099de85 with gcc (GCC) 8.1.0
kernel signature: 6f0039b20634e4e960c98e9079754e6e30dfa46ac156ab7036127215788f0d52
all runs: crashed: BUG: unable to handle kernel paging request in dqput
testing release v5.3
testing commit 4d856f72c10ecb060868ed10ff1b1453943fc6c8 with gcc (GCC) 8.1.0
kernel signature: a11cd261563f3a42fc63addfddf59fb8d9e36c28833bc1e682f925a69e5bab69
all runs: crashed: BUG: unable to handle kernel paging request in dqput
testing release v5.2
testing commit 0ecfebd2b52404ae0c54a878c872bb93363ada36 with gcc (GCC) 8.1.0
kernel signature: 97a2348266b1929517c24b9c17b620f1d97a80402ffa5bc4ef337938f59ed4e1
run #0: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #1: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #2: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #3: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #4: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #5: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #6: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #7: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #8: crashed: BUG: unable to handle kernel paging request in dqput
run #9: crashed: BUG: unable to handle kernel paging request in dqput
testing release v5.1
testing commit e93c9c99a629c61837d5a7fc2120cd2b6c70dbdd with gcc (GCC) 8.1.0
kernel signature: 936e793817dce7014b75276bef1969d44bc6422b0a06fe536717a3faa8c60b13
all runs: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
testing release v5.0
testing commit 1c163f4c7b3f621efff9b28a47abb36f7378d783 with gcc (GCC) 8.1.0
kernel signature: 961fbc16c72a223e9791afd82233e2a4d29ec2900fb36cd97c5e04445f109e75
run #0: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #1: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #2: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #3: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #4: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #5: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #6: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #7: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #8: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #9: crashed: BUG: unable to handle kernel paging request in dqput
testing release v4.20
testing commit 8fe28cb58bcb235034b64cbbb7550a8a43fd88be with gcc (GCC) 8.1.0
kernel signature: 72d439fdf013acd288ca8b02e128355187c318721de696213b5ea4dc647351d3
run #0: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #1: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #2: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #3: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #4: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #5: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #6: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #7: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #8: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
run #9: crashed: BUG: unable to handle kernel paging request in dqput
testing release v4.19
testing commit 84df9525b0c27f3ebc2ebb1864fa62a97fdedb7d with gcc (GCC) 8.1.0
kernel signature: 2fc45d6769c7d3a715bae298014e140f64e6ddd5c6ae68a25404ee0bc26ae78a
all runs: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
testing release v4.18
testing commit 94710cac0ef4ee177a63b5227664b38c95bbf703 with gcc (GCC) 8.1.0
kernel signature: 752295031ab0ebc4338bd724247adeeb735fda784dbb355a00cb4672d1c85af9
all runs: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
testing release v4.17
testing commit 29dcea88779c856c7dc92040a0c01233263101d4 with gcc (GCC) 8.1.0
kernel signature: e848978b0ff7ddd39d961fbe4cb7b24663d6ea4026e1dc30300d492a4ba25bf7
all runs: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
testing release v4.16
testing commit 0adb32858b0bddf4ada5f364a84ed60b196dbcda with gcc (GCC) 8.1.0
kernel signature: c52bc73d398bfa3756a8753de47797ed083120be263958f2852feba0c673f21c
all runs: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_vq_reset
testing release v4.15
testing commit d8a5b80568a9cb66810e75b182018e9edb68e8ff with gcc (GCC) 8.1.0
./arch/x86/include/asm/bootparam_utils.h:37: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:39: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:42: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:45: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:48: undefined reference to `__ubsan_handle_type_mismatch_v1'
testing release v4.14
testing commit bebc6082da0a9f5d47a1ea2edc099bf671058bd4 with gcc (GCC) 8.1.0
./arch/x86/include/asm/bootparam_utils.h:37: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:39: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:42: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:45: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:48: undefined reference to `__ubsan_handle_type_mismatch_v1'
testing release v4.13
testing commit 569dbb88e80deb68974ef6fdd6a13edb9d686261 with gcc (GCC) 8.1.0
./arch/x86/include/asm/bootparam_utils.h:36: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:38: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:41: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:44: undefined reference to `__ubsan_handle_type_mismatch_v1'
./arch/x86/include/asm/bootparam_utils.h:47: undefined reference to `__ubsan_handle_type_mismatch_v1'
testing release v4.12
testing commit 6f7da290413ba713f0cdd9ff1a2a9bb129ef4f6c with gcc (GCC) 8.1.0
arch/x86/entry/common.c:173: undefined reference to `__ubsan_handle_type_mismatch_v1'
./include/linux/compiler.h:254: undefined reference to `__ubsan_handle_type_mismatch_v1'
./include/linux/tracehook.h:190: undefined reference to `__ubsan_handle_type_mismatch_v1'
./include/linux/thread_info.h:60: undefined reference to `__ubsan_handle_type_mismatch_v1'
./include/trace/events/syscalls.h:17: undefined reference to `__ubsan_handle_type_mismatch_v1'
testing release v4.11
testing commit a351e9b9fc24e982ec2f0e76379a49826036da12 with gcc (GCC) 7.3.0
kernel signature: d40b1da52ad7d44cf09577035c6e6007c7a5fc3498cbebc9d0b69520a9846084
run #0: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #1: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #2: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #3: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #4: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #5: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #6: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #7: crashed: BUG: sleeping function called from invalid context in tap_get_minor
run #8: crashed: BUG: sleeping function called from invalid context in tap_get_minor
run #9: crashed: BUG: sleeping function called from invalid context in tap_get_minor
testing release v4.10
testing commit c470abd4fde40ea6a0846a2beab642a578c0b8cd with gcc (GCC) 5.5.0
kernel signature: ecb35c7b865cd485ca596707b50ab555cad52b0dbe89965ef86750f8321bc6e4
run #0: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #1: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #2: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #3: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #4: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #5: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #6: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #7: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #8: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #9: OK
testing release v4.9
testing commit 69973b830859bc6529a7a0468ba0d80ee5117826 with gcc (GCC) 5.5.0
kernel signature: 29e74a42288370eca12d695f96c6f20296935e9a2d2d378ead09b493e33baa65
all runs: OK
# git bisect start a351e9b9fc24e982ec2f0e76379a49826036da12 69973b830859bc6529a7a0468ba0d80ee5117826
Bisecting: 14068 revisions left to test after this (roughly 14 steps)
[55aac6ef53e114c28170ee3f79065cfa8ca9cf3f] Merge git://git.kernel.org/pub/scm/linux/kernel/git/nab/target-pending
testing commit 55aac6ef53e114c28170ee3f79065cfa8ca9cf3f with gcc (GCC) 5.5.0
kernel signature: 45569d94e894c51093b596420959b75f54db1900fc934bad651d900ab19cf77f
run #0: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #1: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #2: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #3: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #4: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #5: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #6: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #7: OK
run #8: OK
run #9: OK
# git bisect skip 55aac6ef53e114c28170ee3f79065cfa8ca9cf3f
Bisecting: 14068 revisions left to test after this (roughly 14 steps)
[15883a43af0bcd10b3f3173bca4a0e60518bc154] net: sun: cassini: use new api ethtool_{get|set}_link_ksettings
testing commit 15883a43af0bcd10b3f3173bca4a0e60518bc154 with gcc (GCC) 5.5.0
kernel signature: 61127f805457793d8264c8864ee53924b101b5c68cd366d1ea10d1f5bd40b85d
all runs: boot failed: UBSAN: undefined-behaviour in acpi_ds_create_operand
# git bisect skip 15883a43af0bcd10b3f3173bca4a0e60518bc154
Bisecting: 14068 revisions left to test after this (roughly 14 steps)
[1a287cfea17c3c14c03151fa970baf86b9055c26] btrfs: remove unused parameters from btrfs_cmp_data
testing commit 1a287cfea17c3c14c03151fa970baf86b9055c26 with gcc (GCC) 5.5.0
kernel signature: 0a3176229f0f45a6e81d68508ccda968874451d46905007452171ed2c9bbefab
run #0: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #1: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #2: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #3: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #4: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #5: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #6: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #7: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #8: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #9: OK
# git bisect skip 1a287cfea17c3c14c03151fa970baf86b9055c26
Bisecting: 14068 revisions left to test after this (roughly 14 steps)
[b42c6761fd1651f564491b53016046c9ebf0b2a9] amd-xgbe: Be sure to set MDIO modes on device (re)start
testing commit b42c6761fd1651f564491b53016046c9ebf0b2a9 with gcc (GCC) 5.5.0
kernel signature: d5929cbdb9e95c020f72c7dd170bc281afaf2316424e12fddceb0a3b1507556a
run #0: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #1: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #2: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #3: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #4: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #5: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #6: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #7: basic kernel testing failed: UBSAN: undefined-behaviour in vhost_init_is_le
run #8: crashed: BUG: sleeping function called from invalid context in tap_get_minor
run #9: crashed: BUG: sleeping function called from invalid context in tap_get_minor
# git bisect bad b42c6761fd1651f564491b53016046c9ebf0b2a9
Bisecting: 12526 revisions left to test after this (roughly 14 steps)
[6c5da8031a3abfad259190d35f83d89568b72ee2] [media] cx231xx: Fix I2C on Internal Master 3 Bus
testing commit 6c5da8031a3abfad259190d35f83d89568b72ee2 with gcc (GCC) 5.5.0
kernel signature: d12d79176c281c6f88ea64b79d182d6b09d7651d8b8b740d878fca8aec764604
all runs: OK
# git bisect good 6c5da8031a3abfad259190d35f83d89568b72ee2
Bisecting: 6282 revisions left to test after this (roughly 13 steps)
[ff47d8c05019d6e7753cef270d6399cb5a33be57] Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux
testing commit ff47d8c05019d6e7753cef270d6399cb5a33be57 with gcc (GCC) 5.5.0
kernel signature: 4b0629082f1089b18e42e17b418942a293a5a4ea75d7e435857644e839eda9aa
all runs: boot failed: UBSAN: undefined-behaviour in acpi_ds_create_operand
# git bisect skip ff47d8c05019d6e7753cef270d6399cb5a33be57
Bisecting: 6282 revisions left to test after this (roughly 13 steps)
[bdfafc4ffdd24e491119d81f85ddc4393fa49803] locking/atomic, kref: Kill kref_sub()
testing commit bdfafc4ffdd24e491119d81f85ddc4393fa49803 with gcc (GCC) 5.5.0
kernel signature: ab4232d9f5f4297acf38e375a2fde41b22b708a9c9a31d44fe118ebab1ae563a
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: crashed: WARNING in nf_unregister_net_hook
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad bdfafc4ffdd24e491119d81f85ddc4393fa49803
Bisecting: 280 revisions left to test after this (roughly 8 steps)
[5824f92463e978f27985b748c69d94ee7caa8230] Merge tag 'vfio-v4.10-rc3' of git://github.com/awilliam/linux-vfio
testing commit 5824f92463e978f27985b748c69d94ee7caa8230 with gcc (GCC) 5.5.0
kernel signature: 6ac7efbe5ffccf9358e9aa4aad80e965b1af1b0db22a0488624eff925c901ea6
all runs: OK
# git bisect good 5824f92463e978f27985b748c69d94ee7caa8230
Bisecting: 135 revisions left to test after this (roughly 7 steps)
[6edd870bca30b3aa69370a99bcefc1e5f2b8b190] Merge branch 'drm-fixes-4.10' of git://people.freedesktop.org/~agd5f/linux into drm-fixes
testing commit 6edd870bca30b3aa69370a99bcefc1e5f2b8b190 with gcc (GCC) 5.5.0
kernel signature: 25f478445db06c1b2c9a44156a1a72d1fa7640953e7b63777f3d47adb2de4591
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad 6edd870bca30b3aa69370a99bcefc1e5f2b8b190
Bisecting: 72 revisions left to test after this (roughly 6 steps)
[674aea07e38200ea6f31ff6d5f200f0cf6cdb325] usb: storage: unusual_uas: Add JMicron JMS56x to unusual device
testing commit 674aea07e38200ea6f31ff6d5f200f0cf6cdb325 with gcc (GCC) 5.5.0
kernel signature: ce8692bc6408f7a4de938a3db947117d6a7f20ac2d9af3f645ab46e7ef4f66ed
all runs: OK
# git bisect good 674aea07e38200ea6f31ff6d5f200f0cf6cdb325
Bisecting: 33 revisions left to test after this (roughly 5 steps)
[6ea17ed15d9a343c2d17d76b99501fcad204f309] Merge tag 'staging-4.10-rc3' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/staging
testing commit 6ea17ed15d9a343c2d17d76b99501fcad204f309 with gcc (GCC) 5.5.0
kernel signature: c08a5fff5a2cb6c5eac45ce82c5cef75824f9a6bad4d808f8df806f912543bbe
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad 6ea17ed15d9a343c2d17d76b99501fcad204f309
Bisecting: 15 revisions left to test after this (roughly 4 steps)
[308c470bc482c46b5acbb2c2072df303d6526250] Merge tag 'sound-4.10-rc3' of git://git.kernel.org/pub/scm/linux/kernel/git/tiwai/sound
testing commit 308c470bc482c46b5acbb2c2072df303d6526250 with gcc (GCC) 5.5.0
kernel signature: 0b2e2c37c7862e8a67afb61bc14749355de04d7bd374e5d21f30e22069eca15e
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: OK
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad 308c470bc482c46b5acbb2c2072df303d6526250
Bisecting: 11 revisions left to test after this (roughly 4 steps)
[baaf031521b7f67be45f07593023b6ba47f07d15] Merge tag 'hwmon-for-linus-v4.10-rc3' of git://git.kernel.org/pub/scm/linux/kernel/git/groeck/linux-staging
testing commit baaf031521b7f67be45f07593023b6ba47f07d15 with gcc (GCC) 5.5.0
kernel signature: 48e44763918201fc2cda36495b57517e3d213d28a5e264b1913752d256d3d171
all runs: OK
# git bisect good baaf031521b7f67be45f07593023b6ba47f07d15
Bisecting: 5 revisions left to test after this (roughly 3 steps)
[1d0f953086f090a022f2c0e1448300c15372db46] ALSA: usb-audio: Fix irq/process data synchronization
testing commit 1d0f953086f090a022f2c0e1448300c15372db46 with gcc (GCC) 5.5.0
kernel signature: 2b7cb1d072328e66132036994b0f51898dfbbb5b04f42373c961b24e9a86bdc9
run #0: OK
run #1: OK
run #2: OK
run #3: OK
run #4: OK
run #5: OK
run #6: OK
run #7: crashed: WARNING in nf_unregister_net_hook
run #8: OK
run #9: crashed: WARNING in nf_unregister_net_hook
# git bisect bad 1d0f953086f090a022f2c0e1448300c15372db46
Bisecting: 2 revisions left to test after this (roughly 2 steps)
[6b7e95d1336b9eb0d4c6db190ce756480496bd13] ALSA: firewire-lib: change structure member with proper type
testing commit 6b7e95d1336b9eb0d4c6db190ce756480496bd13 with gcc (GCC) 5.5.0
kernel signature: 7f0a280e9b65fb0d24f5bd2b936bd9501af9d87d4c91eddae79a0536fae46fef
all runs: OK
# git bisect good 6b7e95d1336b9eb0d4c6db190ce756480496bd13
Bisecting: 1 revision left to test after this (roughly 1 step)
[85bcf96caba8b4a7c0805555638629ba3c67ea0c] ALSA: hda - Fix up GPIO for ASUS ROG Ranger
testing commit 85bcf96caba8b4a7c0805555638629ba3c67ea0c with gcc (GCC) 5.5.0
kernel signature: 92a39f62a6fa33b590237cde17b0f6b10a07aab98ea39ed23ffa7f1895c436bc
all runs: OK
# git bisect good 85bcf96caba8b4a7c0805555638629ba3c67ea0c
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[c7efff9284dfde95a11aaa811c9d8ec8167f0f6e] ALSA: hda - Apply asus-mode8 fixup to ASUS X71SL
testing commit c7efff9284dfde95a11aaa811c9d8ec8167f0f6e with gcc (GCC) 5.5.0
kernel signature: 67e195ef8877f38c08b84f88b5e8c3e313a6903bea9b3e98a523db1af96a8c61
all runs: OK
# git bisect good c7efff9284dfde95a11aaa811c9d8ec8167f0f6e
1d0f953086f090a022f2c0e1448300c15372db46 is the first bad commit
commit 1d0f953086f090a022f2c0e1448300c15372db46
Author: Ioan-Adrian Ratiu <adi@adirat.com>
Date:   Thu Jan 5 00:37:46 2017 +0200

    ALSA: usb-audio: Fix irq/process data synchronization
    
    Commit 16200948d83 ("ALSA: usb-audio: Fix race at stopping the stream") was
    incomplete causing another more severe kernel panic, so it got reverted.
    This fixes both the original problem and its fallout kernel race/crash.
    
    The original fix is to move the endpoint member NULL clearing logic inside
    wait_clear_urbs() so the irq triggering the urb completion doesn't call
    retire_capture/playback_urb() after the NULL clearing and generate a panic.
    
    However this creates a new race between snd_usb_endpoint_start()'s call
    to wait_clear_urbs() and the irq urb completion handler which again calls
    retire_capture/playback_urb() leading to a new NULL dereference.
    
    We keep the EP deactivation code in snd_usb_endpoint_start() because
    removing it will break the EP reference counting (see [1] [2] for info),
    however we don't need the "can_sleep" mechanism anymore because a new
    function was introduced (snd_usb_endpoint_sync_pending_stop()) which
    synchronizes pending stops and gets called inside the pcm prepare callback.
    
    It also makes sense to remove can_sleep because it was also removed from
    deactivate_urbs() signature in [3] so we benefit from more simplification.
    
    [1] commit 015618b90 ("ALSA: snd-usb: Fix URB cancellation at stream start")
    [2] commit e9ba389c5 ("ALSA: usb-audio: Fix scheduling-while-atomic bug in PCM capture stream")
    [3] commit ccc1696d5 ("ALSA: usb-audio: simplify endpoint deactivation code")
    
    Fixes: f8114f8583bb ("Revert "ALSA: usb-audio: Fix race at stopping the stream"")
    
    Signed-off-by: Ioan-Adrian Ratiu <adi@adirat.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

 sound/usb/endpoint.c | 17 +++++++----------
 sound/usb/endpoint.h |  2 +-
 sound/usb/pcm.c      | 10 +++++-----
 3 files changed, 13 insertions(+), 16 deletions(-)
culprit signature: 2b7cb1d072328e66132036994b0f51898dfbbb5b04f42373c961b24e9a86bdc9
parent  signature: 67e195ef8877f38c08b84f88b5e8c3e313a6903bea9b3e98a523db1af96a8c61
revisions tested: 39, total time: 7h30m50.986852887s (build: 3h37m53.037656875s, test: 3h47m57.365127815s)
first bad commit: 1d0f953086f090a022f2c0e1448300c15372db46 ALSA: usb-audio: Fix irq/process data synchronization
recipients (to): ["adi@adirat.com" "alsa-devel@alsa-project.org" "perex@perex.cz" "tiwai@suse.com" "tiwai@suse.de"]
recipients (cc): ["linux-kernel@vger.kernel.org"]
crash: WARNING in nf_unregister_net_hook
team0 (unregistering): Port device team_slave_0 removed
bond0 (unregistering): Releasing backup interface bond_slave_1
bond0 (unregistering): Releasing backup interface bond_slave_0
bond0 (unregistering): Released all slaves
------------[ cut here ]------------
WARNING: CPU: 0 PID: 42 at net/netfilter/core.c:147 nf_unregister_net_hook+0x34a/0x580 net/netfilter/core.c:147
nf_unregister_net_hook: hook not found!
Kernel panic - not syncing: panic_on_warn set ...

CPU: 0 PID: 42 Comm: kworker/u4:2 Not tainted 4.10.0-rc2-syzkaller #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
Workqueue: netns cleanup_net
Call Trace:
 __dump_stack lib/dump_stack.c:15 [inline]
 dump_stack+0x1bd/0x29c lib/dump_stack.c:51
 panic+0x1e5/0x44f kernel/panic.c:179
 __warn+0x194/0x1d0 kernel/panic.c:539
 warn_slowpath_fmt+0x92/0xb0 kernel/panic.c:562
 nf_unregister_net_hook+0x34a/0x580 net/netfilter/core.c:147
 nf_unregister_hook_list net/netfilter/core.c:443 [inline]
 netfilter_net_exit+0x36/0xd0 net/netfilter/core.c:475
 ops_exit_list+0xae/0x180 net/core/net_namespace.c:139
 cleanup_net+0x336/0xbb0 net/core/net_namespace.c:461
 process_one_work+0x7b3/0x1cf0 kernel/workqueue.c:2098
 worker_thread+0x614/0x1580 kernel/workqueue.c:2232
 kthread+0x311/0x4c0 kernel/kthread.c:227
 ret_from_fork+0x2a/0x40 arch/x86/entry/entry_64.S:427
Kernel Offset: disabled

